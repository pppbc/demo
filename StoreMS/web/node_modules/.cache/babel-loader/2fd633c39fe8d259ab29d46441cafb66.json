{"remainingRequest":"/Users/student02/Desktop/youduitong1/node_modules/babel-loader/lib/index.js!/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/student02/Desktop/youduitong1/src/pages/allComments.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/student02/Desktop/youduitong1/src/pages/allComments.vue","mtime":1569469433000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _toConsumableArray from \"/Users/student02/Desktop/youduitong1/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/student02/Desktop/youduitong1/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\nimport \"vant/es/list/style\";\nimport _List from \"vant/es/list\";\nimport \"vant/es/col/style\";\nimport _Col from \"vant/es/col\";\nimport \"vant/es/row/style\";\nimport _Row from \"vant/es/row\";\nimport \"core-js/modules/es6.function.name\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\n\nvar _components;\n\nexport default {\n  components: (_components = {}, _defineProperty(_components, _NavBar.name, _NavBar), _defineProperty(_components, _Row.name, _Row), _defineProperty(_components, _Col.name, _Col), _defineProperty(_components, _List.name, _List), _defineProperty(_components, _Toast.name, _Toast), _components),\n  data: function data() {\n    return {\n      allComments: [],\n      loading: false,\n      finished: false,\n      pid: 0\n    };\n  },\n  methods: {\n    goBack: function goBack() {\n      this.$router.back();\n    },\n    onLoad: function onLoad() {\n      var _this = this;\n\n      setTimeout(function () {\n        _this.getAllComments(_this.$store.state.requestAllCommentsCount);\n\n        _this.loading = false;\n      }, 100);\n    },\n    getAllComments: function getAllComments(count) {\n      var _this2 = this;\n\n      this.$store.commit('allComments', '');\n      var url = '/order/getProductComment?product_id=' + this.pid + '&page=' + count;\n      this.axios.get(url).then(function (response) {\n        if (response.data.status === 1) {\n          if (response.data.obj.length > 0) {\n            _this2.$store.commit('requestAllCommentsCount', 1);\n\n            _this2.$store.commit(\"allComments\", response.data.obj);\n\n            _this2.allComments = [].concat(_toConsumableArray(_this2.allComments), _toConsumableArray(response.data.obj));\n          } else {\n            _this2.finished = true;\n          }\n        }\n      }).catch(function (response) {\n        _Toast(\"网络请求出错\");\n      });\n    }\n  },\n  beforeMount: function beforeMount() {\n    this.$store.commit('requestAllCommentsCount', 0);\n    this.$store.commit(\"allComments\", '');\n    this.pid = this.$route.params.pid;\n  }\n};",{"version":3,"sources":["allComments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAmCA,eAAA;AACA,EAAA,UAAA,kDACA,QAAA,IADA,yCAEA,KAAA,IAFA,sCAGA,KAAA,IAHA,sCAIA,MAAA,IAJA,uCAKA,OAAA,IALA,uBADA;AAQA,EAAA,IARA,kBAQA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA,KAFA;AAGA,MAAA,QAAA,EAAA,KAHA;AAIA,MAAA,GAAA,EAAA;AAJA,KAAA;AAMA,GAfA;AAgBA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,WAAA,OAAA,CAAA,IAAA;AACA,KAHA;AAIA,IAAA,MAJA,oBAIA;AAAA;;AACA,MAAA,UAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,cAAA,CAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,uBAAA;;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,OAHA,EAGA,GAHA,CAAA;AAIA,KATA;AAUA,IAAA,cAVA,0BAUA,KAVA,EAUA;AAAA;;AACA,WAAA,MAAA,CAAA,MAAA,CAAA,aAAA,EAAA,EAAA;AACA,UAAA,GAAA,GAAA,yCAAA,KAAA,GAAA,GAAA,QAAA,GAAA,KAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,YAAA,QAAA,CAAA,IAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,cAAA,QAAA,CAAA,IAAA,CAAA,GAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,YAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,yBAAA,EAAA,CAAA;;AACA,YAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,aAAA,EAAA,QAAA,CAAA,IAAA,CAAA,GAAA;;AACA,YAAA,MAAA,CAAA,WAAA,gCAAA,MAAA,CAAA,WAAA,sBAAA,QAAA,CAAA,IAAA,CAAA,GAAA;AACA,WAJA,MAIA;AACA,YAAA,MAAA,CAAA,QAAA,GAAA,IAAA;AACA;AACA;AACA,OAVA,EAUA,KAVA,CAUA,UAAA,QAAA,EAAA;AACA,eAAA,QAAA;AACA,OAZA;AAaA;AA1BA,GAhBA;AA4CA,EAAA,WA5CA,yBA4CA;AACA,SAAA,MAAA,CAAA,MAAA,CAAA,yBAAA,EAAA,CAAA;AACA,SAAA,MAAA,CAAA,MAAA,CAAA,aAAA,EAAA,EAAA;AACA,SAAA,GAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,GAAA;AACA;AAhDA,CAAA","sourcesContent":["<template>\n\t<div>\n\t\t<van-nav-bar\n\t\t\ttitle=\"全部评价\"\n\t\t\tleft-arrow\n\t\t\t@click-left=\"goBack\"\n\t\t/>\n\t\t\n\t\t<van-list\n\t\t\tv-model=\"loading\"\n\t\t\t:finished=\"finished\"\n\t\t\tfinished-text=\"没有更多了\"\n\t\t\t@load=\"onLoad\"\n\t\t>\n\t\t\t<van-row class=\"comment\">\n\t\t\t\t<van-col span=\"24\" v-for=\"(item,index) in allComments\" :key=\"index\">\n\t\t\t\t\t<van-row class=\"name\">\n\t\t\t\t\t\t<van-col span=\"10\" offset=\"1\">{{item.UserName.replace(item.UserName.substring(3,7),'****')}}</van-col>\n\t\t\t\t\t\t<van-col span=\"5\">{{item.Title}}</van-col>\n\t\t\t\t\t</van-row>\n\t\t\t\t\t<van-row class=\"time\">\n\t\t\t\t\t\t<van-col span=\"23\" offset=\"1\">{{item.CreateTime.replace('T',' ').replace('Z',' ')}}</van-col>\n\t\t\t\t\t</van-row>\n\t\t\t\t\t<van-row class=\"content\">\n\t\t\t\t\t\t<van-col span=\"23\" offset=\"1\">{{item.Content}}</van-col>\n\t\t\t\t\t</van-row>\n\t\t\t\t</van-col>\n\t\t\t</van-row>\n\t\t</van-list>\n\t\t\n\t</div>\n</template>\n\n<script>\n\timport {NavBar,Row,Col,List,Toast} from 'vant'\n\texport default{\n\t\tcomponents:{\n\t\t\t[NavBar.name]:NavBar,\n\t\t\t[Row.name]:Row,\n\t\t\t[Col.name]:Col,\n\t\t\t[List.name]:List,\n\t\t\t[Toast.name]:Toast\n\t\t},\n\t\tdata(){\n\t\t\treturn{\n\t\t\t\tallComments:[],\n\t\t\t\tloading:false,\n\t\t\t\tfinished:false,\n\t\t\t\tpid:0\n\t\t\t}\n\t\t},\n\t\tmethods:{\n\t\t\tgoBack(){\n\t\t\t\tthis.$router.back()\n\t\t\t},\n\t\t\tonLoad(){\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tthis.getAllComments(this.$store.state.requestAllCommentsCount)\n\t\t\t\t\tthis.loading = false\n\t\t\t\t},100)\n\t\t\t},\n\t\t\tgetAllComments(count){\n\t\t\t\tthis.$store.commit('allComments','')\n\t\t\t\tvar url = '/order/getProductComment?product_id='+this.pid+'&page='+count\n\t\t\t\tthis.axios.get(url).then((response)=>{\n\t\t\t\t\tif (response.data.status === 1) {\n\t\t\t\t\t\tif (response.data.obj.length > 0) {\n\t\t\t\t\t\t\tthis.$store.commit('requestAllCommentsCount',1)\n\t\t\t\t\t\t\tthis.$store.commit(\"allComments\",response.data.obj)\n\t\t\t\t\t\t\tthis.allComments = [...this.allComments,...response.data.obj]\n\t\t\t\t\t\t} else{\n\t\t\t\t\t\t\tthis.finished = true\n\t\t\t\t\t\t}\n\t\t\t\t\t} \n\t\t\t\t}).catch((response)=>{\n\t\t\t\t\tToast(\"网络请求出错\")\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tbeforeMount() {\n\t\t\tthis.$store.commit('requestAllCommentsCount',0)\n\t\t\tthis.$store.commit(\"allComments\",'')\n\t\t\tthis.pid = this.$route.params.pid\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t.van-nav-bar__arrow{\n\t\tfont-size: 1.5rem;\n\t\tcolor: black;\n\t}\n\t\n\t.comment{\n\t\tbackground: white;\n\t}\n\t.van-col{\n\t\tmargin-top: 0.2rem;\n\t\tmargin-bottom: 0.2rem;\n\t}\n\t.comment>.van-col{\n\t\tmargin-bottom: 0.3125rem;\n\t}\n\t.name{\n\t\ttext-align: left;\n\t\tfont-size: 0.875rem;\n\t}\n\t.time{\n\t\tfont-size: 0.75rem;\n\t\tcolor: gray;\n\t\ttext-align: left;\n\t}\n\t.content{\n\t\tfont-size: 0.9375rem;\n\t\ttext-align: left;\n\t}\n</style>\n"],"sourceRoot":"src/pages"}]}