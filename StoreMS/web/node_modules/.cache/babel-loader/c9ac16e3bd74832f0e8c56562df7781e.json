{"remainingRequest":"/Users/student02/Desktop/youduitong1/node_modules/babel-loader/lib/index.js!/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/student02/Desktop/youduitong1/src/pages/paymentPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/student02/Desktop/youduitong1/src/pages/paymentPage.vue","mtime":1568681157000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _defineProperty from \"/Users/student02/Desktop/youduitong1/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"vant/es/loading/style\";\nimport _Loading from \"vant/es/loading\";\nimport \"vant/es/overlay/style\";\nimport _Overlay from \"vant/es/overlay\";\nimport \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\nimport \"vant/es/number-keyboard/style\";\nimport _NumberKeyboard from \"vant/es/number-keyboard\";\nimport \"vant/es/password-input/style\";\nimport _PasswordInput from \"vant/es/password-input\";\nimport \"vant/es/action-sheet/style\";\nimport _ActionSheet from \"vant/es/action-sheet\";\nimport \"vant/es/icon/style\";\nimport _Icon from \"vant/es/icon\";\nimport \"vant/es/button/style\";\nimport _Button from \"vant/es/button\";\nimport \"vant/es/collapse-item/style\";\nimport _CollapseItem from \"vant/es/collapse-item\";\nimport \"vant/es/collapse/style\";\nimport _Collapse from \"vant/es/collapse\";\nimport \"vant/es/checkbox/style\";\nimport _Checkbox from \"vant/es/checkbox\";\nimport \"vant/es/col/style\";\nimport _Col from \"vant/es/col\";\nimport \"vant/es/row/style\";\nimport _Row from \"vant/es/row\";\nimport \"core-js/modules/es6.function.name\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\n\nvar _components;\n\nimport { Images } from '@/resources/index.js';\nexport default {\n  components: (_components = {}, _defineProperty(_components, _NavBar.name, _NavBar), _defineProperty(_components, _Row.name, _Row), _defineProperty(_components, _Col.name, _Col), _defineProperty(_components, _Checkbox.name, _Checkbox), _defineProperty(_components, _Collapse.name, _Collapse), _defineProperty(_components, _CollapseItem.name, _CollapseItem), _defineProperty(_components, _Button.name, _Button), _defineProperty(_components, _Icon.name, _Icon), _defineProperty(_components, _ActionSheet.name, _ActionSheet), _defineProperty(_components, _PasswordInput.name, _PasswordInput), _defineProperty(_components, _NumberKeyboard.name, _NumberKeyboard), _defineProperty(_components, _Toast.name, _Toast), _defineProperty(_components, _Overlay.name, _Overlay), _defineProperty(_components, _Loading.name, _Loading), _components),\n  data: function data() {\n    return {\n      data: '',\n      blockArr: [],\n      activeName: '1',\n      checked1: true,\n      checked2: false,\n      checked3: false,\n      downgrade: Images.shop.ic_down,\n      showActionSheet: false,\n      password: '',\n      showKeyboard: true,\n      show: false,\n      loadingText: '正在支付...'\n    };\n  },\n  methods: {\n    goBack: function goBack() {\n      this.$router.push('/orderPage/unpaid/待付款');\n    },\n    upBtn: function upBtn(index) {\n      var arr = this.blockArr;\n      var item = arr[index];\n      arr[index] = arr[index - 1];\n      arr[index - 1] = item;\n      this.blockArr.splice(index, 1, arr[index]);\n      this.blockArr.splice(index - 1, 1, arr[index - 1]);\n    },\n    downBtn: function downBtn(index) {\n      var arr = this.blockArr;\n      var item = arr[index];\n      arr[index] = arr[index + 1];\n      arr[index + 1] = item;\n      this.blockArr.splice(index, 1, arr[index]);\n      this.blockArr.splice(index + 1, 1, arr[index + 1]);\n    },\n    onSubmit: function onSubmit() {\n      this.judgePaymentPW();\n    },\n    onInput: function onInput(key) {\n      var _this = this;\n\n      this.password = (this.password + key).slice(0, 6);\n\n      if (this.password.length === 6) {\n        this.$nextTick(function () {\n          _this.showActionSheet = false;\n          _this.show = true;\n          _this.loadingText = '正在支付...';\n          var data = {\n            UserID: _this.$store.state.userID,\n            OrderNo: _this.data.OrderNo,\n            TotalPay: _this.totalPrice,\n            Password: _this.password\n          };\n\n          if (_this.activeName === '1') {\n            data.Type = 1;\n          }\n\n          if (_this.activeName === '2') {\n            data.Type = 3;\n            var arr = [];\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n              for (var _iterator = _this.blockArr[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                var item = _step.value;\n                arr.push(item.ID);\n              }\n            } catch (err) {\n              _didIteratorError = true;\n              _iteratorError = err;\n            } finally {\n              try {\n                if (!_iteratorNormalCompletion && _iterator.return != null) {\n                  _iterator.return();\n                }\n              } finally {\n                if (_didIteratorError) {\n                  throw _iteratorError;\n                }\n              }\n            }\n\n            data.list = arr;\n          }\n\n          if (_this.activeName === '3') {\n            data.Type = 2;\n          }\n\n          var url = '/point/payWithPoint?token=' + _this.$store.state.token;\n\n          _this.axios.post(url, data).then(function (response) {\n            if (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n              _Toast('登陆过期，请重新登录');\n\n              _this.$router.push('/login');\n            } else if (response.data.status === 1) {\n              setTimeout(function () {\n                _Toast('支付成功');\n\n                setTimeout(function () {\n                  _this.show = false;\n\n                  _this.$router.push('/orderPage/unshipped/待发货');\n                }, 500);\n              }, 1000);\n            } else {\n              setTimeout(function () {\n                _Toast(response.data.detail);\n\n                _this.show = false;\n              }, 1000);\n            }\n          }).catch(function (response) {\n            setTimeout(function () {\n              _Toast('网络请求出错，请稍候再试!');\n\n              _this.show = false;\n            }, 1000);\n          });\n        });\n      }\n    },\n    onDelete: function onDelete() {\n      this.password = this.password.slice(0, this.password.length - 1);\n    },\n    closed: function closed() {\n      this.password = '';\n    },\n    judgePaymentPW: function judgePaymentPW() {\n      var _this2 = this;\n\n      var url = '/user/getpaypwd?user_id=' + this.$store.state.userID + '&token=' + this.$store.state.token;\n      this.axios.get(url).then(function (response) {\n        if (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n          _Toast('登陆过期，请重新登录');\n\n          _this2.$router.push('/login');\n        } else if (response.data.status === 1) {\n          _this2.showActionSheet = true;\n        } else {\n          _this2.$router.push('/tradingPassword');\n        }\n      }).catch(function (response) {\n        _Toast('网络请求出错，请稍候再试!');\n      });\n    }\n  },\n  computed: {\n    totalPrice: function totalPrice() {\n      if (this.data.length) {\n        var totalPrice = 0;\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = this.data[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var item = _step2.value;\n            totalPrice += item.TotalPrice;\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n\n        return totalPrice;\n      } else {\n        return this.data.TotalPrice;\n      }\n    }\n  },\n  watch: {\n    activeName: function activeName() {\n      if (this.activeName === '1') {\n        this.checked1 = true;\n        this.checked2 = this.checked3 = false;\n      }\n\n      if (this.activeName === '2') {\n        this.checked2 = true;\n        this.checked1 = this.checked3 = false;\n      }\n\n      if (this.activeName === '3') {\n        this.checked3 = true;\n        this.checked1 = this.checked2 = false;\n      }\n    }\n  },\n  beforeMount: function beforeMount() {\n    this.data = this.$store.state.paymentData;\n    this.blockArr = this.$store.state.blockArray.filter(function (val) {\n      return val.Balance !== 0;\n    });\n  }\n};",{"version":3,"sources":["paymentPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4EA,SAAA,MAAA,QAAA,sBAAA;AACA,eAAA;AACA,EAAA,UAAA,kDACA,QAAA,IADA,yCAEA,KAAA,IAFA,sCAGA,KAAA,IAHA,sCAIA,UAAA,IAJA,2CAKA,UAAA,IALA,2CAMA,cAAA,IANA,+CAOA,QAAA,IAPA,yCAQA,MAAA,IARA,uCASA,aAAA,IATA,8CAUA,eAAA,IAVA,gDAWA,gBAAA,IAXA,iDAYA,OAAA,IAZA,wCAaA,SAAA,IAbA,0CAcA,SAAA,IAdA,yBADA;AAiBA,EAAA,IAjBA,kBAiBA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,UAAA,EAAA,GAHA;AAIA,MAAA,QAAA,EAAA,IAJA;AAKA,MAAA,QAAA,EAAA,KALA;AAMA,MAAA,QAAA,EAAA,KANA;AAOA,MAAA,SAAA,EAAA,MAAA,CAAA,IAAA,CAAA,OAPA;AAQA,MAAA,eAAA,EAAA,KARA;AASA,MAAA,QAAA,EAAA,EATA;AAUA,MAAA,YAAA,EAAA,IAVA;AAWA,MAAA,IAAA,EAAA,KAXA;AAYA,MAAA,WAAA,EAAA;AAZA,KAAA;AAcA,GAhCA;AAiCA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,uBAAA;AACA,KAHA;AAIA,IAAA,KAJA,iBAIA,KAJA,EAIA;AACA,UAAA,GAAA,GAAA,KAAA,QAAA;AACA,UAAA,IAAA,GAAA,GAAA,CAAA,KAAA,CAAA;AACA,MAAA,GAAA,CAAA,KAAA,CAAA,GAAA,GAAA,CAAA,KAAA,GAAA,CAAA,CAAA;AACA,MAAA,GAAA,CAAA,KAAA,GAAA,CAAA,CAAA,GAAA,IAAA;AACA,WAAA,QAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA,EAAA,GAAA,CAAA,KAAA,CAAA;AACA,WAAA,QAAA,CAAA,MAAA,CAAA,KAAA,GAAA,CAAA,EAAA,CAAA,EAAA,GAAA,CAAA,KAAA,GAAA,CAAA,CAAA;AACA,KAXA;AAYA,IAAA,OAZA,mBAYA,KAZA,EAYA;AACA,UAAA,GAAA,GAAA,KAAA,QAAA;AACA,UAAA,IAAA,GAAA,GAAA,CAAA,KAAA,CAAA;AACA,MAAA,GAAA,CAAA,KAAA,CAAA,GAAA,GAAA,CAAA,KAAA,GAAA,CAAA,CAAA;AACA,MAAA,GAAA,CAAA,KAAA,GAAA,CAAA,CAAA,GAAA,IAAA;AACA,WAAA,QAAA,CAAA,MAAA,CAAA,KAAA,EAAA,CAAA,EAAA,GAAA,CAAA,KAAA,CAAA;AACA,WAAA,QAAA,CAAA,MAAA,CAAA,KAAA,GAAA,CAAA,EAAA,CAAA,EAAA,GAAA,CAAA,KAAA,GAAA,CAAA,CAAA;AACA,KAnBA;AAoBA,IAAA,QApBA,sBAoBA;AACA,WAAA,cAAA;AACA,KAtBA;AAuBA,IAAA,OAvBA,mBAuBA,GAvBA,EAuBA;AAAA;;AACA,WAAA,QAAA,GAAA,CAAA,KAAA,QAAA,GAAA,GAAA,EAAA,KAAA,CAAA,CAAA,EAAA,CAAA,CAAA;;AACA,UAAA,KAAA,QAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,aAAA,SAAA,CAAA,YAAA;AACA,UAAA,KAAA,CAAA,eAAA,GAAA,KAAA;AACA,UAAA,KAAA,CAAA,IAAA,GAAA,IAAA;AACA,UAAA,KAAA,CAAA,WAAA,GAAA,SAAA;AACA,cAAA,IAAA,GAAA;AACA,YAAA,MAAA,EAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,MADA;AAEA,YAAA,OAAA,EAAA,KAAA,CAAA,IAAA,CAAA,OAFA;AAGA,YAAA,QAAA,EAAA,KAAA,CAAA,UAHA;AAIA,YAAA,QAAA,EAAA,KAAA,CAAA;AAJA,WAAA;;AAMA,cAAA,KAAA,CAAA,UAAA,KAAA,GAAA,EAAA;AACA,YAAA,IAAA,CAAA,IAAA,GAAA,CAAA;AACA;;AACA,cAAA,KAAA,CAAA,UAAA,KAAA,GAAA,EAAA;AACA,YAAA,IAAA,CAAA,IAAA,GAAA,CAAA;AACA,gBAAA,GAAA,GAAA,EAAA;AAFA;AAAA;AAAA;;AAAA;AAGA,mCAAA,KAAA,CAAA,QAAA,8HAAA;AAAA,oBAAA,IAAA;AACA,gBAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,EAAA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAMA,YAAA,IAAA,CAAA,IAAA,GAAA,GAAA;AACA;;AACA,cAAA,KAAA,CAAA,UAAA,KAAA,GAAA,EAAA;AACA,YAAA,IAAA,CAAA,IAAA,GAAA,CAAA;AACA;;AACA,cAAA,GAAA,GAAA,+BAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,KAAA;;AACA,UAAA,KAAA,CAAA,KAAA,CAAA,IAAA,CAAA,GAAA,EAAA,IAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,gBAAA,QAAA,CAAA,IAAA,CAAA,MAAA,IAAA,QAAA,CAAA,IAAA,CAAA,MAAA,KAAA,cAAA,EAAA;AACA,qBAAA,YAAA;;AACA,cAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA,aAHA,MAGA,IAAA,QAAA,CAAA,IAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,cAAA,UAAA,CAAA,YAAA;AACA,uBAAA,MAAA;;AACA,gBAAA,UAAA,CAAA,YAAA;AACA,kBAAA,KAAA,CAAA,IAAA,GAAA,KAAA;;AACA,kBAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,0BAAA;AACA,iBAHA,EAGA,GAHA,CAAA;AAIA,eANA,EAMA,IANA,CAAA;AAOA,aARA,MAQA;AACA,cAAA,UAAA,CAAA,YAAA;AACA,uBAAA,QAAA,CAAA,IAAA,CAAA,MAAA;;AACA,gBAAA,KAAA,CAAA,IAAA,GAAA,KAAA;AACA,eAHA,EAGA,IAHA,CAAA;AAIA;AACA,WAlBA,EAkBA,KAlBA,CAkBA,UAAA,QAAA,EAAA;AACA,YAAA,UAAA,CAAA,YAAA;AACA,qBAAA,eAAA;;AACA,cAAA,KAAA,CAAA,IAAA,GAAA,KAAA;AACA,aAHA,EAGA,IAHA,CAAA;AAIA,WAvBA;AAwBA,SAjDA;AAkDA;AACA,KA7EA;AA8EA,IAAA,QA9EA,sBA8EA;AACA,WAAA,QAAA,GAAA,KAAA,QAAA,CAAA,KAAA,CAAA,CAAA,EAAA,KAAA,QAAA,CAAA,MAAA,GAAA,CAAA,CAAA;AACA,KAhFA;AAiFA,IAAA,MAjFA,oBAiFA;AACA,WAAA,QAAA,GAAA,EAAA;AACA,KAnFA;AAoFA,IAAA,cApFA,4BAoFA;AAAA;;AACA,UAAA,GAAA,GAAA,6BAAA,KAAA,MAAA,CAAA,KAAA,CAAA,MAAA,GAAA,SAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,KAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,YAAA,QAAA,CAAA,IAAA,CAAA,MAAA,IAAA,QAAA,CAAA,IAAA,CAAA,MAAA,KAAA,cAAA,EAAA;AACA,iBAAA,YAAA;;AACA,UAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA,SAHA,MAGA,IAAA,QAAA,CAAA,IAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,eAAA,GAAA,IAAA;AACA,SAFA,MAEA;AACA,UAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,kBAAA;AACA;AACA,OATA,EASA,KATA,CASA,UAAA,QAAA,EAAA;AACA,eAAA,eAAA;AACA,OAXA;AAYA;AAlGA,GAjCA;AAqIA,EAAA,QAAA,EAAA;AACA,IAAA,UADA,wBACA;AACA,UAAA,KAAA,IAAA,CAAA,MAAA,EAAA;AACA,YAAA,UAAA,GAAA,CAAA;AADA;AAAA;AAAA;;AAAA;AAEA,gCAAA,KAAA,IAAA,mIAAA;AAAA,gBAAA,IAAA;AACA,YAAA,UAAA,IAAA,IAAA,CAAA,UAAA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAKA,eAAA,UAAA;AACA,OANA,MAMA;AACA,eAAA,KAAA,IAAA,CAAA,UAAA;AACA;AACA;AAXA,GArIA;AAkJA,EAAA,KAAA,EAAA;AACA,IAAA,UADA,wBACA;AACA,UAAA,KAAA,UAAA,KAAA,GAAA,EAAA;AACA,aAAA,QAAA,GAAA,IAAA;AACA,aAAA,QAAA,GAAA,KAAA,QAAA,GAAA,KAAA;AACA;;AACA,UAAA,KAAA,UAAA,KAAA,GAAA,EAAA;AACA,aAAA,QAAA,GAAA,IAAA;AACA,aAAA,QAAA,GAAA,KAAA,QAAA,GAAA,KAAA;AACA;;AACA,UAAA,KAAA,UAAA,KAAA,GAAA,EAAA;AACA,aAAA,QAAA,GAAA,IAAA;AACA,aAAA,QAAA,GAAA,KAAA,QAAA,GAAA,KAAA;AACA;AACA;AAdA,GAlJA;AAkKA,EAAA,WAlKA,yBAkKA;AACA,SAAA,IAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,WAAA;AACA,SAAA,QAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,UAAA,CAAA,MAAA,CAAA,UAAA,GAAA,EAAA;AACA,aAAA,GAAA,CAAA,OAAA,KAAA,CAAA;AACA,KAFA,CAAA;AAGA;AAvKA,CAAA","sourcesContent":["<template>\n\t<div>\n\t\t<van-nav-bar\n\t\t\ttitle=\"确认付款\"\n\t\t\tleft-arrow\n\t\t\tfixed\n\t\t\t@click-left=\"goBack\"\n\t\t/>\n\t\t\n\t\t<van-row class=\"container\">\n\t\t\t<van-col span=\"24\">\n\t\t\t\t<van-row class=\"totalPrice\">\n\t\t\t\t\t<van-col span=\"24\"><span>Block </span>{{totalPrice}}</van-col>\n\t\t\t\t</van-row>\n\t\t\t\t<van-row class=\"text\">\n\t\t\t\t\t<van-col span=\"24\">请选择您的支付方式</van-col>\n\t\t\t\t</van-row>\n\t\t\t\t<van-row class=\"list\">\n\t\t\t\t\t<van-col span=\"24\">\n\t\t\t\t\t\t<van-collapse v-model=\"activeName\" accordion>\n\t\t\t\t\t\t\t<van-collapse-item name=\"1\" class=\"collapseItem1\">\n\t\t\t\t\t\t\t\t<div slot=\"title\">\n\t\t\t\t\t\t\t\t\t<van-checkbox v-model=\"checked1\">使用通用积分支付</van-checkbox>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<van-row>\n\t\t\t\t\t\t\t\t\t<van-col span=\"24\">当前可用通用积分 {{$store.state.totalBlock}} Block</van-col>\n\t\t\t\t\t\t\t\t</van-row>\n\t\t\t\t\t\t\t</van-collapse-item>\n\t\t\t\t\t\t\t<van-collapse-item name=\"2\" class=\"collapseItem2\">\n\t\t\t\t\t\t\t\t<div slot=\"title\">\n\t\t\t\t\t\t\t\t\t<van-checkbox v-model=\"checked2\">使用自定义积分支付</van-checkbox>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<van-row v-for=\"(item,index) in blockArr\" :key=\"index\" class=\"blocklist\">\n\t\t\t\t\t\t\t\t\t<van-col span=\"20\">{{item.PointName}} 积分余额：{{item.Balance}} 约合：{{item.Balance*item.PointFate}}Block</van-col>\n\t\t\t\t\t\t\t\t\t<van-col span=\"2\">\n\t\t\t\t\t\t\t\t\t\t<van-icon v-show=\"index !== 0\" name=\"upgrade\" @click=\"upBtn(index)\" />\n\t\t\t\t\t\t\t\t\t</van-col>\n\t\t\t\t\t\t\t\t\t<van-col span=\"2\">\n\t\t\t\t\t\t\t\t\t\t<van-icon v-show=\"index !== blockArr.length-1\" :name=\"downgrade\" @click=\"downBtn(index)\"/>\n\t\t\t\t\t\t\t\t\t</van-col>\n\t\t\t\t\t\t\t\t</van-row>\n\t\t\t\t\t\t\t</van-collapse-item>\n\t\t\t\t\t\t\t<van-collapse-item name=\"3\" class=\"collapseItem3\">\n\t\t\t\t\t\t\t\t<div slot=\"title\">\n\t\t\t\t\t\t\t\t\t<van-checkbox v-model=\"checked3\">按照积分过期时间自动扣款</van-checkbox>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<van-row>\n\t\t\t\t\t\t\t\t\t<van-col span=\"24\">按照积分过期时间自动扣款</van-col>\n\t\t\t\t\t\t\t\t</van-row>\n\t\t\t\t\t\t\t</van-collapse-item>\n\t\t\t\t\t\t</van-collapse>\n\t\t\t\t\t</van-col>\n\t\t\t\t</van-row>\n\t\t\t</van-col>\n\t\t</van-row>\n\t\t<van-button type=\"danger\" round @click=\"onSubmit\">确认支付</van-button>\n\t\t<van-action-sheet v-model=\"showActionSheet\" title=\"输入支付密码\" @closed=\"closed\">\n\t\t\t<van-password-input\n\t\t\t\t:value=\"password\"\n\t\t\t\t:focused=\"showKeyboard\"\n\t\t\t\t@focus=\"showKeyboard = true\"\n\t\t\t/>\n\t\t\t<van-number-keyboard\n\t\t\t\t:show=\"showKeyboard\"\n\t\t\t\t@input=\"onInput\"\n\t\t\t\t@delete=\"onDelete\"\n\t\t\t\t:safe-area-inset-bottom=\"true\"\n\t\t\t/>\n\t\t</van-action-sheet>\n\t\t<van-overlay :show=\"show\" class-name=\"overlay\" />\n\t\t<van-loading v-if=\"show\" vertical>{{loadingText}}</van-loading>\n\t</div>\n</template>\n\n<script>\n\timport {NavBar,Row,Col,Checkbox,Collapse,CollapseItem,Button,Icon,ActionSheet,PasswordInput,NumberKeyboard,Toast,Overlay,Loading} from 'vant'\n\timport {Images} from '@/resources/index.js'\n\texport default{\n\t\tcomponents:{\n\t\t\t[NavBar.name]:NavBar,\n\t\t\t[Row.name]:Row,\n\t\t\t[Col.name]:Col,\n\t\t\t[Checkbox.name]:Checkbox,\n\t\t\t[Collapse.name]:Collapse,\n\t\t\t[CollapseItem.name]:CollapseItem,\n\t\t\t[Button.name]:Button,\n\t\t\t[Icon.name]:Icon,\n\t\t\t[ActionSheet.name]:ActionSheet,\n\t\t\t[PasswordInput.name]:PasswordInput,\n\t\t\t[NumberKeyboard.name]:NumberKeyboard,\n\t\t\t[Toast.name]:Toast,\n\t\t\t[Overlay.name]:Overlay,\n\t\t\t[Loading.name]:Loading\n\t\t},\n\t\tdata(){\n\t\t\treturn{\n\t\t\t\tdata:'',\n\t\t\t\tblockArr:[],\n\t\t\t\tactiveName:'1',\n\t\t\t\tchecked1:true,\n\t\t\t\tchecked2:false,\n\t\t\t\tchecked3:false,\n\t\t\t\tdowngrade:Images.shop.ic_down,\n\t\t\t\tshowActionSheet:false,\n\t\t\t\tpassword:'',\n\t\t\t\tshowKeyboard:true,\n\t\t\t\tshow:false,\n\t\t\t\tloadingText:'正在支付...'\n\t\t\t}\n\t\t},\n\t\tmethods:{\n\t\t\tgoBack(){\n\t\t\t\tthis.$router.push('/orderPage/unpaid/待付款')\n\t\t\t},\n\t\t\tupBtn(index){\n\t\t\t\tvar arr = this.blockArr\n\t\t\t\tvar item = arr[index]\n\t\t\t\tarr[index] = arr[index-1]\n\t\t\t\tarr[index-1] = item\n\t\t\t\tthis.blockArr.splice(index,1,arr[index])\n\t\t\t\tthis.blockArr.splice(index-1,1,arr[index-1])\n\t\t\t},\n\t\t\tdownBtn(index){\n\t\t\t\tvar arr = this.blockArr\n\t\t\t\tvar item = arr[index]\n\t\t\t\tarr[index] = arr[index+1]\n\t\t\t\tarr[index+1] = item\n\t\t\t\tthis.blockArr.splice(index,1,arr[index])\n\t\t\t\tthis.blockArr.splice(index+1,1,arr[index+1])\n\t\t\t},\n\t\t\tonSubmit(){\n\t\t\t\tthis.judgePaymentPW()\n\t\t\t},\n\t\t\tonInput(key){\n\t\t\t\tthis.password = (this.password + key).slice(0,6)\n\t\t\t\tif(this.password.length === 6){\n\t\t\t\t\tthis.$nextTick(()=>{\n\t\t\t\t\t\tthis.showActionSheet = false\n\t\t\t\t\t\tthis.show = true\n\t\t\t\t\t\tthis.loadingText = '正在支付...'\n\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\tUserID:this.$store.state.userID,\n\t\t\t\t\t\t\tOrderNo:this.data.OrderNo,\n\t\t\t\t\t\t\tTotalPay:this.totalPrice,\n\t\t\t\t\t\t\tPassword:this.password\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.activeName === '1') {\n\t\t\t\t\t\t\tdata.Type = 1\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.activeName === '2') {\n\t\t\t\t\t\t\tdata.Type = 3\n\t\t\t\t\t\t\tvar arr = []\n\t\t\t\t\t\t\tfor (let item of this.blockArr) {\n\t\t\t\t\t\t\t\tarr.push(item.ID)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdata.list = arr\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.activeName === '3') {\n\t\t\t\t\t\t\tdata.Type = 2\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar url = '/point/payWithPoint?token='+this.$store.state.token\n\t\t\t\t\t\tthis.axios.post(url,data).then((response)=>{\n\t\t\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t\t\t}else if (response.data.status === 1) {\n\t\t\t\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\t\t\t\tToast('支付成功')\n\t\t\t\t\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t\t\t\tthis.$router.push('/orderPage/unshipped/待发货')\n\t\t\t\t\t\t\t\t\t},500)\n\t\t\t\t\t\t\t\t},1000)\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\t\t\t\tToast(response.data.detail)\n\t\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t\t},1000)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).catch((response)=>{\n\t\t\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\t\t\tToast('网络请求出错，请稍候再试!')\n\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t},1000)\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\tonDelete(){\n\t\t\t\tthis.password = this.password.slice(0,this.password.length - 1)\n\t\t\t},\n\t\t\tclosed(){\n\t\t\t\tthis.password = ''\n\t\t\t},\n\t\t\tjudgePaymentPW(){\n\t\t\t\tvar url = '/user/getpaypwd?user_id='+this.$store.state.userID+'&token='+this.$store.state.token\n\t\t\t\tthis.axios.get(url).then((response)=>{\n\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t}else if (response.data.status === 1) {\n\t\t\t\t\t\tthis.showActionSheet = true\n\t\t\t\t\t} else{\n\t\t\t\t\t\tthis.$router.push('/tradingPassword')\n\t\t\t\t\t}\n\t\t\t\t}).catch((response)=>{\n\t\t\t\t\tToast('网络请求出错，请稍候再试!')\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tcomputed:{\n\t\t\ttotalPrice(){\n\t\t\t\tif (this.data.length) {\n\t\t\t\t\tvar totalPrice = 0\n\t\t\t\t\tfor (let item of this.data) {\n\t\t\t\t\t\ttotalPrice += item.TotalPrice\n\t\t\t\t\t}\n\t\t\t\t\treturn totalPrice \n\t\t\t\t} else{\n\t\t\t\t\treturn this.data.TotalPrice\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\twatch:{\n\t\t\tactiveName(){\n\t\t\t\tif (this.activeName === '1') {\n\t\t\t\t\tthis.checked1 = true\n\t\t\t\t\tthis.checked2 = this.checked3 = false\n\t\t\t\t}\n\t\t\t\tif (this.activeName === '2') {\n\t\t\t\t\tthis.checked2 = true\n\t\t\t\t\tthis.checked1 = this.checked3 = false\n\t\t\t\t}\n\t\t\t\tif (this.activeName === '3') {\n\t\t\t\t\tthis.checked3 = true\n\t\t\t\t\tthis.checked1 = this.checked2 = false\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tbeforeMount() {\n\t\t\tthis.data = this.$store.state.paymentData\n\t\t\tthis.blockArr = this.$store.state.blockArray.filter(val=>{\n\t\t\t\treturn val.Balance !== 0\n\t\t\t})\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t.van-nav-bar__arrow{\n\t\tfont-size: 1.5rem;\n\t\tcolor: #000000;\n\t}\n\t.container{\n\t\tmargin-top: 2.875rem;\n\t\tbackground: white;\n\t}\n\t.totalPrice{\n\t\tmargin-top: 0.625rem;\n\t\tfont-size: 1.125rem;\n\t}\n\t.totalPrice span{\n\t\tfont-size: 0.875rem;\n\t\tcolor: #999999;\n\t}\n\t.text{\n\t\tmargin-top: 0.625rem;\n\t\tfont-size: 0.6875rem;\n\t\topacity: 0.8;\n\t}\n\t.list{\n\t\tmargin-top: 0.625rem;\n\t}\n\t.btn{\n\t\tmargin-top: 0.625rem;\n\t\t\n\t}\n\t.van-button{\n\t\tmargin: 2rem auto;\n\t\twidth: 50%;\n\t}\n\t.blocklist{\n\t\ttext-align: left;\n\t\theight: 1.5rem;\n\t\tline-height: 1.5rem;\n\t}\n\t.blocklist .van-icon{\n\t\tfont-size: 1.5rem;\n\t}\n\t.van-number-keyboard{\n\t\tposition: relative;\n\t\tmargin-top: 0.625rem;\n\t}\n\t.overlay{\n\t\tbackground: rgba(0,0,0,0);\n\t}\n\t.van-loading{\n\t\tposition: absolute;\n\t\tleft: 40%;\n\t\ttop: 45%;\n\t}\n</style>\n"],"sourceRoot":"src/pages"}]}