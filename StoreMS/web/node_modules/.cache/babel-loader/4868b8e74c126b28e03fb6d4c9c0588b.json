{"remainingRequest":"/Users/student02/Desktop/youduitong1/node_modules/babel-loader/lib/index.js!/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/student02/Desktop/youduitong1/src/pages/setting/tradingPassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/student02/Desktop/youduitong1/src/pages/setting/tradingPassword.vue","mtime":1569494757000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _defineProperty from \"/Users/student02/Desktop/youduitong1/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"vant/es/loading/style\";\nimport _Loading from \"vant/es/loading\";\nimport \"vant/es/overlay/style\";\nimport _Overlay from \"vant/es/overlay\";\nimport \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\nimport \"vant/es/button/style\";\nimport _Button from \"vant/es/button\";\nimport \"vant/es/number-keyboard/style\";\nimport _NumberKeyboard from \"vant/es/number-keyboard\";\nimport \"vant/es/password-input/style\";\nimport _PasswordInput from \"vant/es/password-input\";\nimport \"core-js/modules/es6.function.name\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\n\nvar _components;\n\nexport default {\n  components: (_components = {}, _defineProperty(_components, _NavBar.name, _NavBar), _defineProperty(_components, _PasswordInput.name, _PasswordInput), _defineProperty(_components, _NumberKeyboard.name, _NumberKeyboard), _defineProperty(_components, _Button.name, _Button), _defineProperty(_components, _Toast.name, _Toast), _defineProperty(_components, _Overlay.name, _Overlay), _defineProperty(_components, _Loading.name, _Loading), _components),\n  data: function data() {\n    return {\n      show: false,\n      loadingText: '修改中...',\n      isFirst: false,\n      setText1: '输入支付密码',\n      setText2: '输入原支付密码',\n      password1: '',\n      password2: '',\n      password3: '',\n      showKeyboard: true\n    };\n  },\n  methods: {\n    goBack: function goBack() {\n      this.$router.back();\n    },\n    judgePaymentPW: function judgePaymentPW() {\n      var _this = this;\n\n      var url = '/user/getpaypwd?user_id=' + this.$store.state.userID + '&token=' + this.$store.state.token;\n      this.axios.get(url).then(function (response) {\n        if (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n          _Toast('登陆过期，请重新登录');\n\n          _this.$router.push('/login');\n        } else if (response.data.status === 1) {\n          _this.isFirst = false;\n          _this.setText2 = '输入当前支付密码';\n        } else {\n          _this.isFirst = true;\n          _this.setText1 = '设置新的支付密码';\n        }\n      }).catch(function (response) {\n        _Toast('网络请求出错，请稍候再试!');\n      });\n    },\n    onInput: function onInput(key) {\n      var _this2 = this;\n\n      if (this.setText1 === '设置新的支付密码') {\n        this.password1 = (this.password1 + key).slice(0, 6);\n\n        if (this.password1.length === 6) {\n          this.$nextTick(function () {\n            _this2.setText1 = '确认新的支付密码';\n          });\n        }\n      }\n\n      if (this.setText1 === '确认新的支付密码') {\n        this.password2 = (this.password2 + key).slice(0, 6);\n      }\n\n      if (this.setText2 === '输入当前支付密码') {\n        this.password1 = (this.password1 + key).slice(0, 6);\n\n        if (this.password1.length === 6) {\n          this.$nextTick(function () {\n            _this2.setText2 = '输入新的支付密码';\n          });\n        }\n      }\n\n      if (this.setText2 === '输入新的支付密码') {\n        this.password2 = (this.password2 + key).slice(0, 6);\n\n        if (this.password2.length === 6) {\n          this.$nextTick(function () {\n            _this2.setText2 = '确认新的支付密码';\n          });\n        }\n      }\n\n      if (this.setText2 === '确认新的支付密码') {\n        this.password3 = (this.password3 + key).slice(0, 6);\n      }\n    },\n    onDelete: function onDelete() {\n      if (this.setText1 === '设置新的支付密码') {\n        this.password1 = this.password1.slice(0, this.password1.length - 1);\n      }\n\n      if (this.setText1 === '确认新的支付密码') {\n        this.password2 = this.password2.slice(0, this.password2.length - 1);\n      }\n\n      if (this.setText2 === '输入当前支付密码') {\n        this.password1 = this.password1.slice(0, this.password1.length - 1);\n      }\n\n      if (this.setText2 === '输入新的支付密码') {\n        this.password2 = this.password2.slice(0, this.password2.length - 1);\n      }\n\n      if (this.setText2 === '确认新的支付密码') {\n        this.password3 = this.password3.slice(0, this.password3.length - 1);\n      }\n    },\n    onSubmit: function onSubmit() {\n      var _this3 = this;\n\n      if (this.setText1 === '确认新的支付密码') {\n        if (this.checkPwd()) {\n          this.show = true;\n          this.loadingText = '正在设置...';\n          var url = '/user/setpaypwd?user_id=' + this.$store.state.userID + '&password=' + this.password2 + '&token=' + this.$store.state.token;\n          this.axios.get(url).then(function (response) {\n            if (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n              _Toast('登陆过期，请重新登录');\n\n              _this3.$router.push('/login');\n            } else if (response.data.status === 1) {\n              setTimeout(function () {\n                _this3.loadingText = '设置成功';\n                setTimeout(function () {\n                  _this3.show = false;\n\n                  _this3.$router.back();\n                }, 500);\n              }, 1000);\n            } else {\n              setTimeout(function () {\n                _Toast('密码修改失败，请重试');\n\n                _this3.show = false;\n              }, 1000);\n            }\n          }).catch(function (response) {\n            setTimeout(function () {\n              _Toast('网络请求出错，请稍候再试!');\n\n              _this3.show = false;\n            }, 1000);\n          });\n        }\n      }\n\n      if (this.setText2 === '确认新的支付密码') {\n        if (this.checkPwd()) {\n          this.show = true;\n          this.loadingText = '修改中...';\n          var url = '/user/updatepaypwd?user_id=' + this.$store.state.userID + '&oldPwd=' + this.password1 + '&newPwd=' + this.password3 + '&token=' + this.$store.state.token;\n          this.axios.get(url).then(function (response) {\n            if (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n              _Toast('登陆过期，请重新登录');\n\n              _this3.$router.push('/login');\n            } else if (response.data.status === 1) {\n              setTimeout(function () {\n                _this3.loadingText = '修改成功';\n                setTimeout(function () {\n                  _this3.show = false;\n\n                  _this3.$router.back();\n                }, 500);\n              }, 1000);\n            } else {\n              setTimeout(function () {\n                _Toast('密码修改失败，请重试');\n\n                _this3.show = false;\n              }, 1000);\n            }\n          }).catch(function (response) {\n            setTimeout(function () {\n              _Toast('网络请求出错，请稍候再试!');\n\n              _this3.show = false;\n            }, 1000);\n          });\n        }\n      }\n    },\n    checkPwd: function checkPwd() {\n      if (this.setText1 === '确认新的支付密码') {\n        if (this.password1 !== this.password2) {\n          _Toast('新密码不一致');\n\n          return false;\n        }\n\n        return true;\n      }\n\n      if (this.setText2 === '确认新的支付密码') {\n        if (this.password2 !== this.password3) {\n          _Toast('新密码不一致');\n\n          return false;\n        }\n\n        if (this.password1 === this.password3) {\n          _Toast('新密码与原密码不能相同');\n\n          return false;\n        }\n\n        return true;\n      }\n    }\n  },\n  beforeMount: function beforeMount() {\n    this.judgePaymentPW();\n  }\n};",{"version":3,"sources":["tradingPassword.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<div>\n\t\t<van-nav-bar\n\t\t\ttitle=\"支付密码\"\n\t\t\tleft-arrow\n\t\t\t@click-left=\"goBack\"\n\t\t/>\n\t\t\n\t\t<div v-if=\"isFirst\">\n\t\t\t<div v-if=\"setText1 === '设置新的支付密码'\">\n\t\t\t\t<p style=\"font-size: 0.75rem; opacity: 0.7;text-align: center;\">设置新的支付密码</p>\n\t\t\t\t<van-password-input\n\t\t\t\t\t:value=\"password1\"\n\t\t\t\t\t:focused=\"showKeyboard\"\n\t\t\t\t\t@focus=\"showKeyboard = true\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div v-else>\n\t\t\t\t<p style=\"font-size: 0.75rem; opacity: 0.7;text-align: center;\">确认新的支付密码</p>\n\t\t\t\t<van-password-input\n\t\t\t\t\t:value=\"password2\"\n\t\t\t\t\t:focused=\"showKeyboard\"\n\t\t\t\t\t@focus=\"showKeyboard = true\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-else>\n\t\t\t<div v-if=\"setText2 === '输入当前支付密码'\">\n\t\t\t\t<p style=\"font-size: 0.75rem; opacity: 0.7;text-align: center;\">输入当前支付密码</p>\n\t\t\t\t<van-password-input\n\t\t\t\t\t:value=\"password1\"\n\t\t\t\t\t:focused=\"showKeyboard\"\n\t\t\t\t\t@focus=\"showKeyboard = true\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div v-else-if=\"setText2 === '输入新的支付密码'\">\n\t\t\t\t<p style=\"font-size: 0.75rem; opacity: 0.7;text-align: center;\">输入新的支付密码</p>\n\t\t\t\t<van-password-input\n\t\t\t\t\t:value=\"password2\"\n\t\t\t\t\t:focused=\"showKeyboard\"\n\t\t\t\t\t@focus=\"showKeyboard = true\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div v-else>\n\t\t\t\t<p style=\"font-size: 0.75rem; opacity: 0.7;text-align: center;\">确认新的支付密码</p>\n\t\t\t\t<van-password-input\n\t\t\t\t\t:value=\"password3\"\n\t\t\t\t\t:focused=\"showKeyboard\"\n\t\t\t\t\t@focus=\"showKeyboard = true\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t\t<van-number-keyboard\n\t\t\t:show=\"showKeyboard\"\n\t\t\ttheme=\"custom\"\n\t\t\tclose-button-text=\"完成\"\n\t\t\t@input=\"onInput\"\n\t\t\t@delete=\"onDelete\"\n\t\t\t@close=\"onSubmit\"\n\t\t/>\n\t\t\n\t\t\n\t\t<van-overlay :show=\"show\" class-name=\"overlay\" />\n\t\t<van-loading v-if=\"show\" vertical>{{loadingText}}</van-loading>\n\t</div>\n</template>\n\n<script>\n\timport {NavBar,PasswordInput,NumberKeyboard,Button,Toast,Overlay,Loading} from 'vant'\n\texport default{\n\t\tcomponents:{\n\t\t\t[NavBar.name]:NavBar,\n\t\t\t[PasswordInput.name]:PasswordInput,\n\t\t\t[NumberKeyboard.name]:NumberKeyboard,\n\t\t\t[Button.name]:Button,\n\t\t\t[Toast.name]:Toast,\n\t\t\t[Overlay.name]:Overlay,\n\t\t\t[Loading.name]:Loading\n\t\t},\n\t\tdata(){\n\t\t\treturn{\n\t\t\t\tshow:false,\n\t\t\t\tloadingText:'修改中...',\n\t\t\t\tisFirst:false,\n\t\t\t\tsetText1:'输入支付密码',\n\t\t\t\tsetText2:'输入原支付密码',\n\t\t\t\tpassword1:'',\n\t\t\t\tpassword2:'',\n\t\t\t\tpassword3:'',\n\t\t\t\tshowKeyboard:true,\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t\tmethods:{\n\t\t\tgoBack(){\n\t\t\t\tthis.$router.back()\n\t\t\t},\n\t\t\tjudgePaymentPW(){\n\t\t\t\tvar url = '/user/getpaypwd?user_id='+this.$store.state.userID+'&token='+this.$store.state.token\n\t\t\t\tthis.axios.get(url).then((response)=>{\n\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t}else if (response.data.status === 1) {\n\t\t\t\t\t\tthis.isFirst = false\n\t\t\t\t\t\tthis.setText2 = '输入当前支付密码'\n\t\t\t\t\t} else{\n\t\t\t\t\t\tthis.isFirst = true\n\t\t\t\t\t\tthis.setText1 = '设置新的支付密码'\n\t\t\t\t\t}\n\t\t\t\t}).catch((response)=>{\n\t\t\t\t\tToast('网络请求出错，请稍候再试!')\n\t\t\t\t})\n\t\t\t},\n\t\t\tonInput(key){\n\t\t\t\tif (this.setText1 === '设置新的支付密码') {\n\t\t\t\t\tthis.password1 = (this.password1 + key).slice(0,6)\n\t\t\t\t\tif (this.password1.length === 6) {\n\t\t\t\t\t\tthis.$nextTick(()=>{\n\t\t\t\t\t\t\tthis.setText1 = '确认新的支付密码'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t} \n\t\t\t\tif (this.setText1 === '确认新的支付密码') {\n\t\t\t\t\tthis.password2 = (this.password2 + key).slice(0,6)\n\t\t\t\t}\n\t\t\t\tif (this.setText2 === '输入当前支付密码') {\n\t\t\t\t\tthis.password1 = (this.password1 + key).slice(0,6)\n\t\t\t\t\tif (this.password1.length === 6) {\n\t\t\t\t\t\tthis.$nextTick(()=>{\n\t\t\t\t\t\t\tthis.setText2 = '输入新的支付密码'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this.setText2 === '输入新的支付密码') {\n\t\t\t\t\tthis.password2 = (this.password2 + key).slice(0,6)\n\t\t\t\t\tif (this.password2.length === 6) {\n\t\t\t\t\t\tthis.$nextTick(()=>{\n\t\t\t\t\t\t\tthis.setText2 = '确认新的支付密码'\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this.setText2 === '确认新的支付密码') {\n\t\t\t\t\tthis.password3 = (this.password3 + key).slice(0,6)\n\t\t\t\t}\n\t\t\t},\n\t\t\tonDelete(){\n\t\t\t\tif (this.setText1 === '设置新的支付密码') {\n\t\t\t\t\tthis.password1 = this.password1.slice(0,this.password1.length - 1)\n\t\t\t\t} \n\t\t\t\tif (this.setText1 === '确认新的支付密码') {\n\t\t\t\t\tthis.password2 = this.password2.slice(0,this.password2.length - 1)\n\t\t\t\t}\n\t\t\t\tif (this.setText2 === '输入当前支付密码') {\n\t\t\t\t\tthis.password1 = this.password1.slice(0,this.password1.length - 1)\n\t\t\t\t}\n\t\t\t\tif (this.setText2 === '输入新的支付密码') {\n\t\t\t\t\tthis.password2 = this.password2.slice(0,this.password2.length - 1)\n\t\t\t\t}\n\t\t\t\tif (this.setText2 === '确认新的支付密码') {\n\t\t\t\t\tthis.password3 = this.password3.slice(0,this.password3.length - 1)\n\t\t\t\t}\n\t\t\t},\n\t\t\tonSubmit(){\n\t\t\t\tif (this.setText1 === '确认新的支付密码') {\n\t\t\t\t\tif (this.checkPwd()) {\n\t\t\t\t\t\tthis.show = true\n\t\t\t\t\t\tthis.loadingText = '正在设置...'\n\t\t\t\t\t\tvar url = '/user/setpaypwd?user_id='+this.$store.state.userID+'&password='+this.password2+'&token='+this.$store.state.token\n\t\t\t\t\t\tthis.axios.get(url).then((response)=>{\n\t\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t\t\t}else if (response.data.status === 1) {\n\t\t\t\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\t\t\t\tthis.loadingText = '设置成功'\n\t\t\t\t\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t\t\t\tthis.$router.back()\n\t\t\t\t\t\t\t\t\t},500)\n\t\t\t\t\t\t\t\t},1000)\n\t\t\t\t\t\t\t} else{\n\t\t\t\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\t\t\t\tToast('密码修改失败，请重试')\n\t\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t\t},1000)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).catch((response)=>{\n\t\t\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\t\t\tToast('网络请求出错，请稍候再试!')\n\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t},1000)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this.setText2 === '确认新的支付密码') {\n\t\t\t\t\tif (this.checkPwd()) {\n\t\t\t\t\t\tthis.show = true\n\t\t\t\t\t\tthis.loadingText = '修改中...'\n\t\t\t\t\t\tvar url = '/user/updatepaypwd?user_id='+this.$store.state.userID+'&oldPwd='+this.password1+'&newPwd='+this.password3+'&token='+this.$store.state.token\n\t\t\t\t\t\tthis.axios.get(url).then((response)=>{\n\t\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t\t\t}else if (response.data.status === 1) {\n\t\t\t\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\t\t\t\tthis.loadingText = '修改成功'\n\t\t\t\t\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t\t\t\tthis.$router.back()\n\t\t\t\t\t\t\t\t\t},500)\n\t\t\t\t\t\t\t\t},1000)\n\t\t\t\t\t\t\t} else{\n\t\t\t\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\t\t\t\tToast('密码修改失败，请重试')\n\t\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t\t},1000)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).catch((response)=>{\n\t\t\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\t\t\tToast('网络请求出错，请稍候再试!')\n\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t},1000)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tcheckPwd(){\n\t\t\t\tif (this.setText1 === '确认新的支付密码') {\n\t\t\t\t\tif(this.password1 !== this.password2){\n\t\t\t\t\t\tToast('新密码不一致')\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\t\t\t\t\treturn true\n\t\t\t\t} \n\t\t\t\tif (this.setText2 === '确认新的支付密码') {\n\t\t\t\t\tif (this.password2 !== this.password3) {\n\t\t\t\t\t\tToast('新密码不一致')\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\t\t\t\t\tif (this.password1 === this.password3) {\n\t\t\t\t\t\tToast('新密码与原密码不能相同')\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tbeforeMount() {\n\t\t\tthis.judgePaymentPW()\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t.van-nav-bar__arrow{\n\t\tcolor: black;\n\t\tfont-size: 1.2rem;\n\t}\n\t.overlay{\n\t\tbackground-color: rgba(0,0,0,0);\n\t}\n</style>\n"],"sourceRoot":"src/pages/setting"}]}