{"remainingRequest":"/Users/student02/Desktop/youduitong1/node_modules/babel-loader/lib/index.js!/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/student02/Desktop/youduitong1/src/pages/setting/modifyAddress.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/student02/Desktop/youduitong1/src/pages/setting/modifyAddress.vue","mtime":1567867723000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport _defineProperty from \"/Users/student02/Desktop/youduitong1/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"vant/es/loading/style\";\nimport _Loading from \"vant/es/loading\";\nimport \"vant/es/overlay/style\";\nimport _Overlay from \"vant/es/overlay\";\nimport \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\nimport \"vant/es/address-edit/style\";\nimport _AddressEdit from \"vant/es/address-edit\";\nimport \"vant/es/button/style\";\nimport _Button from \"vant/es/button\";\nimport \"core-js/modules/es6.function.name\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\n\nvar _components;\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport areaList from '@/utils/area.js';\nexport default {\n  components: (_components = {}, _defineProperty(_components, _NavBar.name, _NavBar), _defineProperty(_components, _Button.name, _Button), _defineProperty(_components, _AddressEdit.name, _AddressEdit), _defineProperty(_components, _Toast.name, _Toast), _defineProperty(_components, _Overlay.name, _Overlay), _defineProperty(_components, _Loading.name, _Loading), _components),\n  data: function data() {\n    return {\n      show: false,\n      loadingText: '',\n      title: '',\n      index: 0,\n      areaData: areaList,\n      searchResult: [],\n      addrID: '',\n      receiverName: '',\n      receiverMoblie: '',\n      receiverProvince: '',\n      receiverCity: '',\n      receiverCounty: '',\n      receiverAddr: '',\n      receiverCode: ''\n    };\n  },\n  methods: {\n    goBack: function goBack() {\n      this.$router.back();\n    },\n    onSaveAdd: function onSaveAdd(content) {\n      var _this = this;\n\n      var data = {\n        UserID: this.$store.state.userID,\n        ReceiverName: content.name,\n        ReceiverMobile: content.tel,\n        ReceiverProvince: content.province,\n        ReceiverCity: content.city,\n        ReceiverDistrict: content.county,\n        DetailAddress: content.addressDetail,\n        ReceiverZip: content.postalCode\n      };\n      this.show = true;\n      this.loadingText = '正在添加...';\n      var url = '/ship/addAddress?token=' + this.$store.state.token;\n      this.axios.post(url, data).then(function (response) {\n        if (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n          _Toast('登陆过期，请重新登录');\n\n          _this.$router.push('/login');\n        } else if (response.data.status === 1) {\n          _this.$store.commit(\"addReceiverItem\", response.data.obj);\n\n          setTimeout(function () {\n            _this.loadingText = '添加成功';\n            setTimeout(function () {\n              _this.show = false;\n\n              _this.$router.back();\n            }, 500);\n          }, 1000);\n        } else {\n          setTimeout(function () {\n            _Toast('地址添加失败，请重试');\n\n            setTimeout(function () {\n              _this.show = false;\n            }, 500);\n          }, 1000);\n        }\n      }).catch(function (responde) {\n        setTimeout(function () {\n          _Toast('网络请求出错，请重试');\n\n          setTimeout(function () {\n            _this.show = false;\n          }, 500);\n        }, 1000);\n      });\n    },\n    onSaveEdit: function onSaveEdit(content) {\n      var _this2 = this;\n\n      var data = {\n        UserID: this.$store.state.userID,\n        ID: this.addrID,\n        ReceiverName: content.name,\n        ReceiverMobile: content.tel,\n        ReceiverProvince: content.province,\n        ReceiverCity: content.city,\n        ReceiverDistrict: content.county,\n        DetailAddress: content.addressDetail,\n        ReceiverZip: content.postalCode\n      };\n      this.show = true;\n      this.loadingText = '正在修改...';\n      var url = '/ship/editAdd?token=' + this.$store.state.token;\n      this.axios.post(url, data).then(function (response) {\n        console.log(response);\n\n        if (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n          _Toast('登陆过期，请重新登录');\n\n          _this2.$router.push('/login');\n        } else if (response.data.status === 1) {\n          _this2.$store.commit({\n            type: 'modifyReceiverAddressList',\n            data: data,\n            index: _this2.index\n          });\n\n          setTimeout(function () {\n            _this2.loadingText = '修改成功';\n            setTimeout(function () {\n              _this2.show = false;\n\n              _this2.$router.back();\n            }, 500);\n          }, 1000);\n        } else {\n          setTimeout(function () {\n            _Toast('地址修改失败，请重试');\n\n            setTimeout(function () {\n              _this2.show = false;\n            }, 500);\n          }, 1000);\n        }\n      }).catch(function (response) {\n        setTimeout(function () {\n          _Toast('网络请求出错，请重试');\n\n          setTimeout(function () {\n            _this2.show = false;\n          }, 500);\n        }, 1000);\n      });\n    }\n  },\n  beforeRouteEnter: function beforeRouteEnter(to, from, next) {\n    next(function (vm) {\n      vm.title = to.meta.title;\n      var index = vm.$route.params.index;\n      vm.index = index;\n\n      if (to.meta.title === '修改地址') {\n        vm.addrID = vm.$store.state.receiverAddressList[index].ID;\n        vm.receiverName = vm.$store.state.receiverAddressList[index].ReceiverName;\n        vm.receiverMoblie = vm.$store.state.receiverAddressList[index].ReceiverMobile;\n        vm.receiverProvince = vm.$store.state.receiverAddressList[index].ReceiverProvince;\n        vm.receiverCity = vm.$store.state.receiverAddressList[index].ReceiverCity;\n        vm.receiverCounty = vm.$store.state.receiverAddressList[index].ReceiverDistrict;\n        vm.receiverAddr = vm.$store.state.receiverAddressList[index].DetailAddress;\n        vm.receiverCode = vm.$store.state.receiverAddressList[index].ReceiverZip;\n      } else {\n        vm.addrID = '';\n        vm.receiverName = '';\n        vm.receiverMoblie = '';\n        vm.receiverProvince = '';\n        vm.receiverCity = '';\n        vm.receiverCounty = '';\n        vm.receiverAddr = '';\n        vm.receiverCode = '';\n      }\n    });\n  },\n  computed: {\n    addressInfo: function addressInfo() {\n      var provinceCode = '';\n      var cityCode = '';\n      var areaCode = '';\n\n      for (var i in areaList.province_list) {\n        if (this.receiverProvince === areaList.province_list[i]) {\n          provinceCode = i.toString();\n        }\n      }\n\n      for (var _i in areaList.city_list) {\n        var key = _i.toString();\n\n        for (var j = 0; j < 2; j++) {\n          if (provinceCode[j] === key[j] && this.receiverCity === areaList.city_list[_i]) {\n            cityCode = key;\n          }\n        }\n      }\n\n      for (var _i2 in areaList.county_list) {\n        var key = _i2.toString();\n\n        for (var j = 0; j < 4; j++) {\n          if (cityCode[j] === key[j] && this.receiverCounty === areaList.county_list[_i2]) {\n            areaCode = key;\n          }\n        }\n      }\n\n      var data = {\n        id: this.addrID,\n        name: this.receiverName,\n        tel: this.receiverMoblie,\n        province: this.receiverProvince,\n        city: this.receiverCity,\n        county: this.receiverCounty,\n        addressDetail: this.receiverAddr,\n        areaCode: areaCode,\n        postalCode: this.receiverCode\n      };\n      return data;\n    }\n  }\n};",{"version":3,"sources":["modifyAddress.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<div >\n\t\t<van-nav-bar\n\t\t\t:title=\"title\"\n\t\t\tleft-arrow\n\t\t\tfixed\n\t\t\t@click-left=\"goBack\"\n\t\t/>\n\t\t\n\t\t<div v-if=\"title === '修改地址'\" style=\"margin-top: 46px;\">\n\t\t\t<van-address-edit\n\t\t\t\t:area-list=\"areaData\"\n\t\t\t\t:address-info=\"addressInfo\"\n\t\t\t\t:detail-rows=\"2\"\n\t\t\t\tshow-postal\n\t\t\t\t@save=\"onSaveEdit\"\n\t\t\t/>\n\t\t</div>\n\t\t\n\t\t<div v-if=\"title === '添加地址'\" style=\"margin-top: 46px;\">\n\t\t\t<van-address-edit\n\t\t\t\t:area-list=\"areaData\"\n\t\t\t\t:detail-rows=\"2\"\n\t\t\t\tshow-postal\n\t\t\t\t@save=\"onSaveAdd\"\n\t\t\t/>\n\t\t</div>\n\t\t\n\t\t\n\t\t\n\t\t<van-overlay :show=\"show\" class-name=\"overlay\" />\n\t\t<van-loading v-if=\"show\" vertical>{{loadingText}}</van-loading>\n\t</div>\n</template>\n\n<script>\n\timport areaList from '@/utils/area.js'\n\timport {NavBar,Button,AddressEdit,Toast,Overlay,Loading} from 'vant'\n\texport default{\n\t\tcomponents:{\n\t\t\t[NavBar.name]:NavBar,\n\t\t\t[Button.name]:Button,\n\t\t\t[AddressEdit.name]:AddressEdit,\n\t\t\t[Toast.name]:Toast,\n\t\t\t[Overlay.name]:Overlay,\n\t\t\t[Loading.name]:Loading\n\t\t},\n\t\tdata(){\n\t\t\treturn {\n\t\t\t\tshow:false,\n\t\t\t\tloadingText:'',\n\t\t\t\ttitle:'',\n\t\t\t\tindex:0,\n\t\t\t\tareaData:areaList,\n\t\t\t\tsearchResult:[],\n\t\t\t\taddrID:'',\n\t\t\t\treceiverName:'',\n\t\t\t\treceiverMoblie:'',\n\t\t\t\treceiverProvince:'',\n\t\t\t\treceiverCity:'',\n\t\t\t\treceiverCounty:'',\n\t\t\t\treceiverAddr:'',\n\t\t\t\treceiverCode:''\n\t\t\t}\n\t\t},\n\t\tmethods:{\n\t\t\tgoBack(){\n\t\t\t\tthis.$router.back()\n\t\t\t},\n\t\t\tonSaveAdd(content){\n\t\t\t\tvar data = {\n\t\t\t\t\tUserID:this.$store.state.userID,\n\t\t\t\t\tReceiverName:content.name,\n\t\t\t\t\tReceiverMobile:content.tel,\n\t\t\t\t\tReceiverProvince:content.province,\n\t\t\t\t\tReceiverCity:content.city,\n\t\t\t\t\tReceiverDistrict:content.county,\n\t\t\t\t\tDetailAddress:content.addressDetail,\n\t\t\t\t\tReceiverZip:content.postalCode,\n\t\t\t\t}\n\t\t\t\tthis.show = true\n\t\t\t\tthis.loadingText = '正在添加...'\n\t\t\t\tvar url = '/ship/addAddress?token='+this.$store.state.token\n\t\t\t\tthis.axios.post(url,data).then((response)=>{\n\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t}else if(response.data.status === 1){\n\t\t\t\t\t\tthis.$store.commit(\"addReceiverItem\",response.data.obj)\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.loadingText = '添加成功'\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t\tthis.$router.back()\n\t\t\t\t\t\t\t}, 500)\n\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t}else{\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tToast('地址添加失败，请重试')\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t}, 500)\n\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t}\n\t\t\t\t}).catch((responde)=>{\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tToast('网络请求出错，请重试')\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t}, 500)\n\t\t\t\t\t}, 1000)\n\t\t\t\t})\n\t\t\t},\n\t\t\tonSaveEdit(content){\n\t\t\t\tvar data = {\n\t\t\t\t\tUserID:this.$store.state.userID,\n\t\t\t\t\tID:this.addrID,\n\t\t\t\t\tReceiverName:content.name,\n\t\t\t\t\tReceiverMobile:content.tel,\n\t\t\t\t\tReceiverProvince:content.province,\n\t\t\t\t\tReceiverCity:content.city,\n\t\t\t\t\tReceiverDistrict:content.county,\n\t\t\t\t\tDetailAddress:content.addressDetail,\n\t\t\t\t\tReceiverZip:content.postalCode,\n\t\t\t\t}\n\t\t\t\tthis.show = true\n\t\t\t\tthis.loadingText = '正在修改...'\n\t\t\t\tvar url = '/ship/editAdd?token='+this.$store.state.token\n\t\t\t\tthis.axios.post(url,data).then((response)=>{\n\t\t\t\t\tconsole.log(response)\n\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t}else if(response.data.status === 1){\n\t\t\t\t\t\tthis.$store.commit({type:'modifyReceiverAddressList',data:data,index:this.index})\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.loadingText = '修改成功'\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t\tthis.$router.back()\n\t\t\t\t\t\t\t}, 500)\n\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t}else{\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tToast('地址修改失败，请重试')\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t}, 500)\n\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t}\n\t\t\t\t}).catch((response)=>{\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tToast('网络请求出错，请重试')\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t}, 500)\n\t\t\t\t\t}, 1000)\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tbeforeRouteEnter(to,from,next){\n\t\t\tnext(vm=>{\n\t\t\t\tvm.title = to.meta.title\n\t\t\t\tvar index = vm.$route.params.index\n\t\t\t\tvm.index = index\n\t\t\t\tif (to.meta.title === '修改地址') {\n\t\t\t\t\tvm.addrID = vm.$store.state.receiverAddressList[index].ID\n\t\t\t\t\tvm.receiverName = vm.$store.state.receiverAddressList[index].ReceiverName\n\t\t\t\t\tvm.receiverMoblie = vm.$store.state.receiverAddressList[index].ReceiverMobile\n\t\t\t\t\tvm.receiverProvince = vm.$store.state.receiverAddressList[index].ReceiverProvince\n\t\t\t\t\tvm.receiverCity = vm.$store.state.receiverAddressList[index].ReceiverCity\n\t\t\t\t\tvm.receiverCounty = vm.$store.state.receiverAddressList[index].ReceiverDistrict\n\t\t\t\t\tvm.receiverAddr = vm.$store.state.receiverAddressList[index].DetailAddress\n\t\t\t\t\tvm.receiverCode = vm.$store.state.receiverAddressList[index].ReceiverZip\n\t\t\t\t} else{\n\t\t\t\t\tvm.addrID = ''\n\t\t\t\t\tvm.receiverName = ''\n\t\t\t\t\tvm.receiverMoblie = ''\n\t\t\t\t\tvm.receiverProvince = ''\n\t\t\t\t\tvm.receiverCity = ''\n\t\t\t\t\tvm.receiverCounty = ''\n\t\t\t\t\tvm.receiverAddr = ''\n\t\t\t\t\tvm.receiverCode = ''\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tcomputed:{\n\t\t\taddressInfo(){\n\t\t\t\tvar provinceCode = ''\n\t\t\t\tvar cityCode = ''\n\t\t\t\tvar areaCode = ''\n\t\t\t\tfor (let i in areaList.province_list) {\n\t\t\t\t\tif (this.receiverProvince === areaList.province_list[i]) {\n\t\t\t\t\t\tprovinceCode = i.toString()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let i in areaList.city_list) {\n\t\t\t\t\tvar key = i.toString()\n\t\t\t\t\tfor (var j = 0; j < 2; j++) {\n\t\t\t\t\t\tif (provinceCode[j] === key[j] && this.receiverCity === areaList.city_list[i]) {\n\t\t\t\t\t\t\tcityCode = key\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let i in areaList.county_list) {\n\t\t\t\t\tvar key = i.toString()\n\t\t\t\t\tfor (var j = 0; j < 4; j++) {\n\t\t\t\t\t\tif (cityCode[j] === key[j] && this.receiverCounty === areaList.county_list[i]) {\n\t\t\t\t\t\t\tareaCode = key\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar data = {\n\t\t\t\t\tid:this.addrID,\n\t\t\t\t\tname:this.receiverName,\n\t\t\t\t\ttel:this.receiverMoblie,\n\t\t\t\t\tprovince:this.receiverProvince,\n\t\t\t\t\tcity:this.receiverCity,\n\t\t\t\t\tcounty:this.receiverCounty,\n\t\t\t\t\taddressDetail:this.receiverAddr,\n\t\t\t\t\tareaCode:areaCode,\n\t\t\t\t\tpostalCode:this.receiverCode\n\t\t\t\t}\n\t\t\t\treturn data\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t.van-nav-bar__arrow{\n\t\tcolor: black;\n\t\tfont-size: 1.2rem;\n\t}\n\t.overlay{\n\t\tbackground-color: rgba(0,0,0,0);\n\t}\n\t.van-address-edit{\n\t\ttext-align: left;\n\t}\n</style>\n"],"sourceRoot":"src/pages/setting"}]}