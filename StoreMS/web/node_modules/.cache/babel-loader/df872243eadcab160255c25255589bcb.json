{"remainingRequest":"/Users/student02/Desktop/youduitong1/node_modules/babel-loader/lib/index.js!/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/student02/Desktop/youduitong1/src/pages/cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/student02/Desktop/youduitong1/src/pages/cart.vue","mtime":1571123385000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport _defineProperty from \"/Users/student02/Desktop/youduitong1/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\nimport \"vant/es/submit-bar/style\";\nimport _SubmitBar from \"vant/es/submit-bar\";\nimport \"vant/es/col/style\";\nimport _Col from \"vant/es/col\";\nimport \"vant/es/row/style\";\nimport _Row from \"vant/es/row\";\nimport \"vant/es/button/style\";\nimport _Button from \"vant/es/button\";\nimport \"vant/es/stepper/style\";\nimport _Stepper from \"vant/es/stepper\";\nimport \"vant/es/image/style\";\nimport _Image from \"vant/es/image\";\nimport \"vant/es/checkbox/style\";\nimport _Checkbox from \"vant/es/checkbox\";\nimport \"core-js/modules/es6.function.name\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\n\nvar _components;\n\nexport default {\n  components: (_components = {}, _defineProperty(_components, _NavBar.name, _NavBar), _defineProperty(_components, _Checkbox.name, _Checkbox), _defineProperty(_components, _Image.name, _Image), _defineProperty(_components, _Stepper.name, _Stepper), _defineProperty(_components, _Button.name, _Button), _defineProperty(_components, _Row.name, _Row), _defineProperty(_components, _Col.name, _Col), _defineProperty(_components, _SubmitBar.name, _SubmitBar), _defineProperty(_components, _Toast.name, _Toast), _components),\n  data: function data() {\n    return {\n      checkAll: true,\n      cartList: []\n    };\n  },\n  methods: {\n    goBack: function goBack() {\n      this.$store.commit('changeTabbarActive', this.$store.state.fromPage);\n      this.$router.back();\n    },\n    onSubmit: function onSubmit() {\n      var hasChecked = this.$store.state.allDatas.data.every(function (val) {\n        return val.Checked === false;\n      });\n\n      if (!hasChecked) {\n        this.$router.push('/confirmOrder');\n      } else {\n        _Toast('还没有选择商品');\n      }\n    },\n    change: function change(item, index) {\n      var _this = this;\n\n      var data = {\n        UserID: this.$store.state.userID,\n        ProductID: item.ProductID,\n        Quantity: item.Quantity,\n        Checked: item.Checked\n      };\n      var url = '/car/update?token=' + this.$store.state.token;\n      this.axios.post(url, data).then(function (response) {\n        if (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n          _Toast('登陆过期，请重新登录');\n\n          _this.$router.push('/login');\n        } else if (response.data.status === 1) {\n          var _iteratorNormalCompletion = true;\n          var _didIteratorError = false;\n          var _iteratorError = undefined;\n\n          try {\n            for (var _iterator = _this.cartList[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n              var val = _step.value;\n\n              if (val['Checked']) {\n                _this.checkAll = true;\n\n                _this.$store.commit('checkAll', _this.checkAll);\n              } else {\n                _this.checkAll = false;\n\n                _this.$store.commit('checkAll', _this.checkAll);\n              }\n            }\n          } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion && _iterator.return != null) {\n                _iterator.return();\n              }\n            } finally {\n              if (_didIteratorError) {\n                throw _iteratorError;\n              }\n            }\n          }\n        }\n      }).catch(function (response) {\n        _Toast('网络请求出错，请重试');\n      });\n    },\n    getUserCartDetail: function getUserCartDetail() {\n      var _this2 = this;\n\n      var url = '/cart/get?user_id=' + this.$store.state.userID + '&token=' + this.$store.state.token;\n      this.axios.get(url).then(function (response) {\n        if (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n          _Toast('登陆过期，请重新登录');\n\n          _this2.$router.push('/login');\n        } else if (response.data.status === 1) {\n          _this2.cartList = response.data.info;\n\n          _this2.$store.commit('allDatasData', response.data.info);\n        }\n      }).catch(function (response) {\n        _Toast('网络请求出错，请重试');\n      });\n    },\n    checkedAll: function checkedAll() {\n      var _this3 = this;\n\n      this.checkAll = !this.checkAll;\n\n      if (this.checkAll) {\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = this.cartList[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var val = _step2.value;\n            val['Checked'] = true;\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n      } else {\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = undefined;\n\n        try {\n          for (var _iterator3 = this.cartList[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var _val = _step3.value;\n            _val['Checked'] = false;\n          }\n        } catch (err) {\n          _didIteratorError3 = true;\n          _iteratorError3 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n              _iterator3.return();\n            }\n          } finally {\n            if (_didIteratorError3) {\n              throw _iteratorError3;\n            }\n          }\n        }\n      }\n\n      var url = '/product/checkAll?user_id=' + this.$store.state.userID + '&state=' + this.checkAll + '&token=' + this.$store.state.token;\n      this.axios.get(url).then(function (response) {\n        _this3.$store.commit('checkAll', _this3.checkAll);\n      }).catch(function (response) {\n        _Toast('网络请求出错，请重试');\n      });\n    },\n    deleteFromCart: function deleteFromCart(id, index) {\n      var _this4 = this;\n\n      var url = '/product/deleteProduct?id=' + id + '&token=' + this.$store.state.token;\n      this.axios.get(url).then(function (response) {\n        if (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n          _Toast('登陆过期，请重新登录');\n\n          _this4.$router.push('/login');\n        } else if (response.data.status === 1) {\n          _this4.$store.commit('deleteFromCartLocal', index);\n\n          _Toast('删除成功');\n        } else {\n          _Toast('删除失败，请重试');\n        }\n      }).catch(function (response) {\n        _Toast('网络请求出错，请重试');\n      });\n    }\n  },\n  beforeMount: function beforeMount() {\n    this.$store.commit('allDatasData', []);\n    this.checkAll = this.$store.state.checkAll;\n    this.getUserCartDetail();\n  },\n  computed: {\n    totalPrice: function totalPrice() {\n      var totalPrice = 0;\n      var _iteratorNormalCompletion4 = true;\n      var _didIteratorError4 = false;\n      var _iteratorError4 = undefined;\n\n      try {\n        for (var _iterator4 = this.cartList[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n          var item = _step4.value;\n\n          if (item.Checked) {\n            totalPrice += item.Price * item.Quantity * 100;\n          }\n        }\n      } catch (err) {\n        _didIteratorError4 = true;\n        _iteratorError4 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n            _iterator4.return();\n          }\n        } finally {\n          if (_didIteratorError4) {\n            throw _iteratorError4;\n          }\n        }\n      }\n\n      return totalPrice;\n    }\n  }\n};",{"version":3,"sources":["cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA,eAAA;AACA,EAAA,UAAA,kDACA,QAAA,IADA,yCAEA,UAAA,IAFA,2CAGA,OAAA,IAHA,wCAIA,SAAA,IAJA,0CAKA,QAAA,IALA,yCAMA,KAAA,IANA,sCAOA,KAAA,IAPA,sCAQA,WAAA,IARA,4CASA,OAAA,IATA,uBADA;AAYA,EAAA,IAZA,kBAYA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,IADA;AAEA,MAAA,QAAA,EAAA;AAFA,KAAA;AAIA,GAjBA;AAkBA,EAAA,OAAA,EAAA;AACA,IAAA,MADA,oBACA;AACA,WAAA,MAAA,CAAA,MAAA,CAAA,oBAAA,EAAA,KAAA,MAAA,CAAA,KAAA,CAAA,QAAA;AACA,WAAA,OAAA,CAAA,IAAA;AACA,KAJA;AAKA,IAAA,QALA,sBAKA;AACA,UAAA,UAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,KAAA,CAAA,UAAA,GAAA,EAAA;AACA,eAAA,GAAA,CAAA,OAAA,KAAA,KAAA;AACA,OAFA,CAAA;;AAGA,UAAA,CAAA,UAAA,EAAA;AACA,aAAA,OAAA,CAAA,IAAA,CAAA,eAAA;AACA,OAFA,MAEA;AACA,eAAA,SAAA;AACA;AACA,KAdA;AAeA,IAAA,MAfA,kBAeA,IAfA,EAeA,KAfA,EAeA;AAAA;;AACA,UAAA,IAAA,GAAA;AACA,QAAA,MAAA,EAAA,KAAA,MAAA,CAAA,KAAA,CAAA,MADA;AAEA,QAAA,SAAA,EAAA,IAAA,CAAA,SAFA;AAGA,QAAA,QAAA,EAAA,IAAA,CAAA,QAHA;AAIA,QAAA,OAAA,EAAA,IAAA,CAAA;AAJA,OAAA;AAMA,UAAA,GAAA,GAAA,uBAAA,KAAA,MAAA,CAAA,KAAA,CAAA,KAAA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,GAAA,EAAA,IAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,YAAA,QAAA,CAAA,IAAA,CAAA,MAAA,IAAA,QAAA,CAAA,IAAA,CAAA,MAAA,KAAA,cAAA,EAAA;AACA,iBAAA,YAAA;;AACA,UAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA,SAHA,MAGA,IAAA,QAAA,CAAA,IAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AAAA;AAAA;AAAA;;AAAA;AACA,iCAAA,KAAA,CAAA,QAAA,8HAAA;AAAA,kBAAA,GAAA;;AACA,kBAAA,GAAA,CAAA,SAAA,CAAA,EAAA;AACA,gBAAA,KAAA,CAAA,QAAA,GAAA,IAAA;;AACA,gBAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,UAAA,EAAA,KAAA,CAAA,QAAA;AACA,eAHA,MAGA;AACA,gBAAA,KAAA,CAAA,QAAA,GAAA,KAAA;;AACA,gBAAA,KAAA,CAAA,MAAA,CAAA,MAAA,CAAA,UAAA,EAAA,KAAA,CAAA,QAAA;AACA;AACA;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA,OAfA,EAeA,KAfA,CAeA,UAAA,QAAA,EAAA;AACA,eAAA,YAAA;AACA,OAjBA;AAkBA,KAzCA;AA0CA,IAAA,iBA1CA,+BA0CA;AAAA;;AACA,UAAA,GAAA,GAAA,uBAAA,KAAA,MAAA,CAAA,KAAA,CAAA,MAAA,GAAA,SAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,KAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,YAAA,QAAA,CAAA,IAAA,CAAA,MAAA,IAAA,QAAA,CAAA,IAAA,CAAA,MAAA,KAAA,cAAA,EAAA;AACA,iBAAA,YAAA;;AACA,UAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA,SAHA,MAGA,IAAA,QAAA,CAAA,IAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA;;AACA,UAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,cAAA,EAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA;AACA,OARA,EAQA,KARA,CAQA,UAAA,QAAA,EAAA;AACA,eAAA,YAAA;AACA,OAVA;AAWA,KAvDA;AAwDA,IAAA,UAxDA,wBAwDA;AAAA;;AACA,WAAA,QAAA,GAAA,CAAA,KAAA,QAAA;;AACA,UAAA,KAAA,QAAA,EAAA;AAAA;AAAA;AAAA;;AAAA;AACA,gCAAA,KAAA,QAAA,mIAAA;AAAA,gBAAA,GAAA;AACA,YAAA,GAAA,CAAA,SAAA,CAAA,GAAA,IAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA,OAJA,MAIA;AAAA;AAAA;AAAA;;AAAA;AACA,gCAAA,KAAA,QAAA,mIAAA;AAAA,gBAAA,IAAA;AACA,YAAA,IAAA,CAAA,SAAA,CAAA,GAAA,KAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;AACA,UAAA,GAAA,GAAA,+BAAA,KAAA,MAAA,CAAA,KAAA,CAAA,MAAA,GAAA,SAAA,GAAA,KAAA,QAAA,GAAA,SAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,KAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,UAAA,EAAA,MAAA,CAAA,QAAA;AACA,OAFA,EAEA,KAFA,CAEA,UAAA,QAAA,EAAA;AACA,eAAA,YAAA;AACA,OAJA;AAKA,KAzEA;AA0EA,IAAA,cA1EA,0BA0EA,EA1EA,EA0EA,KA1EA,EA0EA;AAAA;;AACA,UAAA,GAAA,GAAA,+BAAA,EAAA,GAAA,SAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,KAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,YAAA,QAAA,CAAA,IAAA,CAAA,MAAA,IAAA,QAAA,CAAA,IAAA,CAAA,MAAA,KAAA,cAAA,EAAA;AACA,iBAAA,YAAA;;AACA,UAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,QAAA;AACA,SAHA,MAGA,IAAA,QAAA,CAAA,IAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,qBAAA,EAAA,KAAA;;AACA,iBAAA,MAAA;AACA,SAHA,MAGA;AACA,iBAAA,UAAA;AACA;AACA,OAVA,EAUA,KAVA,CAUA,UAAA,QAAA,EAAA;AACA,eAAA,YAAA;AACA,OAZA;AAaA;AAzFA,GAlBA;AA6GA,EAAA,WA7GA,yBA6GA;AACA,SAAA,MAAA,CAAA,MAAA,CAAA,cAAA,EAAA,EAAA;AACA,SAAA,QAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,QAAA;AACA,SAAA,iBAAA;AACA,GAjHA;AAkHA,EAAA,QAAA,EAAA;AACA,IAAA,UADA,wBACA;AACA,UAAA,UAAA,GAAA,CAAA;AADA;AAAA;AAAA;;AAAA;AAEA,8BAAA,KAAA,QAAA,mIAAA;AAAA,cAAA,IAAA;;AACA,cAAA,IAAA,CAAA,OAAA,EAAA;AACA,YAAA,UAAA,IAAA,IAAA,CAAA,KAAA,GAAA,IAAA,CAAA,QAAA,GAAA,GAAA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAOA,aAAA,UAAA;AACA;AATA;AAlHA,CAAA","sourcesContent":["<template>\n\t<div>\n\t\t<van-nav-bar\n\t\t\ttitle=\"购物车\"\n\t\t\tleft-arrow\n\t\t\tfixed\n\t\t\t@click-left=\"goBack\"\n\t\t/>\n\t\t\n\t\t<van-row class=\"main\">\n\t\t\t<van-col class=\"content\" span=\"24\" v-for=\"(item,index) in cartList\" :key=\"index\">\n\t\t\t\t<van-row>\n\t\t\t\t\t<van-col class=\"check\" span=\"2\">\n\t\t\t\t\t\t<van-checkbox v-model=\"item.Checked\" @change=\"change(item,index)\" checked-color=\"#ff0000\"></van-checkbox>\n\t\t\t\t\t</van-col>\n\t\t\t\t\t<van-col class=\"img\" span=\"8\">\n\t\t\t\t\t\t<van-image :src=\"item.MainImage\" width=\"5rem\" height=\"5rem\"/>\n\t\t\t\t\t</van-col>\n\t\t\t\t\t<van-col class=\"right\" span=\"14\">\n\t\t\t\t\t\t<van-row class=\"prdname\">\n\t\t\t\t\t\t\t<van-col span=\"24\">{{item.ProductName}}</van-col>\n\t\t\t\t\t\t</van-row>\n\t\t\t\t\t\t<van-row class=\"price\">\n\t\t\t\t\t\t\t<van-col span=\"14\">Block:{{item.Price*item.Quantity}}</van-col>\n\t\t\t\t\t\t\t<van-col span=\"10\">x{{item.Quantity}}</van-col>\n\t\t\t\t\t\t</van-row>\n\t\t\t\t\t\t<van-row class=\"opera\">\n\t\t\t\t\t\t\t<van-col span=\"14\">\n\t\t\t\t\t\t\t\t<van-stepper v-model=\"item.Quantity\" disable-input @change=\"change(item,index)\"></van-stepper>\n\t\t\t\t\t\t\t</van-col>\n\t\t\t\t\t\t\t<van-col span=\"10\">\n\t\t\t\t\t\t\t\t<van-button type=\"danger\" @click=\"deleteFromCart(item.ID,index)\">删除</van-button>\n\t\t\t\t\t\t\t</van-col>\n\t\t\t\t\t\t</van-row>\n\t\t\t\t\t</van-col>\n\t\t\t\t</van-row>\n\t\t\t</van-col>\n\t\t</van-row>\n\t\t\n\t\t<van-submit-bar\n\t\t\t:price=\"totalPrice\"\n\t\t\tcurrency=\"B\"\n\t\t\tbutton-text=\"去结算\"\n\t\t\t@submit=\"onSubmit\"\n\t\t\tsafe-area-inset-bottom\n\t\t>\n\t\t\t<van-checkbox v-model=\"checkAll\" @click=\"checkedAll\" checked-color=\"#ff0000\">全选</van-checkbox>\n\t\t</van-submit-bar>\n\t\t\n\t</div>\n</template>\n\n<script>\n\timport {NavBar,Checkbox,Image,Stepper,Button,Row,Col,SubmitBar,Toast} from 'vant'\n\texport default{\n\t\tcomponents:{\n\t\t\t[NavBar.name]:NavBar,\n\t\t\t[Checkbox.name]:Checkbox,\n\t\t\t[Image.name]:Image,\n\t\t\t[Stepper.name]:Stepper,\n\t\t\t[Button.name]:Button,\n\t\t\t[Row.name]:Row,\n\t\t\t[Col.name]:Col,\n\t\t\t[SubmitBar.name]:SubmitBar,\n\t\t\t[Toast.name]:Toast\n\t\t},\n\t\tdata(){\n\t\t\treturn {\n\t\t\t\tcheckAll:true,\n\t\t\t\tcartList:[],\n\t\t\t}\n\t\t},\n\t\tmethods:{\n\t\t\tgoBack(){\n\t\t\t\tthis.$store.commit('changeTabbarActive',this.$store.state.fromPage)\n\t\t\t\tthis.$router.back()\n\t\t\t},\n\t\t\tonSubmit(){\n\t\t\t\tvar hasChecked = this.$store.state.allDatas.data.every(val=>{\n\t\t\t\t\treturn val.Checked === false\n\t\t\t\t})\n\t\t\t\tif (!hasChecked) {\n\t\t\t\t\tthis.$router.push('/confirmOrder')\n\t\t\t\t}else{\n\t\t\t\t\tToast('还没有选择商品')\n\t\t\t\t}\n\t\t\t},\n\t\t\tchange(item,index){\n\t\t\t\tvar data ={\n\t\t\t\t\tUserID:this.$store.state.userID,\n\t\t\t\t\tProductID:item.ProductID,\n\t\t\t\t\tQuantity:item.Quantity,\n\t\t\t\t\tChecked:item.Checked\n\t\t\t\t}\n\t\t\t\tvar url = '/car/update?token='+this.$store.state.token\n\t\t\t\tthis.axios.post(url,data).then((response)=>{\n\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t}else if (response.data.status === 1) {\n\t\t\t\t\t\tfor (let val of this.cartList) {\n\t\t\t\t\t\t\tif (val['Checked']) {\n\t\t\t\t\t\t\t\tthis.checkAll = true\n\t\t\t\t\t\t\t\tthis.$store.commit('checkAll',this.checkAll)\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tthis.checkAll = false\n\t\t\t\t\t\t\t\tthis.$store.commit('checkAll',this.checkAll)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).catch((response)=>{\n\t\t\t\t\tToast('网络请求出错，请重试')\n\t\t\t\t})\n\t\t\t},\n\t\t\tgetUserCartDetail(){\n\t\t\t\tvar url = '/cart/get?user_id='+this.$store.state.userID+'&token='+this.$store.state.token\n\t\t\t\tthis.axios.get(url).then((response)=>{\n\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t}else\tif(response.data.status === 1) {\n\t\t\t\t\t\tthis.cartList = response.data.info\n\t\t\t\t\t\tthis.$store.commit('allDatasData',response.data.info)\n\t\t\t\t\t}\n\t\t\t\t}).catch((response)=>{\n\t\t\t\t\tToast('网络请求出错，请重试')\n\t\t\t\t})\n\t\t\t},\n\t\t\tcheckedAll(){\n\t\t\t\tthis.checkAll = !this.checkAll\n\t\t\t\tif (this.checkAll) {\n\t\t\t\t\tfor (let val of this.cartList) {\n\t\t\t\t\t\tval['Checked'] = true\n\t\t\t\t\t}\n\t\t\t\t} else{\n\t\t\t\t\tfor (let val of this.cartList) {\n\t\t\t\t\t\tval['Checked'] = false\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar url = '/product/checkAll?user_id='+this.$store.state.userID+'&state='+this.checkAll+'&token='+this.$store.state.token\n\t\t\t\tthis.axios.get(url).then((response)=>{\n\t\t\t\t\tthis.$store.commit('checkAll',this.checkAll)\n\t\t\t\t}).catch((response)=>{\n\t\t\t\t\tToast('网络请求出错，请重试')\n\t\t\t\t})\n\t\t\t},\n\t\t\tdeleteFromCart(id,index){\n\t\t\t\tvar url = '/product/deleteProduct?id='+id+'&token='+this.$store.state.token\n\t\t\t\tthis.axios.get(url).then((response)=>{\n\t\t\t\t\tif (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t} else if(response.data.status === 1){\n\t\t\t\t\t\tthis.$store.commit('deleteFromCartLocal',index)\n\t\t\t\t\t\tToast('删除成功')\n\t\t\t\t\t} else {\n\t\t\t\t\t\tToast('删除失败，请重试')\n\t\t\t\t\t}\n\t\t\t\t}).catch((response)=>{\n\t\t\t\t\tToast('网络请求出错，请重试')\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tbeforeMount(){\n\t\t\tthis.$store.commit('allDatasData',[])\n\t\t\tthis.checkAll = this.$store.state.checkAll\n\t\t\tthis.getUserCartDetail()\n\t\t},\n\t\tcomputed:{\n\t\t\ttotalPrice(){\n\t\t\t\tvar totalPrice = 0\n\t\t\t\tfor (let item of this.cartList) {\n\t\t\t\t\tif (item.Checked) {\n\t\t\t\t\t\ttotalPrice += (item.Price * item.Quantity)*100\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn totalPrice\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t.van-nav-bar__arrow{\n\t\tfont-size: 1.5rem;\n\t\tcolor: #000000;\n\t}\n\t.main{\n\t\tmargin: 3.125rem 0.625rem;\n\t}\n\t.content{\n\t\tbackground: white;\n\t\tborder-radius: 0.5rem;\n\t\toverflow: hidden;\n\t\tmargin-bottom: 0.625rem;\n\t\theight: 6.25rem;\n\t}\n\t\n\t.check .van-checkbox{\n\t\tmargin: 2.5rem 0 0 0.5rem;\n\t}\n\t.img .van-image{\n\t\tmargin-top: 0.625rem;\n\t}\n\t.prdname{\n\t\ttext-align: left;\n\t\tfont-size: 0.75rem;\n\t\tcolor: #999999;\n\t\tpadding: 0.625rem 0.625rem 0 0;\n\t}\n\t.prdname .van-col{\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t}\n\t.price{\n\t\ttext-align: left;\n\t\tfont-size: 0.875rem;\n\t\tpadding: 0.625rem 0.625rem 0 0;\n\t}\n\t.price .van-col:first-child{\n\t\tcolor: red;\n\t}\n\t.price .van-col:last-child{\n\t\ttext-align: center;\n\t\tcolor: #999999;\n\t}\n\t.opera{\n\t\tpadding: 0.625rem 0.625rem 0 0;\n\t}\n\t.opera .van-button{\n\t\theight: 1.75rem;\n\t\tline-height: 1.75rem;\n\t}\n\t.van-submit-bar .van-checkbox{\n\t\tmargin-left: 0.625rem;\n\t}\n</style>\n"],"sourceRoot":"src/pages"}]}