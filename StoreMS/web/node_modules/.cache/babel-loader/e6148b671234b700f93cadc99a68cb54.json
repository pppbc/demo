{"remainingRequest":"/Users/student02/Desktop/youduitong1/node_modules/babel-loader/lib/index.js!/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/student02/Desktop/youduitong1/src/pages/orderPage/allorders.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/student02/Desktop/youduitong1/src/pages/orderPage/allorders.vue","mtime":1568797562000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _toConsumableArray from \"/Users/student02/Desktop/youduitong1/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"/Users/student02/Desktop/youduitong1/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"vant/es/dialog/style\";\nimport _Dialog from \"vant/es/dialog\";\nimport \"vant/es/list/style\";\nimport _List from \"vant/es/list\";\nimport \"core-js/modules/es6.function.name\";\nimport \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\n\nvar _components;\n\nimport orderCell from '@/components/orderCell.vue';\nexport default {\n  components: (_components = {}, _defineProperty(_components, _Toast.name, _Toast), _defineProperty(_components, _List.name, _List), _defineProperty(_components, _Dialog.Component.name, _Dialog.Component.name), _defineProperty(_components, \"orderCell\", orderCell), _components),\n  data: function data() {\n    return {\n      data: [],\n      title: '',\n      loading: false,\n      finished: false\n    };\n  },\n  methods: {\n    getAllOrdersList: function getAllOrdersList(count) {\n      var _this = this;\n\n      var url = '/order/allList?user_id=' + this.$store.state.userID + '&page=' + count + '&token=' + this.$store.state.token;\n      this.axios.get(url).then(function (response) {\n        console.log(response);\n\n        if (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n          _Toast('登陆过期，请重新登录');\n\n          _this.$router.push('/login');\n        } else if (response.data.status === 1) {\n          if (response.data.obj.length > 0) {\n            _this.$store.commit('requestAllOrdersListCount', 1);\n\n            _this.data = [].concat(_toConsumableArray(_this.data), _toConsumableArray(response.data.obj));\n          } else {\n            _this.finished = true;\n          }\n        } else {\n          _Toast('数据请求失败，请重试');\n        }\n      }).catch(function (response) {\n        _Toast('网络请求出错，请重试');\n      });\n    },\n    onLoad: function onLoad() {\n      var _this2 = this;\n\n      setTimeout(function () {\n        _this2.getAllOrdersList(_this2.$store.state.requestAllOrdersListCount);\n\n        _this2.loading = false;\n      }, 1000);\n    },\n    orderDetail: function orderDetail(item) {\n      this.$store.commit('orderDetail', item);\n      this.$router.push('/orderDetail');\n    },\n    cancelOrder: function cancelOrder(item, index) {\n      var _this3 = this;\n\n      _Dialog.confirm({\n        title: '提示',\n        message: '是否确认取消订单'\n      }).then(function () {\n        var url = '/order/cancelOrder?order_no=' + item.OrderNo + '&user_id=' + item.UserID + '&token=' + _this3.$store.state.token;\n\n        _this3.axios.get(url).then(function (response) {\n          if (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n            _Toast('登陆过期，请重新登录');\n\n            _this3.$router.push('/login');\n          } else if (response.data.status === 1) {\n            setTimeout(function () {\n              _Toast('订单已取消');\n\n              _this3.data.splice(index, 1);\n            }, 1000);\n          }\n        }).catch(function (response) {\n          _Toast('网络请求出错，请重试');\n        });\n      }).catch(function () {});\n    },\n    refund: function refund(item) {\n      this.$store.commit('refundReturnData', item);\n      this.$router.push('/refundApply/退款申请');\n    },\n    confirmReceipt: function confirmReceipt(item, index) {\n      var _this4 = this;\n\n      _Dialog.confirm({\n        title: '提示',\n        message: '是否确认收货'\n      }).then(function () {\n        var url = '/order/ensureOrder?order_no=' + item.OrderNo + '&user_id=' + item.UserID + '&product_id=' + item.ProductID + '&token=' + _this4.$store.state.token;\n\n        _this4.axios.get(url).then(function (response) {\n          if (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n            _Toast('登陆过期，请重新登录');\n\n            _this4.$router.push('/login');\n          } else if (response.data.status === 1) {\n            _this4.data.splice(index, 1);\n\n            _Toast('已确认收货');\n          }\n        }).catch(function (response) {\n          _Toast('网络请求出错，请重试');\n        });\n      }).catch(function () {});\n    },\n    returnOrder: function returnOrder(item) {\n      this.$store.commit('refundReturnData', item);\n      this.$router.push('/returnApply/退货申请');\n    },\n    deleteOrder: function deleteOrder(item, index) {\n      var _this5 = this;\n\n      _Dialog.confirm({\n        title: '提示',\n        message: '是否确认删除'\n      }).then(function () {\n        var url = '/order/cancelOrder?order_no=' + item.OrderNo + '&user_id=' + item.UserID + '&token=' + _this5.$store.state.token;\n\n        _this5.axios.get(url).then(function (response) {\n          if (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n            _Toast('登陆过期，请重新登录');\n\n            _this5.$router.push('/login');\n          } else if (response.data.status === 1) {\n            setTimeout(function () {\n              _Toast('订单已取消');\n\n              _this5.data.splice(index, 1);\n            }, 1000);\n          }\n        }).catch(function (response) {\n          _Toast('网络请求出错，请重试');\n        });\n      }).catch(function () {});\n    },\n    cancelRefund: function cancelRefund(item, index) {\n      var _this6 = this;\n\n      _Dialog.confirm({\n        title: '提示',\n        message: '是否取消退款'\n      }).then(function () {\n        var url = '/order/cancelReturn?user_id=' + _this6.$store.state.userID + '&order_no=' + item.OrderNo + '&product_id=' + item.ProductID + '&return_id=' + item.ID + '&token=' + _this6.$store.state.token;\n\n        _this6.axios.get(url).then(function (response) {\n          if (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n            _Toast('登陆过期，请重新登录');\n\n            _this6.$router.push('/login');\n          } else if (response.data.status === 1) {\n            setTimeout(function () {\n              _Toast(response.data.detail);\n\n              _this6.data.splice(index, 1);\n            }, 1000);\n          }\n        }).catch(function (response) {\n          _Toast('网络请求出错，请重试');\n        });\n      }).catch(function () {});\n    }\n  },\n  computed: {\n    orderStatus: function orderStatus() {\n      return function (status) {\n        var title = '';\n\n        if (status === 0) {\n          title = '交易取消';\n        }\n\n        if (status === 10) {\n          title = '待付款';\n        }\n\n        if (status === 20) {\n          title = '待发货';\n        }\n\n        if (status === 30) {\n          title = '待收货';\n        }\n\n        if (status === 40) {\n          title = '交易完成';\n        }\n\n        if (status === 50) {\n          title = '交易关闭';\n        }\n\n        if (status === 21) {\n          title = '退款中';\n        }\n\n        if (status === 22) {\n          title = '退款成功';\n        }\n\n        if (status === 23) {\n          title = '退款失败';\n        }\n\n        return title;\n      };\n    }\n  },\n  beforeRouteEnter: function beforeRouteEnter(to, from, next) {\n    next(function (vm) {\n      vm.$store.commit('requestAllOrdersListCount', 0);\n      vm.getAllOrdersList(vm.$store.state.requestAllOrdersListCount);\n    });\n  }\n};",{"version":3,"sources":["allorders.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<div class=\"allorders\">\n\t\t<van-list\n\t\t\tv-model=\"loading\"\n\t\t\t:finished=\"finished\"\n\t\t\tfinished-text=\"没有更多了\"\n\t\t\t@load=\"onLoad\"\n\t\t>\n\t\t\t<order-cell \n\t\t\t\tv-for=\"(item,index) in data\" \n\t\t\t\t:key=\"index\"\n\t\t\t\t:title=\"orderStatus(item.Status)\"\n\t\t\t\t:time=\"item.CreateTime.replace('T',' ').replace('Z',' ')\"\n\t\t\t\t:image=\"item.ProductImage\"\n\t\t\t\t:name=\"item.ProductName\"\n\t\t\t\t:goodsNum=\"item.Quantity\"\n\t\t\t\t:totalPrice=\"item.TotalPrice\"\n\t\t\t\t:orderNo=\"item.OrderNo\"\n\t\t\t\t@orderDetail=\"orderDetail(item)\"\n\t\t\t\t@cancelOrder=\"cancelOrder(item,index)\"\n\t\t\t\t@refund=\"refund(item)\"\n\t\t\t\t@confirmReceipt=\"confirmReceipt(item,index)\"\n\t\t\t\t@returnOrder=\"returnOrder(item)\"\n\t\t\t\t@delete=\"deleteOrder(item,index)\"\n\t\t\t\t@cancelRefund=\"cancelRefund(item,index)\"\n\t\t\t></order-cell>\n\t\t</van-list>\n\t</div>\n</template>\n\n<script>\n\timport {Toast,List,Dialog} from 'vant'\n\timport orderCell from '@/components/orderCell.vue'\n\texport default{\n\t\tcomponents:{\n\t\t\t[Toast.name]:Toast,\n\t\t\t[List.name]:List,\n\t\t\t[Dialog.Component.name]:Dialog.Component.name,\n\t\t\torderCell\n\t\t},\n\t\tdata(){\n\t\t\treturn {\n\t\t\t\tdata:[],\n\t\t\t\ttitle:'',\n\t\t\t\tloading:false,\n\t\t\t\tfinished:false,\n\t\t\t}\n\t\t},\n\t\tmethods:{\n\t\t\tgetAllOrdersList(count){\n\t\t\t\tvar url = '/order/allList?user_id='+this.$store.state.userID+'&page='+count+'&token='+this.$store.state.token\n\t\t\t\tthis.axios.get(url).then((response)=>{\n\t\t\t\t\tconsole.log(response)\n\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t}else if (response.data.status === 1) {\n\t\t\t\t\t\tif (response.data.obj.length>0) {\n\t\t\t\t\t\t\tthis.$store.commit('requestAllOrdersListCount',1)\n\t\t\t\t\t\t\tthis.data = [...this.data,...response.data.obj]\n\t\t\t\t\t\t} else{\n\t\t\t\t\t\t\tthis.finished = true\n\t\t\t\t\t\t}\n\t\t\t\t\t} else{\n\t\t\t\t\t\tToast('数据请求失败，请重试')\n\t\t\t\t\t}\n\t\t\t\t}).catch((response)=>{\n\t\t\t\t\tToast('网络请求出错，请重试')\n\t\t\t\t})\n\t\t\t},\n\t\t\tonLoad(){\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tthis.getAllOrdersList(this.$store.state.requestAllOrdersListCount)\n\t\t\t\t\tthis.loading = false\n\t\t\t\t},1000)\n\t\t\t},\n\t\t\torderDetail(item){\n\t\t\t\tthis.$store.commit('orderDetail',item)\n\t\t\t\tthis.$router.push('/orderDetail')\n\t\t\t},\n\t\t\tcancelOrder(item,index){\n\t\t\t\tDialog.confirm({\n\t\t\t\t\ttitle:'提示',\n\t\t\t\t\tmessage:'是否确认取消订单'\n\t\t\t\t}).then(()=>{\n\t\t\t\t\tvar url = '/order/cancelOrder?order_no='+item.OrderNo+'&user_id='+item.UserID+'&token='+this.$store.state.token\n\t\t\t\t\tthis.axios.get(url).then((response)=>{\n\t\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t\t}else if (response.data.status === 1) {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tToast('订单已取消')\n\t\t\t\t\t\t\t\tthis.data.splice(index,1)\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t}\n\t\t\t\t\t}).catch((response)=>{\n\t\t\t\t\t\tToast('网络请求出错，请重试')\n\t\t\t\t\t})\n\t\t\t\t}).catch(()=>{})\n\t\t\t},\n\t\t\trefund(item){\n\t\t\t\tthis.$store.commit('refundReturnData',item)\n\t\t\t\tthis.$router.push('/refundApply/退款申请')\n\t\t\t},\n\t\t\tconfirmReceipt(item,index){\n\t\t\t\tDialog.confirm({\n\t\t\t\t\ttitle:'提示',\n\t\t\t\t\tmessage:'是否确认收货'\n\t\t\t\t}).then(()=>{\n\t\t\t\t\tvar url = '/order/ensureOrder?order_no='+item.OrderNo+'&user_id='+item.UserID+'&product_id='+item.ProductID+'&token='+this.$store.state.token\n\t\t\t\t\tthis.axios.get(url).then((response)=>{\n\t\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t\t}else if (response.data.status === 1) {\n\t\t\t\t\t\t\tthis.data.splice(index,1)\n\t\t\t\t\t\t\tToast('已确认收货')\n\t\t\t\t\t\t}\n\t\t\t\t\t}).catch((response)=>{\n\t\t\t\t\t\tToast('网络请求出错，请重试')\n\t\t\t\t\t})\n\t\t\t\t}).catch(()=>{})\n\t\t\t},\n\t\t\treturnOrder(item){\n\t\t\t\tthis.$store.commit('refundReturnData',item)\n\t\t\t\tthis.$router.push('/returnApply/退货申请')\n\t\t\t},\n\t\t\tdeleteOrder(item,index){\n\t\t\t\tDialog.confirm({\n\t\t\t\t\ttitle:'提示',\n\t\t\t\t\tmessage:'是否确认删除'\n\t\t\t\t}).then(()=>{\n\t\t\t\t\tvar url = '/order/cancelOrder?order_no='+item.OrderNo+'&user_id='+item.UserID+'&token='+this.$store.state.token\n\t\t\t\t\tthis.axios.get(url).then((response)=>{\n\t\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t\t}else if (response.data.status === 1) {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tToast('订单已取消')\n\t\t\t\t\t\t\t\tthis.data.splice(index,1)\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t}\n\t\t\t\t\t}).catch((response)=>{\n\t\t\t\t\t\tToast('网络请求出错，请重试')\n\t\t\t\t\t})\n\t\t\t\t}).catch(()=>{})\n\t\t\t},\n\t\t\tcancelRefund(item,index){\n\t\t\t\tDialog.confirm({\n\t\t\t\t\ttitle:'提示',\n\t\t\t\t\tmessage:'是否取消退款'\n\t\t\t\t}).then(()=>{\n\t\t\t\t\tvar url = '/order/cancelReturn?user_id='+this.$store.state.userID+'&order_no='+item.OrderNo+'&product_id='+item.ProductID+'&return_id='+item.ID+'&token='+this.$store.state.token\n\t\t\t\t\tthis.axios.get(url).then((response)=>{\n\t\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t\t}else if (response.data.status === 1) {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tToast(response.data.detail)\n\t\t\t\t\t\t\t\tthis.data.splice(index,1)\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t}\n\t\t\t\t\t}).catch((response)=>{\n\t\t\t\t\t\tToast('网络请求出错，请重试')\n\t\t\t\t\t})\n\t\t\t\t}).catch(()=>{})\n\t\t\t}\n\t\t},\n\t\tcomputed:{\n\t\t\torderStatus(){\n\t\t\t\treturn function (status) {\n\t\t\t\t\tvar title = ''\n\t\t\t\t\tif (status === 0) {\n\t\t\t\t\t\ttitle = '交易取消'\n\t\t\t\t\t}\n\t\t\t\t\tif (status === 10) {\n\t\t\t\t\t\ttitle = '待付款'\n\t\t\t\t\t}\n\t\t\t\t\tif (status === 20) {\n\t\t\t\t\t\ttitle = '待发货'\n\t\t\t\t\t}\n\t\t\t\t\tif (status === 30) {\n\t\t\t\t\t\ttitle = '待收货'\n\t\t\t\t\t}\n\t\t\t\t\tif (status === 40) {\n\t\t\t\t\t\ttitle = '交易完成'\n\t\t\t\t\t}\n\t\t\t\t\tif (status === 50) {\n\t\t\t\t\t\ttitle = '交易关闭'\n\t\t\t\t\t}\n\t\t\t\t\tif (status === 21) {\n\t\t\t\t\t\ttitle = '退款中'\n\t\t\t\t\t}\n\t\t\t\t\tif (status === 22) {\n\t\t\t\t\t\ttitle = '退款成功'\n\t\t\t\t\t}\n\t\t\t\t\tif (status === 23) {\n\t\t\t\t\t\ttitle = '退款失败'\n\t\t\t\t\t}\n\t\t\t\t\treturn title\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tbeforeRouteEnter(to,from,next) {\n\t\t\tnext(vm=>{\n\t\t\t\tvm.$store.commit('requestAllOrdersListCount',0)\n\t\t\t\tvm.getAllOrdersList(vm.$store.state.requestAllOrdersListCount)\n\t\t\t})\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t.allorders{\n\t\tmargin-top: 7.5rem;\n\t\t\n\t}\n</style>\n"],"sourceRoot":"src/pages/orderPage"}]}