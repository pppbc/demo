{"remainingRequest":"/Users/student02/Desktop/youduitong1/node_modules/babel-loader/lib/index.js!/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/student02/Desktop/youduitong1/src/pages/confirmOrder.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/student02/Desktop/youduitong1/src/pages/confirmOrder.vue","mtime":1568712826000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _defineProperty from \"/Users/student02/Desktop/youduitong1/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport \"vant/es/contact-card/style\";\nimport _ContactCard from \"vant/es/contact-card\";\nimport \"vant/es/toast/style\";\nimport _Toast from \"vant/es/toast\";\nimport \"vant/es/loading/style\";\nimport _Loading from \"vant/es/loading\";\nimport \"vant/es/overlay/style\";\nimport _Overlay from \"vant/es/overlay\";\nimport \"vant/es/stepper/style\";\nimport _Stepper from \"vant/es/stepper\";\nimport \"vant/es/icon/style\";\nimport _Icon from \"vant/es/icon\";\nimport \"vant/es/card/style\";\nimport _Card from \"vant/es/card\";\nimport \"vant/es/submit-bar/style\";\nimport _SubmitBar from \"vant/es/submit-bar\";\nimport \"vant/es/image/style\";\nimport _Image from \"vant/es/image\";\nimport \"vant/es/button/style\";\nimport _Button from \"vant/es/button\";\nimport \"vant/es/cell/style\";\nimport _Cell from \"vant/es/cell\";\nimport \"vant/es/cell-group/style\";\nimport _CellGroup from \"vant/es/cell-group\";\nimport \"vant/es/col/style\";\nimport _Col from \"vant/es/col\";\nimport \"vant/es/row/style\";\nimport _Row from \"vant/es/row\";\nimport \"core-js/modules/es6.function.name\";\nimport \"vant/es/nav-bar/style\";\nimport _NavBar from \"vant/es/nav-bar\";\n\nvar _components;\n\nimport { Images } from '@/resources/index.js';\nexport default {\n  components: (_components = {}, _defineProperty(_components, _NavBar.name, _NavBar), _defineProperty(_components, _Row.name, _Row), _defineProperty(_components, _Col.name, _Col), _defineProperty(_components, _CellGroup.name, _CellGroup), _defineProperty(_components, _Cell.name, _Cell), _defineProperty(_components, _Button.name, _Button), _defineProperty(_components, _Image.name, _Image), _defineProperty(_components, _SubmitBar.name, _SubmitBar), _defineProperty(_components, _Card.name, _Card), _defineProperty(_components, _Icon.name, _Icon), _defineProperty(_components, _Stepper.name, _Stepper), _defineProperty(_components, _Overlay.name, _Overlay), _defineProperty(_components, _Loading.name, _Loading), _defineProperty(_components, _Toast.name, _Toast), _defineProperty(_components, _ContactCard.name, _ContactCard), _components),\n  data: function data() {\n    return {\n      fromPage: '',\n      data: '',\n      currentAddr: '',\n      local_icon: Images.shop.ic_address_icon,\n      line: Images.shop.ic_line,\n      show: false\n    };\n  },\n  methods: {\n    goBack: function goBack() {\n      this.$router.back();\n    },\n    getData: function getData() {\n      if (this.fromPage === 'goodsDetail') {\n        this.data = this.$store.state.confirmOrder;\n      }\n\n      if (this.fromPage === 'cart') {\n        this.data = [];\n\n        for (var i = 0; i < this.$store.state.allDatas.data.length; i++) {\n          if (this.$store.state.allDatas.data[i].Checked) {\n            this.data.push(this.$store.state.allDatas.data[i]);\n          }\n        }\n      }\n\n      this.currentAddr = this.$store.state.currentReceiverAddress;\n    },\n    selectAddr: function selectAddr() {\n      this.$router.push('/addressSetting');\n    },\n    onSubmit: function onSubmit() {\n      var _this = this;\n\n      if (this.fromPage === 'goodsDetail') {\n        this.show = true;\n        var data = {\n          UserID: this.$store.state.userID,\n          ProductID: this.data.goodsID,\n          Quantity: this.data.goodsNum,\n          ShippingID: this.$store.state.currentReceiverAddress.ID\n        };\n        var url = '/order/buyDirect?token=' + this.$store.state.token;\n        this.axios.post(url, data).then(function (response) {\n          if (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n            _Toast('登陆过期，请重新登录');\n\n            _this.$router.push('/login');\n          } else if (response.data.status === 1) {\n            setTimeout(function () {\n              _this.show = false;\n\n              _this.$store.commit('paymentData', response.data.obj);\n\n              _this.$router.push('/paymentPage');\n            }, 1000);\n          }\n        }).catch(function (response) {\n          _Toast('网络请求出错，请重试');\n        });\n      }\n\n      if (this.fromPage === 'cart') {\n        this.show = true;\n        var url = '/order/createOrder?user_id=' + this.$store.state.userID + '&ship_id=' + this.$store.state.currentReceiverAddress.ID + '&token=' + this.$store.state.token;\n        this.axios.get(url).then(function (response) {\n          if (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n            _Toast('登陆过期，请重新登录');\n\n            _this.$router.push('/login');\n          } else if (response.data.status === 1) {\n            setTimeout(function () {\n              _this.$store.commit('deleteGoodFromCart');\n\n              _this.show = false;\n\n              _this.$store.commit('paymentData', response.data.obj);\n\n              _this.$router.push('/paymentPage');\n            }, 1000);\n          }\n        }).catch(function (response) {\n          _Toast('网络请求出错，请重试');\n        });\n      }\n    }\n  },\n  watch: {\n    goodsNum: function goodsNum() {\n      this.data.goodsNum = this.data.goodsNum <= this.data.Stock ? this.data.goodsNum : this.data.Stock;\n    }\n  },\n  computed: {\n    singleTotalPrice: function singleTotalPrice() {\n      return function (num, price) {\n        return (num * price).toFixed(2);\n      };\n    },\n    totalPrice: function totalPrice() {\n      if (this.fromPage === 'goodsDetail') {\n        return this.data.Price * this.data.goodsNum;\n      }\n\n      if (this.fromPage === 'cart') {\n        var totalPrice = 0;\n\n        for (var i = 0; i < this.data.length; i++) {\n          totalPrice += this.data[i].Quantity * this.data[i].Price;\n        }\n\n        return totalPrice;\n      }\n    }\n  },\n  beforeRouteEnter: function beforeRouteEnter(to, from, next) {\n    next(function (vm) {\n      vm.fromPage = from.name;\n      vm.getData();\n    });\n  }\n};",{"version":3,"sources":["confirmOrder.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t<div>\n\t\t<van-nav-bar\n\t\t\ttitle=\"确认订单\"\n\t\t\tleft-arrow\n\t\t\tfixed\n\t\t\t@click-left=\"goBack\"\n\t\t/>\n\t\t<div class=\"content\">\n\t\t\t<van-contact-card v-if=\"!currentAddr\" @click=\"selectAddr\"/>\n\t\t\t<div v-else>\n\t\t\t\t<van-row class=\"address\" @click=\"selectAddr\">\n\t\t\t\t\t<van-col span=\"4\" class=\"child1\">\n\t\t\t\t\t\t<van-icon :name=\"local_icon\" size=\"1.5rem\"/>\n\t\t\t\t\t</van-col>\n\t\t\t\t\t<van-col span=\"18\" class=\"child2\">\n\t\t\t\t\t\t<van-row>\n\t\t\t\t\t\t\t<van-col span=\"12\">{{currentAddr.ReceiverName}}</van-col>\n\t\t\t\t\t\t\t<van-col span=\"12\">{{currentAddr.ReceiverMobile}}</van-col>\n\t\t\t\t\t\t</van-row>\n\t\t\t\t\t\t<van-row>\n\t\t\t\t\t\t\t<van-col span=\"24\">{{currentAddr.ReceiverProvince+currentAddr.ReceiverCity+currentAddr.ReceiverDistrict+currentAddr.DetailAddress}}</van-col>\n\t\t\t\t\t\t</van-row>\n\t\t\t\t\t</van-col>\n\t\t\t\t\t<van-col span=\"2\" class=\"child3\">\n\t\t\t\t\t\t<van-icon name=\"arrow\" />\n\t\t\t\t\t</van-col>\n\t\t\t\t</van-row>\n\t\t\t\t<div class=\"line\"></div>\n\t\t\t</div>\n\n\t\t\t<div v-if=\"fromPage === 'goodsDetail'\">\n\t\t\t\t<van-card\n\t\t\t\t\t:num=\"data.goodsNum\"\n\t\t\t\t\t:price=\"data.Price\"\n\t\t\t\t\t:title=\"data.Name\"\n\t\t\t\t\t:thumb=\"data.MainImage\"\n\t\t\t\t\tcurrency=\"Block\"\n\t\t\t\t/>\n\t\t\t\t<van-row class=\"quantity\">\n\t\t\t\t\t<van-col span=\"12\">购买数量</van-col>\n\t\t\t\t\t<van-col span=\"12\">\n\t\t\t\t\t\t<van-stepper v-model=\"data.goodsNum\" :max=\"data.Stock\" disable-input integer/>\n\t\t\t\t\t</van-col>\n\t\t\t\t</van-row>\n\t\t\t\t<van-cell-group class=\"delivery\" >\n\t\t\t\t\t<van-cell title=\"配送方式\" value=\"快递 免邮\" is-link/>\n\t\t\t\t</van-cell-group>\n\t\t\t\t<van-cell-group class=\"totalPrice\">\n\t\t\t\t\t<van-cell title=\"商品金额\" :value=\"`Block ${totalPrice.toFixed(2)}`\" />\n\t\t\t\t</van-cell-group>\n\t\t\t</div>\n\t\t\t<div v-else>\n\t\t\t\t<div v-for=\"(item,index) in data\" :key=\"index\">\n\t\t\t\t\t<van-card\n\t\t\t\t\t\t:num=\"item.Quantity\"\n\t\t\t\t\t\t:price=\"item.Price\"\n\t\t\t\t\t\t:title=\"item.ProductName\"\n\t\t\t\t\t\t:thumb=\"item.MainImage\"\n\t\t\t\t\t\tcurrency=\"Block\"\n\t\t\t\t\t/>\n\t\t\t\t\t<van-cell-group class=\"delivery\" >\n\t\t\t\t\t\t<van-cell title=\"配送方式\" value=\"快递 免邮\" is-link/>\n\t\t\t\t\t</van-cell-group>\n\t\t\t\t\t<van-cell-group class=\"totalPrice\">\n\t\t\t\t\t\t<van-cell title=\"商品金额\" :value=\"`Block ${singleTotalPrice(item.Quantity,item.Price)}`\" />\n\t\t\t\t\t</van-cell-group>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<van-overlay :show=\"show\" class-name=\"overlay\" />\n\t\t<van-loading v-if=\"show\"></van-loading>\n\t\t<van-submit-bar \n\t\t\t:price=\"totalPrice*100\"\n\t\t\tbutton-text=\"提交订单\"\n\t\t\tcurrency=\"Block\"\n\t\t\tsafe-area-inset-bottom\n\t\t\t@submit=\"onSubmit\"\n\t\t/>\n\t\t\n\t</div>\n</template>\n\n<script>\n\timport {NavBar,Row,Col,CellGroup,Cell,Button,Image,SubmitBar,Card,Icon,Stepper,Overlay,Loading,Toast,ContactCard} from 'vant'\n\timport {Images} from '@/resources/index.js'\n\texport default{\n\t\tcomponents:{\n\t\t\t[NavBar.name]:NavBar,\n\t\t\t[Row.name]:Row,\n\t\t\t[Col.name]:Col,\n\t\t\t[CellGroup.name]:CellGroup,\n\t\t\t[Cell.name]:Cell,\n\t\t\t[Button.name]:Button,\n\t\t\t[Image.name]:Image,\n\t\t\t[SubmitBar.name]:SubmitBar,\n\t\t\t[Card.name]:Card,\n\t\t\t[Icon.name]:Icon,\n\t\t\t[Stepper.name]:Stepper,\n\t\t\t[Overlay.name]:Overlay,\n\t\t\t[Loading.name]:Loading,\n\t\t\t[Toast.name]:Toast,\n\t\t\t[ContactCard.name]:ContactCard\n\t\t},\n\t\tdata(){\n\t\t\treturn{\n\t\t\t\tfromPage:'',\n\t\t\t\tdata:'',\n\t\t\t\tcurrentAddr:'',\n\t\t\t\tlocal_icon:Images.shop.ic_address_icon,\n\t\t\t\tline:Images.shop.ic_line,\n\t\t\t\tshow:false\n\t\t\t}\n\t\t},\n\t\tmethods:{\n\t\t\tgoBack(){\n\t\t\t\tthis.$router.back()\n\t\t\t},\n\t\t\tgetData(){\n\t\t\t\tif (this.fromPage === 'goodsDetail') {\n\t\t\t\t\tthis.data = this.$store.state.confirmOrder\n\t\t\t\t}\n\t\t\t\tif (this.fromPage === 'cart') {\n\t\t\t\t\tthis.data = []\n\t\t\t\t\tfor (var i = 0; i < this.$store.state.allDatas.data.length; i++) {\n\t\t\t\t\t\tif (this.$store.state.allDatas.data[i].Checked) {\n\t\t\t\t\t\t\tthis.data.push(this.$store.state.allDatas.data[i])\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.currentAddr = this.$store.state.currentReceiverAddress\n\t\t\t},\n\t\t\tselectAddr(){\n\t\t\t\tthis.$router.push('/addressSetting')\n\t\t\t},\n\t\t\tonSubmit(){\n\t\t\t\tif (this.fromPage === 'goodsDetail') {\n\t\t\t\t\tthis.show = true\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\tUserID:this.$store.state.userID,\n\t\t\t\t\t\tProductID:this.data.goodsID,\n\t\t\t\t\t\tQuantity:this.data.goodsNum,\n\t\t\t\t\t\tShippingID:this.$store.state.currentReceiverAddress.ID\n\t\t\t\t\t}\n\t\t\t\t\tvar url = '/order/buyDirect?token='+this.$store.state.token\n\t\t\t\t\tthis.axios.post(url,data).then((response)=>{\n\t\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t\t}else if (response.data.status === 1) {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t\tthis.$store.commit('paymentData',response.data.obj)\n\t\t\t\t\t\t\t\tthis.$router.push('/paymentPage')\n\t\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t\t} \n\t\t\t\t\t}).catch((response)=>{\n\t\t\t\t\t\tToast('网络请求出错，请重试')\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif (this.fromPage === 'cart') {\n\t\t\t\t\tthis.show = true\n\t\t\t\t\tvar url = '/order/createOrder?user_id='+this.$store.state.userID+'&ship_id='+this.$store.state.currentReceiverAddress.ID+'&token='+this.$store.state.token\n\t\t\t\t\tthis.axios.get(url).then((response)=>{\n\t\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t\t}else if(response.data.status === 1){\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.$store.commit('deleteGoodFromCart')\n\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t\tthis.$store.commit('paymentData',response.data.obj)\n\t\t\t\t\t\t\t\tthis.$router.push('/paymentPage')\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t}\n\t\t\t\t\t}).catch((response)=>{\n\t\t\t\t\t\tToast('网络请求出错，请重试')\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\twatch:{\n\t\t\tgoodsNum(){\n\t\t\t\tthis.data.goodsNum = this.data.goodsNum <= this.data.Stock ? this.data.goodsNum : this.data.Stock\n\t\t\t}\n\t\t},\n\t\tcomputed:{\n\t\t\tsingleTotalPrice(){\n\t\t\t\treturn function (num,price) {\n\t\t\t\t\treturn (num*price).toFixed(2)\n\t\t\t\t}\n\t\t\t},\n\t\t\ttotalPrice(){\n\t\t\t\tif (this.fromPage === 'goodsDetail') {\n\t\t\t\t\treturn this.data.Price*this.data.goodsNum\n\t\t\t\t}\n\t\t\t\tif (this.fromPage === 'cart') {\n\t\t\t\t\tvar totalPrice = 0\n\t\t\t\t\tfor (var i = 0; i < this.data.length; i++) {\n\t\t\t\t\t\ttotalPrice += this.data[i].Quantity * this.data[i].Price\n\t\t\t\t\t}\n\t\t\t\t\treturn totalPrice\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tbeforeRouteEnter(to,from,next){\n\t\t\tnext(vm=>{\n\t\t\t\tvm.fromPage = from.name\n\t\t\t\tvm.getData()\n\t\t\t})\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t.van-nav-bar__arrow{\n\t\tfont-size: 1.5rem;\n\t\tcolor: #000000;\n\t}\n\t.content{\n\t\tmargin: 2.875rem auto 3.125rem;\n\t}\n\t.address{\n\t\tbackground: white;\n\t}\n\t.address .child1 .van-icon,.address .child3 .van-icon{\n\t\tmargin: 1.05rem auto;\n\t}\n\t.address .child2{\n\t\ttext-align: left;\n\t}\n\t.address .child2 .van-row{\n\t\tmargin: 0.5rem auto;\n\t\tfont-size: 0.8125rem;\n\t}\n\t.line{\n\t\tbackground: url(../assets/Images/Shop/orderLine.png);\n\t\tbackground-size: 100%;\n\t\twidth: 100%;\n\t\theight: 0.3125rem;\n\t}\n\t.van-card{\n\t\tbackground: white;\n\t\tmargin-top: 0.3125rem;\n\t}\n\t.van-card__title{\n\t\ttext-align: left;\n\t}\n\t.van-card__price{\n\t\tfloat: left;\n\t}\n\t.quantity{\n\t\tbackground: white;\n\t\tborder-top: 0.0625rem solid #F0F0F0;\n\t}\n\t.quantity .van-col{\n\t\tpadding: 0.625rem 1rem;\n\t\tfont-size: 0.875rem;\n\t\tline-height: 1.5rem;\n\t}\n\t.quantity .van-col:first-child{\n\t\ttext-align: left;\n\t\tfont-size: 0.9375rem;\n\t}\n\t.quantity .van-col:last-child{\n\t\ttext-align: right;\n\t}\n\t.delivery{\n\t\ttext-align: left;\n\t}\n\t.totalPrice{\n\t\ttext-align: left;\n\t}\n\t.totalPrice .van-cell__value{\n\t\tcolor: red;\n\t}\n\t.delivery .van-cell,.totalPrice .van-cell{\n\t\tfont-size: 0.875rem;\n\t\tcolor: #999999;\n\t}\n\t.overlay{\n\t\tbackground: rgba(0,0,0,0);\n\t}\n\t.van-loading{\n\t\tposition: absolute;\n\t\tleft: 45%;\n\t\ttop: 45%;\n\t}\n</style>\n"],"sourceRoot":"src/pages"}]}