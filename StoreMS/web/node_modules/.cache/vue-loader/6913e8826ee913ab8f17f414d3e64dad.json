{"remainingRequest":"/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/student02/Desktop/youduitong1/src/pages/setting/modifyAddress.vue?vue&type=style&index=0&id=88bfd1f2&scoped=true&lang=css&","dependencies":[{"path":"/Users/student02/Desktop/youduitong1/src/pages/setting/modifyAddress.vue","mtime":1567867723000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.van-nav-bar__arrow{\n\tcolor: black;\n\tfont-size: 1.2rem;\n}\n.overlay{\n\tbackground-color: rgba(0,0,0,0);\n}\n.van-address-edit{\n\ttext-align: left;\n}\n",{"version":3,"sources":["modifyAddress.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"modifyAddress.vue","sourceRoot":"src/pages/setting","sourcesContent":["<template>\n\t<div >\n\t\t<van-nav-bar\n\t\t\t:title=\"title\"\n\t\t\tleft-arrow\n\t\t\tfixed\n\t\t\t@click-left=\"goBack\"\n\t\t/>\n\t\t\n\t\t<div v-if=\"title === '修改地址'\" style=\"margin-top: 46px;\">\n\t\t\t<van-address-edit\n\t\t\t\t:area-list=\"areaData\"\n\t\t\t\t:address-info=\"addressInfo\"\n\t\t\t\t:detail-rows=\"2\"\n\t\t\t\tshow-postal\n\t\t\t\t@save=\"onSaveEdit\"\n\t\t\t/>\n\t\t</div>\n\t\t\n\t\t<div v-if=\"title === '添加地址'\" style=\"margin-top: 46px;\">\n\t\t\t<van-address-edit\n\t\t\t\t:area-list=\"areaData\"\n\t\t\t\t:detail-rows=\"2\"\n\t\t\t\tshow-postal\n\t\t\t\t@save=\"onSaveAdd\"\n\t\t\t/>\n\t\t</div>\n\t\t\n\t\t\n\t\t\n\t\t<van-overlay :show=\"show\" class-name=\"overlay\" />\n\t\t<van-loading v-if=\"show\" vertical>{{loadingText}}</van-loading>\n\t</div>\n</template>\n\n<script>\n\timport areaList from '@/utils/area.js'\n\timport {NavBar,Button,AddressEdit,Toast,Overlay,Loading} from 'vant'\n\texport default{\n\t\tcomponents:{\n\t\t\t[NavBar.name]:NavBar,\n\t\t\t[Button.name]:Button,\n\t\t\t[AddressEdit.name]:AddressEdit,\n\t\t\t[Toast.name]:Toast,\n\t\t\t[Overlay.name]:Overlay,\n\t\t\t[Loading.name]:Loading\n\t\t},\n\t\tdata(){\n\t\t\treturn {\n\t\t\t\tshow:false,\n\t\t\t\tloadingText:'',\n\t\t\t\ttitle:'',\n\t\t\t\tindex:0,\n\t\t\t\tareaData:areaList,\n\t\t\t\tsearchResult:[],\n\t\t\t\taddrID:'',\n\t\t\t\treceiverName:'',\n\t\t\t\treceiverMoblie:'',\n\t\t\t\treceiverProvince:'',\n\t\t\t\treceiverCity:'',\n\t\t\t\treceiverCounty:'',\n\t\t\t\treceiverAddr:'',\n\t\t\t\treceiverCode:''\n\t\t\t}\n\t\t},\n\t\tmethods:{\n\t\t\tgoBack(){\n\t\t\t\tthis.$router.back()\n\t\t\t},\n\t\t\tonSaveAdd(content){\n\t\t\t\tvar data = {\n\t\t\t\t\tUserID:this.$store.state.userID,\n\t\t\t\t\tReceiverName:content.name,\n\t\t\t\t\tReceiverMobile:content.tel,\n\t\t\t\t\tReceiverProvince:content.province,\n\t\t\t\t\tReceiverCity:content.city,\n\t\t\t\t\tReceiverDistrict:content.county,\n\t\t\t\t\tDetailAddress:content.addressDetail,\n\t\t\t\t\tReceiverZip:content.postalCode,\n\t\t\t\t}\n\t\t\t\tthis.show = true\n\t\t\t\tthis.loadingText = '正在添加...'\n\t\t\t\tvar url = '/ship/addAddress?token='+this.$store.state.token\n\t\t\t\tthis.axios.post(url,data).then((response)=>{\n\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t}else if(response.data.status === 1){\n\t\t\t\t\t\tthis.$store.commit(\"addReceiverItem\",response.data.obj)\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.loadingText = '添加成功'\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t\tthis.$router.back()\n\t\t\t\t\t\t\t}, 500)\n\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t}else{\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tToast('地址添加失败，请重试')\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t}, 500)\n\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t}\n\t\t\t\t}).catch((responde)=>{\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tToast('网络请求出错，请重试')\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t}, 500)\n\t\t\t\t\t}, 1000)\n\t\t\t\t})\n\t\t\t},\n\t\t\tonSaveEdit(content){\n\t\t\t\tvar data = {\n\t\t\t\t\tUserID:this.$store.state.userID,\n\t\t\t\t\tID:this.addrID,\n\t\t\t\t\tReceiverName:content.name,\n\t\t\t\t\tReceiverMobile:content.tel,\n\t\t\t\t\tReceiverProvince:content.province,\n\t\t\t\t\tReceiverCity:content.city,\n\t\t\t\t\tReceiverDistrict:content.county,\n\t\t\t\t\tDetailAddress:content.addressDetail,\n\t\t\t\t\tReceiverZip:content.postalCode,\n\t\t\t\t}\n\t\t\t\tthis.show = true\n\t\t\t\tthis.loadingText = '正在修改...'\n\t\t\t\tvar url = '/ship/editAdd?token='+this.$store.state.token\n\t\t\t\tthis.axios.post(url,data).then((response)=>{\n\t\t\t\t\tconsole.log(response)\n\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t}else if(response.data.status === 1){\n\t\t\t\t\t\tthis.$store.commit({type:'modifyReceiverAddressList',data:data,index:this.index})\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.loadingText = '修改成功'\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t\tthis.$router.back()\n\t\t\t\t\t\t\t}, 500)\n\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t}else{\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tToast('地址修改失败，请重试')\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t}, 500)\n\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t}\n\t\t\t\t}).catch((response)=>{\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tToast('网络请求出错，请重试')\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t}, 500)\n\t\t\t\t\t}, 1000)\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tbeforeRouteEnter(to,from,next){\n\t\t\tnext(vm=>{\n\t\t\t\tvm.title = to.meta.title\n\t\t\t\tvar index = vm.$route.params.index\n\t\t\t\tvm.index = index\n\t\t\t\tif (to.meta.title === '修改地址') {\n\t\t\t\t\tvm.addrID = vm.$store.state.receiverAddressList[index].ID\n\t\t\t\t\tvm.receiverName = vm.$store.state.receiverAddressList[index].ReceiverName\n\t\t\t\t\tvm.receiverMoblie = vm.$store.state.receiverAddressList[index].ReceiverMobile\n\t\t\t\t\tvm.receiverProvince = vm.$store.state.receiverAddressList[index].ReceiverProvince\n\t\t\t\t\tvm.receiverCity = vm.$store.state.receiverAddressList[index].ReceiverCity\n\t\t\t\t\tvm.receiverCounty = vm.$store.state.receiverAddressList[index].ReceiverDistrict\n\t\t\t\t\tvm.receiverAddr = vm.$store.state.receiverAddressList[index].DetailAddress\n\t\t\t\t\tvm.receiverCode = vm.$store.state.receiverAddressList[index].ReceiverZip\n\t\t\t\t} else{\n\t\t\t\t\tvm.addrID = ''\n\t\t\t\t\tvm.receiverName = ''\n\t\t\t\t\tvm.receiverMoblie = ''\n\t\t\t\t\tvm.receiverProvince = ''\n\t\t\t\t\tvm.receiverCity = ''\n\t\t\t\t\tvm.receiverCounty = ''\n\t\t\t\t\tvm.receiverAddr = ''\n\t\t\t\t\tvm.receiverCode = ''\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tcomputed:{\n\t\t\taddressInfo(){\n\t\t\t\tvar provinceCode = ''\n\t\t\t\tvar cityCode = ''\n\t\t\t\tvar areaCode = ''\n\t\t\t\tfor (let i in areaList.province_list) {\n\t\t\t\t\tif (this.receiverProvince === areaList.province_list[i]) {\n\t\t\t\t\t\tprovinceCode = i.toString()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let i in areaList.city_list) {\n\t\t\t\t\tvar key = i.toString()\n\t\t\t\t\tfor (var j = 0; j < 2; j++) {\n\t\t\t\t\t\tif (provinceCode[j] === key[j] && this.receiverCity === areaList.city_list[i]) {\n\t\t\t\t\t\t\tcityCode = key\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (let i in areaList.county_list) {\n\t\t\t\t\tvar key = i.toString()\n\t\t\t\t\tfor (var j = 0; j < 4; j++) {\n\t\t\t\t\t\tif (cityCode[j] === key[j] && this.receiverCounty === areaList.county_list[i]) {\n\t\t\t\t\t\t\tareaCode = key\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar data = {\n\t\t\t\t\tid:this.addrID,\n\t\t\t\t\tname:this.receiverName,\n\t\t\t\t\ttel:this.receiverMoblie,\n\t\t\t\t\tprovince:this.receiverProvince,\n\t\t\t\t\tcity:this.receiverCity,\n\t\t\t\t\tcounty:this.receiverCounty,\n\t\t\t\t\taddressDetail:this.receiverAddr,\n\t\t\t\t\tareaCode:areaCode,\n\t\t\t\t\tpostalCode:this.receiverCode\n\t\t\t\t}\n\t\t\t\treturn data\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t.van-nav-bar__arrow{\n\t\tcolor: black;\n\t\tfont-size: 1.2rem;\n\t}\n\t.overlay{\n\t\tbackground-color: rgba(0,0,0,0);\n\t}\n\t.van-address-edit{\n\t\ttext-align: left;\n\t}\n</style>\n"]}]}