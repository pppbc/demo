{"remainingRequest":"/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/student02/Desktop/youduitong1/src/pages/paymentPage.vue?vue&type=style&index=0&id=e3ed073e&scoped=true&lang=css&","dependencies":[{"path":"/Users/student02/Desktop/youduitong1/src/pages/paymentPage.vue","mtime":1568681157000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.van-nav-bar__arrow{\n\tfont-size: 1.5rem;\n\tcolor: #000000;\n}\n.container{\n\tmargin-top: 2.875rem;\n\tbackground: white;\n}\n.totalPrice{\n\tmargin-top: 0.625rem;\n\tfont-size: 1.125rem;\n}\n.totalPrice span{\n\tfont-size: 0.875rem;\n\tcolor: #999999;\n}\n.text{\n\tmargin-top: 0.625rem;\n\tfont-size: 0.6875rem;\n\topacity: 0.8;\n}\n.list{\n\tmargin-top: 0.625rem;\n}\n.btn{\n\tmargin-top: 0.625rem;\n\t\n}\n.van-button{\n\tmargin: 2rem auto;\n\twidth: 50%;\n}\n.blocklist{\n\ttext-align: left;\n\theight: 1.5rem;\n\tline-height: 1.5rem;\n}\n.blocklist .van-icon{\n\tfont-size: 1.5rem;\n}\n.van-number-keyboard{\n\tposition: relative;\n\tmargin-top: 0.625rem;\n}\n.overlay{\n\tbackground: rgba(0,0,0,0);\n}\n.van-loading{\n\tposition: absolute;\n\tleft: 40%;\n\ttop: 45%;\n}\n",{"version":3,"sources":["paymentPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"paymentPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n\t<div>\n\t\t<van-nav-bar\n\t\t\ttitle=\"确认付款\"\n\t\t\tleft-arrow\n\t\t\tfixed\n\t\t\t@click-left=\"goBack\"\n\t\t/>\n\t\t\n\t\t<van-row class=\"container\">\n\t\t\t<van-col span=\"24\">\n\t\t\t\t<van-row class=\"totalPrice\">\n\t\t\t\t\t<van-col span=\"24\"><span>Block </span>{{totalPrice}}</van-col>\n\t\t\t\t</van-row>\n\t\t\t\t<van-row class=\"text\">\n\t\t\t\t\t<van-col span=\"24\">请选择您的支付方式</van-col>\n\t\t\t\t</van-row>\n\t\t\t\t<van-row class=\"list\">\n\t\t\t\t\t<van-col span=\"24\">\n\t\t\t\t\t\t<van-collapse v-model=\"activeName\" accordion>\n\t\t\t\t\t\t\t<van-collapse-item name=\"1\" class=\"collapseItem1\">\n\t\t\t\t\t\t\t\t<div slot=\"title\">\n\t\t\t\t\t\t\t\t\t<van-checkbox v-model=\"checked1\">使用通用积分支付</van-checkbox>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<van-row>\n\t\t\t\t\t\t\t\t\t<van-col span=\"24\">当前可用通用积分 {{$store.state.totalBlock}} Block</van-col>\n\t\t\t\t\t\t\t\t</van-row>\n\t\t\t\t\t\t\t</van-collapse-item>\n\t\t\t\t\t\t\t<van-collapse-item name=\"2\" class=\"collapseItem2\">\n\t\t\t\t\t\t\t\t<div slot=\"title\">\n\t\t\t\t\t\t\t\t\t<van-checkbox v-model=\"checked2\">使用自定义积分支付</van-checkbox>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<van-row v-for=\"(item,index) in blockArr\" :key=\"index\" class=\"blocklist\">\n\t\t\t\t\t\t\t\t\t<van-col span=\"20\">{{item.PointName}} 积分余额：{{item.Balance}} 约合：{{item.Balance*item.PointFate}}Block</van-col>\n\t\t\t\t\t\t\t\t\t<van-col span=\"2\">\n\t\t\t\t\t\t\t\t\t\t<van-icon v-show=\"index !== 0\" name=\"upgrade\" @click=\"upBtn(index)\" />\n\t\t\t\t\t\t\t\t\t</van-col>\n\t\t\t\t\t\t\t\t\t<van-col span=\"2\">\n\t\t\t\t\t\t\t\t\t\t<van-icon v-show=\"index !== blockArr.length-1\" :name=\"downgrade\" @click=\"downBtn(index)\"/>\n\t\t\t\t\t\t\t\t\t</van-col>\n\t\t\t\t\t\t\t\t</van-row>\n\t\t\t\t\t\t\t</van-collapse-item>\n\t\t\t\t\t\t\t<van-collapse-item name=\"3\" class=\"collapseItem3\">\n\t\t\t\t\t\t\t\t<div slot=\"title\">\n\t\t\t\t\t\t\t\t\t<van-checkbox v-model=\"checked3\">按照积分过期时间自动扣款</van-checkbox>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<van-row>\n\t\t\t\t\t\t\t\t\t<van-col span=\"24\">按照积分过期时间自动扣款</van-col>\n\t\t\t\t\t\t\t\t</van-row>\n\t\t\t\t\t\t\t</van-collapse-item>\n\t\t\t\t\t\t</van-collapse>\n\t\t\t\t\t</van-col>\n\t\t\t\t</van-row>\n\t\t\t</van-col>\n\t\t</van-row>\n\t\t<van-button type=\"danger\" round @click=\"onSubmit\">确认支付</van-button>\n\t\t<van-action-sheet v-model=\"showActionSheet\" title=\"输入支付密码\" @closed=\"closed\">\n\t\t\t<van-password-input\n\t\t\t\t:value=\"password\"\n\t\t\t\t:focused=\"showKeyboard\"\n\t\t\t\t@focus=\"showKeyboard = true\"\n\t\t\t/>\n\t\t\t<van-number-keyboard\n\t\t\t\t:show=\"showKeyboard\"\n\t\t\t\t@input=\"onInput\"\n\t\t\t\t@delete=\"onDelete\"\n\t\t\t\t:safe-area-inset-bottom=\"true\"\n\t\t\t/>\n\t\t</van-action-sheet>\n\t\t<van-overlay :show=\"show\" class-name=\"overlay\" />\n\t\t<van-loading v-if=\"show\" vertical>{{loadingText}}</van-loading>\n\t</div>\n</template>\n\n<script>\n\timport {NavBar,Row,Col,Checkbox,Collapse,CollapseItem,Button,Icon,ActionSheet,PasswordInput,NumberKeyboard,Toast,Overlay,Loading} from 'vant'\n\timport {Images} from '@/resources/index.js'\n\texport default{\n\t\tcomponents:{\n\t\t\t[NavBar.name]:NavBar,\n\t\t\t[Row.name]:Row,\n\t\t\t[Col.name]:Col,\n\t\t\t[Checkbox.name]:Checkbox,\n\t\t\t[Collapse.name]:Collapse,\n\t\t\t[CollapseItem.name]:CollapseItem,\n\t\t\t[Button.name]:Button,\n\t\t\t[Icon.name]:Icon,\n\t\t\t[ActionSheet.name]:ActionSheet,\n\t\t\t[PasswordInput.name]:PasswordInput,\n\t\t\t[NumberKeyboard.name]:NumberKeyboard,\n\t\t\t[Toast.name]:Toast,\n\t\t\t[Overlay.name]:Overlay,\n\t\t\t[Loading.name]:Loading\n\t\t},\n\t\tdata(){\n\t\t\treturn{\n\t\t\t\tdata:'',\n\t\t\t\tblockArr:[],\n\t\t\t\tactiveName:'1',\n\t\t\t\tchecked1:true,\n\t\t\t\tchecked2:false,\n\t\t\t\tchecked3:false,\n\t\t\t\tdowngrade:Images.shop.ic_down,\n\t\t\t\tshowActionSheet:false,\n\t\t\t\tpassword:'',\n\t\t\t\tshowKeyboard:true,\n\t\t\t\tshow:false,\n\t\t\t\tloadingText:'正在支付...'\n\t\t\t}\n\t\t},\n\t\tmethods:{\n\t\t\tgoBack(){\n\t\t\t\tthis.$router.push('/orderPage/unpaid/待付款')\n\t\t\t},\n\t\t\tupBtn(index){\n\t\t\t\tvar arr = this.blockArr\n\t\t\t\tvar item = arr[index]\n\t\t\t\tarr[index] = arr[index-1]\n\t\t\t\tarr[index-1] = item\n\t\t\t\tthis.blockArr.splice(index,1,arr[index])\n\t\t\t\tthis.blockArr.splice(index-1,1,arr[index-1])\n\t\t\t},\n\t\t\tdownBtn(index){\n\t\t\t\tvar arr = this.blockArr\n\t\t\t\tvar item = arr[index]\n\t\t\t\tarr[index] = arr[index+1]\n\t\t\t\tarr[index+1] = item\n\t\t\t\tthis.blockArr.splice(index,1,arr[index])\n\t\t\t\tthis.blockArr.splice(index+1,1,arr[index+1])\n\t\t\t},\n\t\t\tonSubmit(){\n\t\t\t\tthis.judgePaymentPW()\n\t\t\t},\n\t\t\tonInput(key){\n\t\t\t\tthis.password = (this.password + key).slice(0,6)\n\t\t\t\tif(this.password.length === 6){\n\t\t\t\t\tthis.$nextTick(()=>{\n\t\t\t\t\t\tthis.showActionSheet = false\n\t\t\t\t\t\tthis.show = true\n\t\t\t\t\t\tthis.loadingText = '正在支付...'\n\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\tUserID:this.$store.state.userID,\n\t\t\t\t\t\t\tOrderNo:this.data.OrderNo,\n\t\t\t\t\t\t\tTotalPay:this.totalPrice,\n\t\t\t\t\t\t\tPassword:this.password\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.activeName === '1') {\n\t\t\t\t\t\t\tdata.Type = 1\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.activeName === '2') {\n\t\t\t\t\t\t\tdata.Type = 3\n\t\t\t\t\t\t\tvar arr = []\n\t\t\t\t\t\t\tfor (let item of this.blockArr) {\n\t\t\t\t\t\t\t\tarr.push(item.ID)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tdata.list = arr\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (this.activeName === '3') {\n\t\t\t\t\t\t\tdata.Type = 2\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar url = '/point/payWithPoint?token='+this.$store.state.token\n\t\t\t\t\t\tthis.axios.post(url,data).then((response)=>{\n\t\t\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t\t\t}else if (response.data.status === 1) {\n\t\t\t\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\t\t\t\tToast('支付成功')\n\t\t\t\t\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t\t\t\tthis.$router.push('/orderPage/unshipped/待发货')\n\t\t\t\t\t\t\t\t\t},500)\n\t\t\t\t\t\t\t\t},1000)\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\t\t\t\tToast(response.data.detail)\n\t\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t\t},1000)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).catch((response)=>{\n\t\t\t\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\t\t\t\tToast('网络请求出错，请稍候再试!')\n\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t},1000)\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\tonDelete(){\n\t\t\t\tthis.password = this.password.slice(0,this.password.length - 1)\n\t\t\t},\n\t\t\tclosed(){\n\t\t\t\tthis.password = ''\n\t\t\t},\n\t\t\tjudgePaymentPW(){\n\t\t\t\tvar url = '/user/getpaypwd?user_id='+this.$store.state.userID+'&token='+this.$store.state.token\n\t\t\t\tthis.axios.get(url).then((response)=>{\n\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t}else if (response.data.status === 1) {\n\t\t\t\t\t\tthis.showActionSheet = true\n\t\t\t\t\t} else{\n\t\t\t\t\t\tthis.$router.push('/tradingPassword')\n\t\t\t\t\t}\n\t\t\t\t}).catch((response)=>{\n\t\t\t\t\tToast('网络请求出错，请稍候再试!')\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tcomputed:{\n\t\t\ttotalPrice(){\n\t\t\t\tif (this.data.length) {\n\t\t\t\t\tvar totalPrice = 0\n\t\t\t\t\tfor (let item of this.data) {\n\t\t\t\t\t\ttotalPrice += item.TotalPrice\n\t\t\t\t\t}\n\t\t\t\t\treturn totalPrice \n\t\t\t\t} else{\n\t\t\t\t\treturn this.data.TotalPrice\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\twatch:{\n\t\t\tactiveName(){\n\t\t\t\tif (this.activeName === '1') {\n\t\t\t\t\tthis.checked1 = true\n\t\t\t\t\tthis.checked2 = this.checked3 = false\n\t\t\t\t}\n\t\t\t\tif (this.activeName === '2') {\n\t\t\t\t\tthis.checked2 = true\n\t\t\t\t\tthis.checked1 = this.checked3 = false\n\t\t\t\t}\n\t\t\t\tif (this.activeName === '3') {\n\t\t\t\t\tthis.checked3 = true\n\t\t\t\t\tthis.checked1 = this.checked2 = false\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tbeforeMount() {\n\t\t\tthis.data = this.$store.state.paymentData\n\t\t\tthis.blockArr = this.$store.state.blockArray.filter(val=>{\n\t\t\t\treturn val.Balance !== 0\n\t\t\t})\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t.van-nav-bar__arrow{\n\t\tfont-size: 1.5rem;\n\t\tcolor: #000000;\n\t}\n\t.container{\n\t\tmargin-top: 2.875rem;\n\t\tbackground: white;\n\t}\n\t.totalPrice{\n\t\tmargin-top: 0.625rem;\n\t\tfont-size: 1.125rem;\n\t}\n\t.totalPrice span{\n\t\tfont-size: 0.875rem;\n\t\tcolor: #999999;\n\t}\n\t.text{\n\t\tmargin-top: 0.625rem;\n\t\tfont-size: 0.6875rem;\n\t\topacity: 0.8;\n\t}\n\t.list{\n\t\tmargin-top: 0.625rem;\n\t}\n\t.btn{\n\t\tmargin-top: 0.625rem;\n\t\t\n\t}\n\t.van-button{\n\t\tmargin: 2rem auto;\n\t\twidth: 50%;\n\t}\n\t.blocklist{\n\t\ttext-align: left;\n\t\theight: 1.5rem;\n\t\tline-height: 1.5rem;\n\t}\n\t.blocklist .van-icon{\n\t\tfont-size: 1.5rem;\n\t}\n\t.van-number-keyboard{\n\t\tposition: relative;\n\t\tmargin-top: 0.625rem;\n\t}\n\t.overlay{\n\t\tbackground: rgba(0,0,0,0);\n\t}\n\t.van-loading{\n\t\tposition: absolute;\n\t\tleft: 40%;\n\t\ttop: 45%;\n\t}\n</style>\n"]}]}