{"remainingRequest":"/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/student02/Desktop/youduitong1/src/pages/home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/student02/Desktop/youduitong1/src/pages/home.vue","mtime":1571133582000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport bus from '@/utils/bus.js';\nimport { NavBar, Toast, Button, Dialog, CellGroup, Cell, List } from 'vant';\nimport { Images } from '@/resources/index.js';\nimport myIntegral from '@/components/myIntegral.vue';\nimport swipe from '@/components/swipe.vue';\nimport doubleCard from '@/components/double-card.vue';\nexport default {\n\tinject:['reload'],\n\tcomponents: {\n\t\t[NavBar.name]: NavBar,\n\t\t[Toast.name]: Toast,\n\t\t[Button.name]: Button,\n\t\t[Dialog.Component.name]: Dialog.Component,\n\t\t[CellGroup.name]: CellGroup,\n\t\t[Cell.name]: Cell,\n\t\t[List.name]: List,\n\t\tmyIntegral,\n\t\tswipe,\n\t\tdoubleCard\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tbg: Images.common.ic_header_bg,\n\t\t\tborder: false,\n\t\t\tintrgralData: '',\n\t\t\tbusinessArray: [],\n\t\t\tgoods: [],\n\t\t\tavatar: '',\n\t\t\tallActicities: [],\n\t\t\tgift_icon: Images.home.ic_gift,\n\t\t\tloading: false,\n\t\t\tfinished: false,\n\t\t\tfinishedText: '没有更多了o(╯□╰)o',\n\t\t\tcolSpan: 12,\n\t\t\tisonline:navigator.onLine,\n\t\t\tnoNetwork:Images.common.ic_no_network\n\t\t};\n\t},\n\tmethods: {\n\t\t//获取用户信息\n\t\tgetUserInfo() {\n\t\t\tvar url = '/user/get?phone=' + this.$store.state.username + '&token=' + this.$store.state.token;\n\t\t\tthis.axios\n\t\t\t\t.get(url)\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登录过期，请重新登录');\n\t\t\t\t\t\tthis.$router.push('/login');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$store.commit('userinfo',response.data.info)\n\t\t\t\t\t\tthis.$store.commit('userID', response.data.info.id);\n\t\t\t\t\t\tthis.$store.commit('avatar', response.data.info.head ? response.data.head + '?v=' + Math.random() : '');\n\t\t\t\t\t\tthis.$store.commit('nickname', response.data.info.name);\n\t\t\t\t\t\tthis.$store.commit('gender', response.data.info.sex);\n\t\t\t\t\t\tthis.$store.commit('email', response.data.info.email);\n\t\t\t\t\t\tthis.$store.commit('birthday', response.data.info.birthday ? response.data.info.birthday : new Date());\n\t\t\t\t\t\tthis.avatar = this.$store.state.avatar;\n\t\t\t\t\t\twindow.console.log(response)\n\t\t\t\t\t\twindow.console.log(\"获取用户信息？？\")\n\t\t\t\t\t\tthis.getUserCartDetail();\n\t\t\t\t\t\tthis.getUserAddrList();\n\t\t\t\t\t\tthis.getCurrentIntegralForUser();\n\t\t\t\t\t\tthis.getOtherIntegralForUser();\n\t\t\t\t\t\tthis.getBusinessArray();\n\t\t\t\t\t\tthis.getAllActivities(this.$store.state.requestActivities);\n\t\t\t\t\t\tthis.netApi(this.$store.state.requestHomeGoods);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(response => {\n\t\t\t\t\tToast('网络请求出错，请稍候再试！');\n\t\t\t\t});\n\t\t},\n\t\t// 获取用户的购物车详情\n\t\tgetUserCartDetail() {\n\t\t\tvar url = '/cart/get?user_id=' + this.$store.state.userID + '&token=' + this.$store.state.token;\n\t\t\tthis.axios\n\t\t\t\t.get(url)\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录');\n\t\t\t\t\t\tthis.$router.push('/login');\n\t\t\t\t\t} else if (response.data.status === 1) {\n\t\t\t\t\t\tthis.$store.commit('allDatasData', response.data.info);\n\t\t\t\t\t\twindow.console.log(response)\n\t\t\t\t\t\twindow.console.log(\"获取用户购物车信息？？\")\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(response => {});\n\t\t},\n\t\t//获取用户收货地址\n\t\tgetUserAddrList() {\n\t\t\tvar url = '/ship/get?user_id=' + this.$store.state.userID + '&token=' + this.$store.state.token;\n\t\t\tthis.axios\n\t\t\t\t.get(url)\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录');\n\t\t\t\t\t\tthis.$router.push('/login');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$store.commit('receiverAddressList', response.data.info);\n\t\t\t\t\t\tthis.$store.commit('currentReceiverAddress');\n\t\t\t\t\t\twindow.console.log(response)\n\t\t\t\t\t\twindow.console.log(\"获取用户收货地址？？\")\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(response => {});\n\t\t},\n\t\t//获取用户通用积分\n\t\tgetCurrentIntegralForUser() {\n\t\t\tvar url = '/point/getUserpoint?user_id=' + this.$store.state.userID + '&token=' + this.$store.state.token;\n\t\t\tthis.axios\n\t\t\t\t.get(url)\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录');\n\t\t\t\t\t\tthis.$router.push('/login');\n\t\t\t\t\t} else if (response.data.status === 1) {\n\t\t\t\t\t\tthis.$store.commit('totalBlock', response.data.info.balance);\n\t\t\t\t\t\twindow.console.log(\"获取用户通用积分？？\",balance)\n\t\t\t\t\t\twindow.console.log(\"获取用户通用积分？？\")\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(response => {});\n\t\t},\n\t\t//获取用户其他积分列表\n\t\tgetOtherIntegralForUser() {\n\t\t\tvar url = '/point/getUserpoint?user_id=' + this.$store.state.userID + '&token=' + this.$store.state.token;\n\t\t\tthis.axios\n\t\t\t\t.get(url)\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录');\n\t\t\t\t\t\tthis.$router.push('/login');\n\t\t\t\t\t} else if (response.data.status === 1) {\n\t\t\t\t\t\tthis.intrgralData = response.data.info;\n\t\t\t\t\t\tthis.$store.commit('saveResult', response.data.info);\n\t\t\t\t\t\twindow.console.log(response)\n\t\t\t\t\t\twindow.console.log(\"获取用户积分？？\")\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(response => {});\n\t\t},\n\t\t//获取用户可领取的商家积分列表\n\t\tgetBusinessArray() {\n\t\t\tvar url = '/point/getPointpublish?phone=' + this.$store.state.username + '&token=' + this.$store.state.token;\n\t\t\tthis.axios\n\t\t\t\t.get(url)\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录');\n\t\t\t\t\t\tthis.$router.push('/login');\n\t\t\t\t\t} else if (response.data.status === 1) {\n\t\t\t\t\t\tthis.businessArray = response.data.info.slice(0, 8);\n\t\t\t\t\t\tthis.$store.commit('businessArray', response.data.info);\n\t\t\t\t\t\twindow.console.log(response)\n\t\t\t\t\t\twindow.console.log(\"获取用户可领取积分？？\")\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(response => {});\n\t\t},\n\t\tnetApi(count) {\n\t\t\t// var url = '/product/allList?page=' + count;\n\t\t\tvar url = '/product/get?token=' + this.$store.state.token\n\t\t\tthis.axios\n\t\t\t\t.get(url)\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (response.data.status === 1 && response.data.info.length > 0) {\n\t\t\t\t\t\tthis.$store.commit('requestHomeGoods', 1);\n\t\t\t\t\t\tthis.goods = [...this.goods, ...response.data.info];\n\t\t\t\t\t}\n\t\t\t\t\twindow.console.log(response)\n\t\t\t\t\twindow.console.log(\"获取netAPI？？\")\n\t\t\t\t})\n\t\t\t\t.catch(response => {});\n\t\t},\n\t\treceivePoints(item) {\n\t\t\tDialog.confirm({\n\t\t\t\ttitle: '提示',\n\t\t\t\tmessage: '是否确认领取积分'\n\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.ReceivePoints(item);\n\t\t\t\t})\n\t\t\t\t.catch(() => {});\n\t\t},\n\t\tReceivePoints(item) {\n\t\t\tvar url = '/point/change?id='+item.id+'&user_id='+this.$store.state.userID+'&token='+this.$store.state.token;\n\t\t\tthis.axios.get(url)\n\t\t\t\t// .get(url, {\n\t\t\t\t// \tparams: {\n\t\t\t\t// \t\t// username: this.$store.state.username,\n\t\t\t\t// \t\t// uid: this.$store.state.userID,\n\t\t\t\t// \t\tid: item.ID,\n\t\t\t\t// \t\t// point_id: item.PMID,\n\t\t\t\t// \t\t// token: this.$store.state.token\n\t\t\t\t// \t}\n\t\t\t\t// })\n\t\t\t\t.then(response => {\n\t\t\t\t\twindow.console.log(response)\n\t\t\t\t\tif (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录');\n\t\t\t\t\t\tthis.$router.push('/login');\n\t\t\t\t\t} else if (response.data.status === 1) {\n\t\t\t\t\t\tToast('领取积分成功');\n\t\t\t\t\t\tthis.getBusinessArray();\n\t\t\t\t\t\tthis.getOtherIntegralForUser();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tToast('领取积分失败');\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(response => {\n\t\t\t\t\tToast('网络请求出错，请稍后重试！');\n\t\t\t\t});\n\t\t},\n\t\tgetAllActivities(count) {\n\t\t\t// var url = '/user/getNews?page=' + count;\n\t\t\t// this.axios\n\t\t\t// \t.get(url)\n\t\t\t// \t.then(response => {\n\t\t\t// \t\tthis.$store.commit('requestActivities', 1);\n\t\t\t// \t\tthis.allActicities = response.data.obj.slice(0, 5);\n\t\t\t// \t\tthis.$store.commit('allActicities', response.data.obj);\n\t\t\t// \t})\n\t\t\t// \t.catch(response => {});\n\t\t},\n\t\tonLoad() {\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.netApi(this.$store.state.requestHomeGoods);\n\t\t\t\tthis.loading = false;\n\t\t\t\tif (this.$store.state.requestHomeGoods >= 5) {\n\t\t\t\t\tthis.finished = true;\n\t\t\t\t}\n\t\t\t}, 1000);\n\t\t},\t\n\t\tupdateOnlineStatus(e){\n\t\t\tconst {type} = e\n\t\t\tthis.isonline = type === 'online'\n\t\t},\n\t\tonRefresh(){\n\t\t\tthis.reload()\n\t\t}\n\t},\n\tbeforeMount() {\n\t\tthis.$store.commit('requestHomeGoods', 0);\n\t\tthis.$store.commit('requestActivities', 0);\n\t\tthis.$store.commit('username', localStorage.getItem('username'));\n\t\tthis.$store.commit('token', localStorage.getItem('token'));\n\t\tthis.getUserInfo();\n\t},\n\tmounted() {\n\t\twindow.addEventListener('online',this.updateOnlineStatus)\n\t\twindow.addEventListener('offline',this.updateOnlineStatus)\n\t\tbus.$on('receivePoints', item => {\n\t\t\tthis.receivePoints(item);\n\t\t}),\n\t\t\tbus.$on('getAllActivities', msg => {\n\t\t\t\tthis.getAllActivities(this.$store.state.requestActivities);\n\t\t\t});\n\t},\n\tbeforeDestroy() {\n\t\twindow.removeEventListener('online',this.updateOnlineStatus)\n\t\twindow.removeEventListener('offline',this.updateOnlineStatus)\n\t},\t\n\tcomputed: {\n\t\tallBlock() {\n\t\t\treturn this.$store.getters.allBlock;\n\t\t},\n\t\tbgImg() {\n\t\t\treturn function(index) {\n\t\t\t\treturn {\n\t\t\t\t\tbackgroundImage: 'url(' + Images.home.ic_integral_data[index] + ')',\n\t\t\t\t\tbackgroundRepeat: 'no-repeat',\n\t\t\t\t\tbackgroundSize: '100% 100%'\n\t\t\t\t};\n\t\t\t};\n\t\t}\n\t},\n\twatch:{\n\t\tisonline(){\n\t\t\tthis.isonline = navigator.onLine\n\t\t}\n\t}\n};\n",{"version":3,"sources":["home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"home.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n\t<div id=\"home\">\n\t\t<img class=\"bg\" :src=\"bg\" alt=\"\" />\n\t\t<van-nav-bar title=\"布洛克积分商城\" :border=\"border\" fixed />\n\t\t<div v-if=\"isonline\">\n\t\t\t<my-integral :avatar=\"avatar\" :allBlock=\"allBlock\"></my-integral>\n\n\t\t\t<div style=\"overflow-y: hidden;overflow-x: scroll;text-align: left; margin-top: 0.625rem;\">\n\t\t\t\t<ul class=\"scrollWidth\">\n\t\t\t\t\t<li v-for=\"(item, index) in businessArray\" :key=\"index\" :style=\"bgImg(index)\">\n\t\t\t\t\t\t<ul class=\"scrollContent\">\n\t\t\t\t\t\t\t<li>{{ item.PMName }}</li>\n\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t<span>{{ item.balance }}</span>\n\t\t\t\t\t\t\t\t积分\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li><van-button @click=\"receivePoints(item)\"></van-button></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\n\t\t\t<swipe :swipeItems=\"allActicities\"></swipe>\n\n\t\t\t<van-cell-group><van-cell title=\"当前可兑换商品\" :icon=\"gift_icon\" value=\"更多\" is-link value-class=\"value_class\" /></van-cell-group>\n\n\t\t\t<van-list v-model=\"loading\" :finished=\"finished\" :finished-text=\"finishedText\" @load=\"onLoad\">\n\t\t\t\t<double-card :colSpan=\"colSpan\" :doubleCardItems=\"goods\" fromPage=\"home\"></double-card>\n\t\t\t</van-list>\n\t\t</div>\n\t\t<div v-else class=\"offline\">\n\t\t\t<div>\n\t\t\t\t<van-image :src=\"noNetwork\" />\n\t\t\t\t<van-button plain type=\"info\" @click=\"onRefresh\">点击刷新</van-button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport bus from '@/utils/bus.js';\nimport { NavBar, Toast, Button, Dialog, CellGroup, Cell, List } from 'vant';\nimport { Images } from '@/resources/index.js';\nimport myIntegral from '@/components/myIntegral.vue';\nimport swipe from '@/components/swipe.vue';\nimport doubleCard from '@/components/double-card.vue';\nexport default {\n\tinject:['reload'],\n\tcomponents: {\n\t\t[NavBar.name]: NavBar,\n\t\t[Toast.name]: Toast,\n\t\t[Button.name]: Button,\n\t\t[Dialog.Component.name]: Dialog.Component,\n\t\t[CellGroup.name]: CellGroup,\n\t\t[Cell.name]: Cell,\n\t\t[List.name]: List,\n\t\tmyIntegral,\n\t\tswipe,\n\t\tdoubleCard\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tbg: Images.common.ic_header_bg,\n\t\t\tborder: false,\n\t\t\tintrgralData: '',\n\t\t\tbusinessArray: [],\n\t\t\tgoods: [],\n\t\t\tavatar: '',\n\t\t\tallActicities: [],\n\t\t\tgift_icon: Images.home.ic_gift,\n\t\t\tloading: false,\n\t\t\tfinished: false,\n\t\t\tfinishedText: '没有更多了o(╯□╰)o',\n\t\t\tcolSpan: 12,\n\t\t\tisonline:navigator.onLine,\n\t\t\tnoNetwork:Images.common.ic_no_network\n\t\t};\n\t},\n\tmethods: {\n\t\t//获取用户信息\n\t\tgetUserInfo() {\n\t\t\tvar url = '/user/get?phone=' + this.$store.state.username + '&token=' + this.$store.state.token;\n\t\t\tthis.axios\n\t\t\t\t.get(url)\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登录过期，请重新登录');\n\t\t\t\t\t\tthis.$router.push('/login');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$store.commit('userinfo',response.data.info)\n\t\t\t\t\t\tthis.$store.commit('userID', response.data.info.id);\n\t\t\t\t\t\tthis.$store.commit('avatar', response.data.info.head ? response.data.head + '?v=' + Math.random() : '');\n\t\t\t\t\t\tthis.$store.commit('nickname', response.data.info.name);\n\t\t\t\t\t\tthis.$store.commit('gender', response.data.info.sex);\n\t\t\t\t\t\tthis.$store.commit('email', response.data.info.email);\n\t\t\t\t\t\tthis.$store.commit('birthday', response.data.info.birthday ? response.data.info.birthday : new Date());\n\t\t\t\t\t\tthis.avatar = this.$store.state.avatar;\n\t\t\t\t\t\twindow.console.log(response)\n\t\t\t\t\t\twindow.console.log(\"获取用户信息？？\")\n\t\t\t\t\t\tthis.getUserCartDetail();\n\t\t\t\t\t\tthis.getUserAddrList();\n\t\t\t\t\t\tthis.getCurrentIntegralForUser();\n\t\t\t\t\t\tthis.getOtherIntegralForUser();\n\t\t\t\t\t\tthis.getBusinessArray();\n\t\t\t\t\t\tthis.getAllActivities(this.$store.state.requestActivities);\n\t\t\t\t\t\tthis.netApi(this.$store.state.requestHomeGoods);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(response => {\n\t\t\t\t\tToast('网络请求出错，请稍候再试！');\n\t\t\t\t});\n\t\t},\n\t\t// 获取用户的购物车详情\n\t\tgetUserCartDetail() {\n\t\t\tvar url = '/cart/get?user_id=' + this.$store.state.userID + '&token=' + this.$store.state.token;\n\t\t\tthis.axios\n\t\t\t\t.get(url)\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录');\n\t\t\t\t\t\tthis.$router.push('/login');\n\t\t\t\t\t} else if (response.data.status === 1) {\n\t\t\t\t\t\tthis.$store.commit('allDatasData', response.data.info);\n\t\t\t\t\t\twindow.console.log(response)\n\t\t\t\t\t\twindow.console.log(\"获取用户购物车信息？？\")\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(response => {});\n\t\t},\n\t\t//获取用户收货地址\n\t\tgetUserAddrList() {\n\t\t\tvar url = '/ship/get?user_id=' + this.$store.state.userID + '&token=' + this.$store.state.token;\n\t\t\tthis.axios\n\t\t\t\t.get(url)\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录');\n\t\t\t\t\t\tthis.$router.push('/login');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.$store.commit('receiverAddressList', response.data.info);\n\t\t\t\t\t\tthis.$store.commit('currentReceiverAddress');\n\t\t\t\t\t\twindow.console.log(response)\n\t\t\t\t\t\twindow.console.log(\"获取用户收货地址？？\")\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(response => {});\n\t\t},\n\t\t//获取用户通用积分\n\t\tgetCurrentIntegralForUser() {\n\t\t\tvar url = '/point/getUserpoint?user_id=' + this.$store.state.userID + '&token=' + this.$store.state.token;\n\t\t\tthis.axios\n\t\t\t\t.get(url)\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录');\n\t\t\t\t\t\tthis.$router.push('/login');\n\t\t\t\t\t} else if (response.data.status === 1) {\n\t\t\t\t\t\tthis.$store.commit('totalBlock', response.data.info.balance);\n\t\t\t\t\t\twindow.console.log(\"获取用户通用积分？？\",balance)\n\t\t\t\t\t\twindow.console.log(\"获取用户通用积分？？\")\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(response => {});\n\t\t},\n\t\t//获取用户其他积分列表\n\t\tgetOtherIntegralForUser() {\n\t\t\tvar url = '/point/getUserpoint?user_id=' + this.$store.state.userID + '&token=' + this.$store.state.token;\n\t\t\tthis.axios\n\t\t\t\t.get(url)\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录');\n\t\t\t\t\t\tthis.$router.push('/login');\n\t\t\t\t\t} else if (response.data.status === 1) {\n\t\t\t\t\t\tthis.intrgralData = response.data.info;\n\t\t\t\t\t\tthis.$store.commit('saveResult', response.data.info);\n\t\t\t\t\t\twindow.console.log(response)\n\t\t\t\t\t\twindow.console.log(\"获取用户积分？？\")\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(response => {});\n\t\t},\n\t\t//获取用户可领取的商家积分列表\n\t\tgetBusinessArray() {\n\t\t\tvar url = '/point/getPointpublish?phone=' + this.$store.state.username + '&token=' + this.$store.state.token;\n\t\t\tthis.axios\n\t\t\t\t.get(url)\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录');\n\t\t\t\t\t\tthis.$router.push('/login');\n\t\t\t\t\t} else if (response.data.status === 1) {\n\t\t\t\t\t\tthis.businessArray = response.data.info.slice(0, 8);\n\t\t\t\t\t\tthis.$store.commit('businessArray', response.data.info);\n\t\t\t\t\t\twindow.console.log(response)\n\t\t\t\t\t\twindow.console.log(\"获取用户可领取积分？？\")\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(response => {});\n\t\t},\n\t\tnetApi(count) {\n\t\t\t// var url = '/product/allList?page=' + count;\n\t\t\tvar url = '/product/get?token=' + this.$store.state.token\n\t\t\tthis.axios\n\t\t\t\t.get(url)\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (response.data.status === 1 && response.data.info.length > 0) {\n\t\t\t\t\t\tthis.$store.commit('requestHomeGoods', 1);\n\t\t\t\t\t\tthis.goods = [...this.goods, ...response.data.info];\n\t\t\t\t\t}\n\t\t\t\t\twindow.console.log(response)\n\t\t\t\t\twindow.console.log(\"获取netAPI？？\")\n\t\t\t\t})\n\t\t\t\t.catch(response => {});\n\t\t},\n\t\treceivePoints(item) {\n\t\t\tDialog.confirm({\n\t\t\t\ttitle: '提示',\n\t\t\t\tmessage: '是否确认领取积分'\n\t\t\t})\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.ReceivePoints(item);\n\t\t\t\t})\n\t\t\t\t.catch(() => {});\n\t\t},\n\t\tReceivePoints(item) {\n\t\t\tvar url = '/point/change?id='+item.id+'&user_id='+this.$store.state.userID+'&token='+this.$store.state.token;\n\t\t\tthis.axios.get(url)\n\t\t\t\t// .get(url, {\n\t\t\t\t// \tparams: {\n\t\t\t\t// \t\t// username: this.$store.state.username,\n\t\t\t\t// \t\t// uid: this.$store.state.userID,\n\t\t\t\t// \t\tid: item.ID,\n\t\t\t\t// \t\t// point_id: item.PMID,\n\t\t\t\t// \t\t// token: this.$store.state.token\n\t\t\t\t// \t}\n\t\t\t\t// })\n\t\t\t\t.then(response => {\n\t\t\t\t\twindow.console.log(response)\n\t\t\t\t\tif (response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录');\n\t\t\t\t\t\tthis.$router.push('/login');\n\t\t\t\t\t} else if (response.data.status === 1) {\n\t\t\t\t\t\tToast('领取积分成功');\n\t\t\t\t\t\tthis.getBusinessArray();\n\t\t\t\t\t\tthis.getOtherIntegralForUser();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tToast('领取积分失败');\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(response => {\n\t\t\t\t\tToast('网络请求出错，请稍后重试！');\n\t\t\t\t});\n\t\t},\n\t\tgetAllActivities(count) {\n\t\t\t// var url = '/user/getNews?page=' + count;\n\t\t\t// this.axios\n\t\t\t// \t.get(url)\n\t\t\t// \t.then(response => {\n\t\t\t// \t\tthis.$store.commit('requestActivities', 1);\n\t\t\t// \t\tthis.allActicities = response.data.obj.slice(0, 5);\n\t\t\t// \t\tthis.$store.commit('allActicities', response.data.obj);\n\t\t\t// \t})\n\t\t\t// \t.catch(response => {});\n\t\t},\n\t\tonLoad() {\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.netApi(this.$store.state.requestHomeGoods);\n\t\t\t\tthis.loading = false;\n\t\t\t\tif (this.$store.state.requestHomeGoods >= 5) {\n\t\t\t\t\tthis.finished = true;\n\t\t\t\t}\n\t\t\t}, 1000);\n\t\t},\t\n\t\tupdateOnlineStatus(e){\n\t\t\tconst {type} = e\n\t\t\tthis.isonline = type === 'online'\n\t\t},\n\t\tonRefresh(){\n\t\t\tthis.reload()\n\t\t}\n\t},\n\tbeforeMount() {\n\t\tthis.$store.commit('requestHomeGoods', 0);\n\t\tthis.$store.commit('requestActivities', 0);\n\t\tthis.$store.commit('username', localStorage.getItem('username'));\n\t\tthis.$store.commit('token', localStorage.getItem('token'));\n\t\tthis.getUserInfo();\n\t},\n\tmounted() {\n\t\twindow.addEventListener('online',this.updateOnlineStatus)\n\t\twindow.addEventListener('offline',this.updateOnlineStatus)\n\t\tbus.$on('receivePoints', item => {\n\t\t\tthis.receivePoints(item);\n\t\t}),\n\t\t\tbus.$on('getAllActivities', msg => {\n\t\t\t\tthis.getAllActivities(this.$store.state.requestActivities);\n\t\t\t});\n\t},\n\tbeforeDestroy() {\n\t\twindow.removeEventListener('online',this.updateOnlineStatus)\n\t\twindow.removeEventListener('offline',this.updateOnlineStatus)\n\t},\t\n\tcomputed: {\n\t\tallBlock() {\n\t\t\treturn this.$store.getters.allBlock;\n\t\t},\n\t\tbgImg() {\n\t\t\treturn function(index) {\n\t\t\t\treturn {\n\t\t\t\t\tbackgroundImage: 'url(' + Images.home.ic_integral_data[index] + ')',\n\t\t\t\t\tbackgroundRepeat: 'no-repeat',\n\t\t\t\t\tbackgroundSize: '100% 100%'\n\t\t\t\t};\n\t\t\t};\n\t\t}\n\t},\n\twatch:{\n\t\tisonline(){\n\t\t\tthis.isonline = navigator.onLine\n\t\t}\n\t}\n};\n</script>\n\n<style scoped>\n::-webkit-scrollbar {\n\tdisplay: none;\n}\n.bg {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 6.5rem;\n\tz-index: -1;\n}\n.van-nav-bar {\n\tbackground: url(../assets/Images/Home/header_bg.png);\n}\n.van-nav-bar__title {\n\tcolor: #fff;\n\tfont-size: 1.125rem;\n}\n.content {\n\twidth: 100%;\n\theight: 62.5rem;\n\tbackground: rgba(0, 0, 0, 0);\n}\n.scrollWidth {\n\t/* width: 51.125rem; */\n\twidth: auto;\n\twhite-space: nowrap;\n\tmargin-left: 0.625rem;\n}\n.scrollWidth > li {\n\tlist-style: none;\n\tdisplay: inline-block;\n\t/* float: left; */\n\tmargin-right: 0.3125rem;\n\twidth: 5.78125rem;\n\theight: 5.78125rem;\n\tborder-radius: 0.3125rem;\n}\n\n.scrollContent li {\n\tlist-style: none;\n\tmargin: 0.3rem;\n\tcolor: white;\n}\n.scrollContent .van-button {\n\twidth: 3.125rem;\n\theight: 0.9375rem;\n\tborder: none;\n\tbackground: url('../assets/Images/Home/input.png') no-repeat center;\n\tbackground-size: 100% 100%;\n}\n.van-cell-group {\n\tmargin: 0.625rem 0.625rem 0 0.625rem;\n\tbackground: rgba(0, 0, 0, 0);\n}\n.van-cell {\n\tbackground: #ffa500;\n\tborder-radius: 0.3125rem;\n\theight: 2.5rem;\n\tcolor: white;\n\ttext-align: left;\n}\n.van-cell__right-icon {\n\tcolor: white;\n}\n.value_class {\n\tcolor: white;\n}\n.offline{\n\twidth: 100%;\n\tmargin: 0 auto;\n}\n.offline div{\n\twidth: 50%;\n\tposition: absolute;\n\tleft: 50%;\n\ttop: 20%;\n}\n.offline .van-image{\n\twidth: 100%;\n\theight: auto;\n\tposition: relative;\n\tleft: -50%;\n}\n.offline .van-button{\n\twidth: 6.25rem;\n\tposition: relative;\n\tleft: -50%;\n\tmargin-top: 0.625rem;\n}\n</style>\n"]}]}