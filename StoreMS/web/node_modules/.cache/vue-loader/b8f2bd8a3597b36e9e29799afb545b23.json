{"remainingRequest":"/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/student02/Desktop/youduitong1/src/pages/confirmOrder.vue?vue&type=style&index=0&id=2cdb201c&scoped=true&lang=css&","dependencies":[{"path":"/Users/student02/Desktop/youduitong1/src/pages/confirmOrder.vue","mtime":1568712826000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.van-nav-bar__arrow{\n\tfont-size: 1.5rem;\n\tcolor: #000000;\n}\n.content{\n\tmargin: 2.875rem auto 3.125rem;\n}\n.address{\n\tbackground: white;\n}\n.address .child1 .van-icon,.address .child3 .van-icon{\n\tmargin: 1.05rem auto;\n}\n.address .child2{\n\ttext-align: left;\n}\n.address .child2 .van-row{\n\tmargin: 0.5rem auto;\n\tfont-size: 0.8125rem;\n}\n.line{\n\tbackground: url(../assets/Images/Shop/orderLine.png);\n\tbackground-size: 100%;\n\twidth: 100%;\n\theight: 0.3125rem;\n}\n.van-card{\n\tbackground: white;\n\tmargin-top: 0.3125rem;\n}\n.van-card__title{\n\ttext-align: left;\n}\n.van-card__price{\n\tfloat: left;\n}\n.quantity{\n\tbackground: white;\n\tborder-top: 0.0625rem solid #F0F0F0;\n}\n.quantity .van-col{\n\tpadding: 0.625rem 1rem;\n\tfont-size: 0.875rem;\n\tline-height: 1.5rem;\n}\n.quantity .van-col:first-child{\n\ttext-align: left;\n\tfont-size: 0.9375rem;\n}\n.quantity .van-col:last-child{\n\ttext-align: right;\n}\n.delivery{\n\ttext-align: left;\n}\n.totalPrice{\n\ttext-align: left;\n}\n.totalPrice .van-cell__value{\n\tcolor: red;\n}\n.delivery .van-cell,.totalPrice .van-cell{\n\tfont-size: 0.875rem;\n\tcolor: #999999;\n}\n.overlay{\n\tbackground: rgba(0,0,0,0);\n}\n.van-loading{\n\tposition: absolute;\n\tleft: 45%;\n\ttop: 45%;\n}\n",{"version":3,"sources":["confirmOrder.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"confirmOrder.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n\t<div>\n\t\t<van-nav-bar\n\t\t\ttitle=\"确认订单\"\n\t\t\tleft-arrow\n\t\t\tfixed\n\t\t\t@click-left=\"goBack\"\n\t\t/>\n\t\t<div class=\"content\">\n\t\t\t<van-contact-card v-if=\"!currentAddr\" @click=\"selectAddr\"/>\n\t\t\t<div v-else>\n\t\t\t\t<van-row class=\"address\" @click=\"selectAddr\">\n\t\t\t\t\t<van-col span=\"4\" class=\"child1\">\n\t\t\t\t\t\t<van-icon :name=\"local_icon\" size=\"1.5rem\"/>\n\t\t\t\t\t</van-col>\n\t\t\t\t\t<van-col span=\"18\" class=\"child2\">\n\t\t\t\t\t\t<van-row>\n\t\t\t\t\t\t\t<van-col span=\"12\">{{currentAddr.ReceiverName}}</van-col>\n\t\t\t\t\t\t\t<van-col span=\"12\">{{currentAddr.ReceiverMobile}}</van-col>\n\t\t\t\t\t\t</van-row>\n\t\t\t\t\t\t<van-row>\n\t\t\t\t\t\t\t<van-col span=\"24\">{{currentAddr.ReceiverProvince+currentAddr.ReceiverCity+currentAddr.ReceiverDistrict+currentAddr.DetailAddress}}</van-col>\n\t\t\t\t\t\t</van-row>\n\t\t\t\t\t</van-col>\n\t\t\t\t\t<van-col span=\"2\" class=\"child3\">\n\t\t\t\t\t\t<van-icon name=\"arrow\" />\n\t\t\t\t\t</van-col>\n\t\t\t\t</van-row>\n\t\t\t\t<div class=\"line\"></div>\n\t\t\t</div>\n\n\t\t\t<div v-if=\"fromPage === 'goodsDetail'\">\n\t\t\t\t<van-card\n\t\t\t\t\t:num=\"data.goodsNum\"\n\t\t\t\t\t:price=\"data.Price\"\n\t\t\t\t\t:title=\"data.Name\"\n\t\t\t\t\t:thumb=\"data.MainImage\"\n\t\t\t\t\tcurrency=\"Block\"\n\t\t\t\t/>\n\t\t\t\t<van-row class=\"quantity\">\n\t\t\t\t\t<van-col span=\"12\">购买数量</van-col>\n\t\t\t\t\t<van-col span=\"12\">\n\t\t\t\t\t\t<van-stepper v-model=\"data.goodsNum\" :max=\"data.Stock\" disable-input integer/>\n\t\t\t\t\t</van-col>\n\t\t\t\t</van-row>\n\t\t\t\t<van-cell-group class=\"delivery\" >\n\t\t\t\t\t<van-cell title=\"配送方式\" value=\"快递 免邮\" is-link/>\n\t\t\t\t</van-cell-group>\n\t\t\t\t<van-cell-group class=\"totalPrice\">\n\t\t\t\t\t<van-cell title=\"商品金额\" :value=\"`Block ${totalPrice.toFixed(2)}`\" />\n\t\t\t\t</van-cell-group>\n\t\t\t</div>\n\t\t\t<div v-else>\n\t\t\t\t<div v-for=\"(item,index) in data\" :key=\"index\">\n\t\t\t\t\t<van-card\n\t\t\t\t\t\t:num=\"item.Quantity\"\n\t\t\t\t\t\t:price=\"item.Price\"\n\t\t\t\t\t\t:title=\"item.ProductName\"\n\t\t\t\t\t\t:thumb=\"item.MainImage\"\n\t\t\t\t\t\tcurrency=\"Block\"\n\t\t\t\t\t/>\n\t\t\t\t\t<van-cell-group class=\"delivery\" >\n\t\t\t\t\t\t<van-cell title=\"配送方式\" value=\"快递 免邮\" is-link/>\n\t\t\t\t\t</van-cell-group>\n\t\t\t\t\t<van-cell-group class=\"totalPrice\">\n\t\t\t\t\t\t<van-cell title=\"商品金额\" :value=\"`Block ${singleTotalPrice(item.Quantity,item.Price)}`\" />\n\t\t\t\t\t</van-cell-group>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<van-overlay :show=\"show\" class-name=\"overlay\" />\n\t\t<van-loading v-if=\"show\"></van-loading>\n\t\t<van-submit-bar \n\t\t\t:price=\"totalPrice*100\"\n\t\t\tbutton-text=\"提交订单\"\n\t\t\tcurrency=\"Block\"\n\t\t\tsafe-area-inset-bottom\n\t\t\t@submit=\"onSubmit\"\n\t\t/>\n\t\t\n\t</div>\n</template>\n\n<script>\n\timport {NavBar,Row,Col,CellGroup,Cell,Button,Image,SubmitBar,Card,Icon,Stepper,Overlay,Loading,Toast,ContactCard} from 'vant'\n\timport {Images} from '@/resources/index.js'\n\texport default{\n\t\tcomponents:{\n\t\t\t[NavBar.name]:NavBar,\n\t\t\t[Row.name]:Row,\n\t\t\t[Col.name]:Col,\n\t\t\t[CellGroup.name]:CellGroup,\n\t\t\t[Cell.name]:Cell,\n\t\t\t[Button.name]:Button,\n\t\t\t[Image.name]:Image,\n\t\t\t[SubmitBar.name]:SubmitBar,\n\t\t\t[Card.name]:Card,\n\t\t\t[Icon.name]:Icon,\n\t\t\t[Stepper.name]:Stepper,\n\t\t\t[Overlay.name]:Overlay,\n\t\t\t[Loading.name]:Loading,\n\t\t\t[Toast.name]:Toast,\n\t\t\t[ContactCard.name]:ContactCard\n\t\t},\n\t\tdata(){\n\t\t\treturn{\n\t\t\t\tfromPage:'',\n\t\t\t\tdata:'',\n\t\t\t\tcurrentAddr:'',\n\t\t\t\tlocal_icon:Images.shop.ic_address_icon,\n\t\t\t\tline:Images.shop.ic_line,\n\t\t\t\tshow:false\n\t\t\t}\n\t\t},\n\t\tmethods:{\n\t\t\tgoBack(){\n\t\t\t\tthis.$router.back()\n\t\t\t},\n\t\t\tgetData(){\n\t\t\t\tif (this.fromPage === 'goodsDetail') {\n\t\t\t\t\tthis.data = this.$store.state.confirmOrder\n\t\t\t\t}\n\t\t\t\tif (this.fromPage === 'cart') {\n\t\t\t\t\tthis.data = []\n\t\t\t\t\tfor (var i = 0; i < this.$store.state.allDatas.data.length; i++) {\n\t\t\t\t\t\tif (this.$store.state.allDatas.data[i].Checked) {\n\t\t\t\t\t\t\tthis.data.push(this.$store.state.allDatas.data[i])\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.currentAddr = this.$store.state.currentReceiverAddress\n\t\t\t},\n\t\t\tselectAddr(){\n\t\t\t\tthis.$router.push('/addressSetting')\n\t\t\t},\n\t\t\tonSubmit(){\n\t\t\t\tif (this.fromPage === 'goodsDetail') {\n\t\t\t\t\tthis.show = true\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\tUserID:this.$store.state.userID,\n\t\t\t\t\t\tProductID:this.data.goodsID,\n\t\t\t\t\t\tQuantity:this.data.goodsNum,\n\t\t\t\t\t\tShippingID:this.$store.state.currentReceiverAddress.ID\n\t\t\t\t\t}\n\t\t\t\t\tvar url = '/order/buyDirect?token='+this.$store.state.token\n\t\t\t\t\tthis.axios.post(url,data).then((response)=>{\n\t\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t\t}else if (response.data.status === 1) {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t\tthis.$store.commit('paymentData',response.data.obj)\n\t\t\t\t\t\t\t\tthis.$router.push('/paymentPage')\n\t\t\t\t\t\t\t}, 1000)\n\t\t\t\t\t\t} \n\t\t\t\t\t}).catch((response)=>{\n\t\t\t\t\t\tToast('网络请求出错，请重试')\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif (this.fromPage === 'cart') {\n\t\t\t\t\tthis.show = true\n\t\t\t\t\tvar url = '/order/createOrder?user_id='+this.$store.state.userID+'&ship_id='+this.$store.state.currentReceiverAddress.ID+'&token='+this.$store.state.token\n\t\t\t\t\tthis.axios.get(url).then((response)=>{\n\t\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t\t}else if(response.data.status === 1){\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.$store.commit('deleteGoodFromCart')\n\t\t\t\t\t\t\t\tthis.show = false\n\t\t\t\t\t\t\t\tthis.$store.commit('paymentData',response.data.obj)\n\t\t\t\t\t\t\t\tthis.$router.push('/paymentPage')\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t}\n\t\t\t\t\t}).catch((response)=>{\n\t\t\t\t\t\tToast('网络请求出错，请重试')\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\twatch:{\n\t\t\tgoodsNum(){\n\t\t\t\tthis.data.goodsNum = this.data.goodsNum <= this.data.Stock ? this.data.goodsNum : this.data.Stock\n\t\t\t}\n\t\t},\n\t\tcomputed:{\n\t\t\tsingleTotalPrice(){\n\t\t\t\treturn function (num,price) {\n\t\t\t\t\treturn (num*price).toFixed(2)\n\t\t\t\t}\n\t\t\t},\n\t\t\ttotalPrice(){\n\t\t\t\tif (this.fromPage === 'goodsDetail') {\n\t\t\t\t\treturn this.data.Price*this.data.goodsNum\n\t\t\t\t}\n\t\t\t\tif (this.fromPage === 'cart') {\n\t\t\t\t\tvar totalPrice = 0\n\t\t\t\t\tfor (var i = 0; i < this.data.length; i++) {\n\t\t\t\t\t\ttotalPrice += this.data[i].Quantity * this.data[i].Price\n\t\t\t\t\t}\n\t\t\t\t\treturn totalPrice\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tbeforeRouteEnter(to,from,next){\n\t\t\tnext(vm=>{\n\t\t\t\tvm.fromPage = from.name\n\t\t\t\tvm.getData()\n\t\t\t})\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t.van-nav-bar__arrow{\n\t\tfont-size: 1.5rem;\n\t\tcolor: #000000;\n\t}\n\t.content{\n\t\tmargin: 2.875rem auto 3.125rem;\n\t}\n\t.address{\n\t\tbackground: white;\n\t}\n\t.address .child1 .van-icon,.address .child3 .van-icon{\n\t\tmargin: 1.05rem auto;\n\t}\n\t.address .child2{\n\t\ttext-align: left;\n\t}\n\t.address .child2 .van-row{\n\t\tmargin: 0.5rem auto;\n\t\tfont-size: 0.8125rem;\n\t}\n\t.line{\n\t\tbackground: url(../assets/Images/Shop/orderLine.png);\n\t\tbackground-size: 100%;\n\t\twidth: 100%;\n\t\theight: 0.3125rem;\n\t}\n\t.van-card{\n\t\tbackground: white;\n\t\tmargin-top: 0.3125rem;\n\t}\n\t.van-card__title{\n\t\ttext-align: left;\n\t}\n\t.van-card__price{\n\t\tfloat: left;\n\t}\n\t.quantity{\n\t\tbackground: white;\n\t\tborder-top: 0.0625rem solid #F0F0F0;\n\t}\n\t.quantity .van-col{\n\t\tpadding: 0.625rem 1rem;\n\t\tfont-size: 0.875rem;\n\t\tline-height: 1.5rem;\n\t}\n\t.quantity .van-col:first-child{\n\t\ttext-align: left;\n\t\tfont-size: 0.9375rem;\n\t}\n\t.quantity .van-col:last-child{\n\t\ttext-align: right;\n\t}\n\t.delivery{\n\t\ttext-align: left;\n\t}\n\t.totalPrice{\n\t\ttext-align: left;\n\t}\n\t.totalPrice .van-cell__value{\n\t\tcolor: red;\n\t}\n\t.delivery .van-cell,.totalPrice .van-cell{\n\t\tfont-size: 0.875rem;\n\t\tcolor: #999999;\n\t}\n\t.overlay{\n\t\tbackground: rgba(0,0,0,0);\n\t}\n\t.van-loading{\n\t\tposition: absolute;\n\t\tleft: 45%;\n\t\ttop: 45%;\n\t}\n</style>\n"]}]}