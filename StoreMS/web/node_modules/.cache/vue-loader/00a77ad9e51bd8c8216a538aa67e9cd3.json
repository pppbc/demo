{"remainingRequest":"/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/student02/Desktop/youduitong1/src/pages/orderPage/refundAndReturnPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/student02/Desktop/youduitong1/src/pages/orderPage/refundAndReturnPage.vue","mtime":1568896773000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/student02/Desktop/youduitong1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {NavBar,Tabs,Tab,List,Toast,Dialog} from 'vant'\nimport {Images} from '@/resources/index.js'\nimport orderCell from '@/components/orderCell.vue'\nexport default{\n\tcomponents:{\n\t\t[NavBar.name]:NavBar,\n\t\t[Tabs.name]:Tabs,\n\t\t[Tab.name]:Tab,\n\t\t[List.name]:List,\n\t\t[Toast.name]:Toast,\n\t\t[Dialog.Component.name]:Dialog.Component,\n\t\torderCell\n\t},\n\tdata(){\n\t\treturn {\n\t\t\tbg:Images.indent.ic_bg,\n\t\t\tactive:'退款',\n\t\t\tdatalist:'',\n\t\t\ttabs:['退款','退货'],\n\t\t\ttitle:'',\n\t\t\tloading:false,\n\t\t\tfinished:false,\n\t\t\toffsetTop:46\n\t\t}\n\t},\n\tmethods:{\n\t\tgoBack(){\n\t\t\tthis.$store.commit('changeTabbarActive','mine')\n\t\t\tthis.$router.push('/main/mine')\n\t\t},\n\t\ttabChange(name){\n\t\t\tthis.loading = false,\n\t\t\tthis.finished = false\n\t\t\tthis.datalist = []\n\t\t\tthis.$store.commit('requestRefundReturnListCount',0)\n\t\t\tthis.getList(this.$store.state.requestRefundReturnListCount)\n\t\t},\n\t\tgetList(count){\n\t\t\tvar url = ''\n\t\t\tif (this.active === '退款') {\n\t\t\t\turl = '/order/orderReturnList?user_id='+this.$store.state.userID+'&token='+this.$store.state.token\n\t\t\t} else if (this.active === '退货') {\n\t\t\t\turl = '/order/orderProductList?user_id='+this.$store.state.userID+'&token='+this.$store.state.token\n\t\t\t} else{\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.axios.get(url).then((response)=>{\n\t\t\t\tconsole.log(response)\n\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t}else if (response.data.status === 1) {\n\t\t\t\t\tif (response.data.obj.length > 0) {\n\t\t\t\t\t\tthis.$store.commit('requestRefundReturnListCount',1)\n\t\t\t\t\t\tthis.datalist = [...this.datalist,...response.data.obj]\n\t\t\t\t\t} else{\n\t\t\t\t\t\tthis.finished = true\n\t\t\t\t\t}\n\t\t\t\t} else{\n\t\t\t\t\tToast('数据请求失败，请重试')\n\t\t\t\t}\n\t\t\t}).catch((response)=>{\n\t\t\t\tToast('网络请求出错，请重试')\n\t\t\t})\n\t\t},\n\t\tonLoad(){\n\t\t\tsetTimeout(()=>{\n\t\t\t\tthis.getList(this.$store.state.requestRefundReturnListCount)\n\t\t\t\tthis.loading = false\n\t\t\t\tthis.finished = true\n\t\t\t},500)\n\t\t},\n\t\torderDetail(item){\n\t\t\titem.title = this.active\n\t\t\tthis.$store.commit('orderDetail',item)\n\t\t\tthis.$router.push('/orderDetail')\n\t\t},\n\t\tcancelRefund(item,index){\n\t\t\tDialog.confirm({\n\t\t\t\ttitle:'提示',\n\t\t\t\tmessage:'是否取消退款'\n\t\t\t}).then(()=>{\n\t\t\t\tvar url = '/order/cancelReturn?user_id='+this.$store.state.userID+'&order_no='+item.OrderNo+'&product_id='+item.ProductID+'&return_id='+item.ID+'&token='+this.$store.state.token\n\t\t\t\tthis.axios.get(url).then((response)=>{\n\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t}else if (response.data.status === 1) {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tToast(response.data.detail)\n\t\t\t\t\t\t\tthis.datalist.splice(index,1)\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t}\n\t\t\t\t}).catch((response)=>{\n\t\t\t\t\tToast('网络请求出错，请重试')\n\t\t\t\t})\n\t\t\t}).catch(()=>{})\n\t\t}\n\t},\n\tcomputed:{\n\t\torderStatus(){\n\t\t\treturn function(status){\n\t\t\t\tvar title = ''\n\t\t\t\tif (this.active === '退款') {\n\t\t\t\t\tif (status === 1) {\n\t\t\t\t\t\ttitle = '退款中'\n\t\t\t\t\t}\n\t\t\t\t\tif (status === 2) {\n\t\t\t\t\t\ttitle = '退款成功'\n\t\t\t\t\t}\n\t\t\t\t\tif (status === 3) {\n\t\t\t\t\t\ttitle = '退款失败'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (this.active === '退货') {\n\t\t\t\t\tif (status === 1) {\n\t\t\t\t\t\ttitle = '退货申请中'\n\t\t\t\t\t}\n\t\t\t\t\tif (status === 2) {\n\t\t\t\t\t\ttitle = '退货申请成功'\n\t\t\t\t\t}\n\t\t\t\t\tif (status === 3) {\n\t\t\t\t\t\ttitle = '退货申请失败'\n\t\t\t\t\t}\n\t\t\t\t\tif (status === 4) {\n\t\t\t\t\t\ttitle = '等待卖家收货'\n\t\t\t\t\t}\n\t\t\t\t\tif (status === 5) {\n\t\t\t\t\t\ttitle = '卖家同意退款'\n\t\t\t\t\t}\n\t\t\t\t\tif (status === 6) {\n\t\t\t\t\t\ttitle = '卖家拒绝退款'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn title\n\t\t\t}\n\t\t}\n\t},\n\tbeforeMount() {\n\t\tthis.active = this.$route.params.name\n\t}\n}\n",{"version":3,"sources":["refundAndReturnPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"refundAndReturnPage.vue","sourceRoot":"src/pages/orderPage","sourcesContent":["<template>\n\t<div>\n\t\t<van-nav-bar\n\t\t\ttitle=\"退款/退货\"\n\t\t\tleft-arrow\n\t\t\tfixed\n\t\t\t@click-left=\"goBack\"\n\t\t/>\n\t\t\n\t\t<van-tabs v-model=\"active\" color=\"#ff0000\" title-active-color=\"#ff0000\" @change=\"tabChange\" animated sticky :offset-top=\"offsetTop\">\n\t\t\t<van-tab v-for=\"(item,index) in tabs\" :key=\"index\" :title=\"item\" :name=\"item\">\n\t\t\t\t<van-list\n\t\t\t\t\tv-model=\"loading\"\n\t\t\t\t\t:finished=\"finished\"\n\t\t\t\t\tfinished-text=\"没有更多了\"\n\t\t\t\t\t@load=\"onLoad\"\n\t\t\t\t>\n\t\t\t\t\t<order-cell\n\t\t\t\t\t\tv-for=\"(item,index) in datalist\" \n\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\t:title=\"orderStatus(item.Status)\"\n\t\t\t\t\t\t:time=\"item.CreateTime.replace('T',' ').replace('Z',' ')\"\n\t\t\t\t\t\t:image=\"item.ProductImage\"\n\t\t\t\t\t\t:name=\"item.ProductName\"\n\t\t\t\t\t\t:goodsNum=\"item.Quantity\"\n\t\t\t\t\t\t:totalPrice=\"item.TotalPrice\"\n\t\t\t\t\t\t:orderNo=\"item.OrderNo\"\n\t\t\t\t\t\t@orderDetail=\"orderDetail(item)\"\n\t\t\t\t\t\t@cancelRefund=\"cancelRefund(item,index)\"\n\t\t\t\t\t></order-cell>\n\t\t\t\t</van-list>\n\t\t\t</van-tab>\n\t\t</van-tabs>\n\t\t<router-view></router-view>\n\t</div>\n</template>\n\n<script>\n\timport {NavBar,Tabs,Tab,List,Toast,Dialog} from 'vant'\n\timport {Images} from '@/resources/index.js'\n\timport orderCell from '@/components/orderCell.vue'\n\texport default{\n\t\tcomponents:{\n\t\t\t[NavBar.name]:NavBar,\n\t\t\t[Tabs.name]:Tabs,\n\t\t\t[Tab.name]:Tab,\n\t\t\t[List.name]:List,\n\t\t\t[Toast.name]:Toast,\n\t\t\t[Dialog.Component.name]:Dialog.Component,\n\t\t\torderCell\n\t\t},\n\t\tdata(){\n\t\t\treturn {\n\t\t\t\tbg:Images.indent.ic_bg,\n\t\t\t\tactive:'退款',\n\t\t\t\tdatalist:'',\n\t\t\t\ttabs:['退款','退货'],\n\t\t\t\ttitle:'',\n\t\t\t\tloading:false,\n\t\t\t\tfinished:false,\n\t\t\t\toffsetTop:46\n\t\t\t}\n\t\t},\n\t\tmethods:{\n\t\t\tgoBack(){\n\t\t\t\tthis.$store.commit('changeTabbarActive','mine')\n\t\t\t\tthis.$router.push('/main/mine')\n\t\t\t},\n\t\t\ttabChange(name){\n\t\t\t\tthis.loading = false,\n\t\t\t\tthis.finished = false\n\t\t\t\tthis.datalist = []\n\t\t\t\tthis.$store.commit('requestRefundReturnListCount',0)\n\t\t\t\tthis.getList(this.$store.state.requestRefundReturnListCount)\n\t\t\t},\n\t\t\tgetList(count){\n\t\t\t\tvar url = ''\n\t\t\t\tif (this.active === '退款') {\n\t\t\t\t\turl = '/order/orderReturnList?user_id='+this.$store.state.userID+'&token='+this.$store.state.token\n\t\t\t\t} else if (this.active === '退货') {\n\t\t\t\t\turl = '/order/orderProductList?user_id='+this.$store.state.userID+'&token='+this.$store.state.token\n\t\t\t\t} else{\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tthis.axios.get(url).then((response)=>{\n\t\t\t\t\tconsole.log(response)\n\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t}else if (response.data.status === 1) {\n\t\t\t\t\t\tif (response.data.obj.length > 0) {\n\t\t\t\t\t\t\tthis.$store.commit('requestRefundReturnListCount',1)\n\t\t\t\t\t\t\tthis.datalist = [...this.datalist,...response.data.obj]\n\t\t\t\t\t\t} else{\n\t\t\t\t\t\t\tthis.finished = true\n\t\t\t\t\t\t}\n\t\t\t\t\t} else{\n\t\t\t\t\t\tToast('数据请求失败，请重试')\n\t\t\t\t\t}\n\t\t\t\t}).catch((response)=>{\n\t\t\t\t\tToast('网络请求出错，请重试')\n\t\t\t\t})\n\t\t\t},\n\t\t\tonLoad(){\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tthis.getList(this.$store.state.requestRefundReturnListCount)\n\t\t\t\t\tthis.loading = false\n\t\t\t\t\tthis.finished = true\n\t\t\t\t},500)\n\t\t\t},\n\t\t\torderDetail(item){\n\t\t\t\titem.title = this.active\n\t\t\t\tthis.$store.commit('orderDetail',item)\n\t\t\t\tthis.$router.push('/orderDetail')\n\t\t\t},\n\t\t\tcancelRefund(item,index){\n\t\t\t\tDialog.confirm({\n\t\t\t\t\ttitle:'提示',\n\t\t\t\t\tmessage:'是否取消退款'\n\t\t\t\t}).then(()=>{\n\t\t\t\t\tvar url = '/order/cancelReturn?user_id='+this.$store.state.userID+'&order_no='+item.OrderNo+'&product_id='+item.ProductID+'&return_id='+item.ID+'&token='+this.$store.state.token\n\t\t\t\t\tthis.axios.get(url).then((response)=>{\n\t\t\t\t\t\tif(response.data.detail && response.data.detail === 'token异常，重新登陆') {\n\t\t\t\t\t\t\tToast('登陆过期，请重新登录')\n\t\t\t\t\t\t\tthis.$router.push('/login')\n\t\t\t\t\t\t}else if (response.data.status === 1) {\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tToast(response.data.detail)\n\t\t\t\t\t\t\t\tthis.datalist.splice(index,1)\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t}\n\t\t\t\t\t}).catch((response)=>{\n\t\t\t\t\t\tToast('网络请求出错，请重试')\n\t\t\t\t\t})\n\t\t\t\t}).catch(()=>{})\n\t\t\t}\n\t\t},\n\t\tcomputed:{\n\t\t\torderStatus(){\n\t\t\t\treturn function(status){\n\t\t\t\t\tvar title = ''\n\t\t\t\t\tif (this.active === '退款') {\n\t\t\t\t\t\tif (status === 1) {\n\t\t\t\t\t\t\ttitle = '退款中'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (status === 2) {\n\t\t\t\t\t\t\ttitle = '退款成功'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (status === 3) {\n\t\t\t\t\t\t\ttitle = '退款失败'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (this.active === '退货') {\n\t\t\t\t\t\tif (status === 1) {\n\t\t\t\t\t\t\ttitle = '退货申请中'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (status === 2) {\n\t\t\t\t\t\t\ttitle = '退货申请成功'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (status === 3) {\n\t\t\t\t\t\t\ttitle = '退货申请失败'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (status === 4) {\n\t\t\t\t\t\t\ttitle = '等待卖家收货'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (status === 5) {\n\t\t\t\t\t\t\ttitle = '卖家同意退款'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (status === 6) {\n\t\t\t\t\t\t\ttitle = '卖家拒绝退款'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn title\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tbeforeMount() {\n\t\t\tthis.active = this.$route.params.name\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t.van-nav-bar{\n\t\tbackground: url(../../assets/Images/Mine/background1.png);\n\t}\n\t.van-nav-bar__title{\n\t\tcolor: white;\n\t}\n\t.van-nav-bar__arrow{\n\t\tfont-size: 1.5rem;\n\t\tcolor: white;\n\t}\n\t.van-tabs{\n\t\tmargin-top: 2.875rem;\n\t}\n</style>\n"]}]}